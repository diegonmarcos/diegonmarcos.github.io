<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture | Cloud Portal</title>
    <meta name="description" content="Cloud Architecture - Security, Server, AI diagrams">

    <!-- Matomo Tag Manager -->
    <script>
      var _mtm = window._mtm = window._mtm || [];
      _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
      (function() {
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src='https://analytics.diegonmarcos.com/js/container_odwLIyPV.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>

    <style>[data-theme=minimalistic]{--bg-primary: #000000;--bg-secondary: #0a0a0a;--bg-card: #111111;--bg-card-hover: #1a1a1a;--text-primary: #ffffff;--text-secondary: #888888;--accent-primary: #ff6600;--accent-orange: #ff6600;--accent-blue: #3399ff;--accent-green: #00cc66;--accent-yellow: #ffcc00;--accent-red: #ff3333;--accent-purple: #8b5cf6;--border-color: #333333;--border-highlight: #ff6600;--shadow: rgba(0, 0, 0, 0.5);--glow: rgba(255, 102, 0, 0.3);--font-mono: 'Consolas', 'Monaco', 'Courier New', monospace;--font-main: var(--font-mono);--border-radius: 0px;--border-radius-lg: 0px;--card-padding: 1rem;--transition-speed: 0.15s}:root,[data-theme=blurred]{--bg-primary: #0a0e27;--bg-secondary: #151a33;--bg-card: rgba(26, 31, 58, 0.8);--bg-card-hover: rgba(35, 42, 74, 0.9);--text-primary: #e0e6ff;--text-secondary: #8b95c9;--accent-primary: #4a9eff;--accent-orange: #ff6b35;--accent-blue: #4a9eff;--accent-green: #10b981;--accent-yellow: #fbbf24;--accent-red: #ef4444;--accent-purple: #8b5cf6;--border-color: rgba(255, 255, 255, 0.1);--border-highlight: #4a9eff;--shadow: rgba(0, 0, 0, 0.3);--glow: rgba(74, 158, 255, 0.4);--font-mono: 'Consolas', 'Monaco', 'Courier New', monospace;--font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;--border-radius: 12px;--border-radius-lg: 16px;--card-padding: 1.5rem;--transition-speed: 0.3s}*{margin:0;padding:0;box-sizing:border-box}html,body{height:100%;width:100%;overflow-x:auto}html{min-width:100%}body{font-family:var(--font-main);background:var(--bg-primary);color:var(--text-primary);min-height:100vh;padding:.5rem;display:flex;flex-direction:column;font-size:13px;line-height:1.4;transition:background var(--transition-speed) ease,color var(--transition-speed) ease}[data-theme=blurred] body{background:linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);font-size:14px;padding:1rem}.container{width:100%;max-width:100%;margin:0 auto;flex:1;display:flex;flex-direction:column}[data-theme=blurred] .container{max-width:100%}#cards-view{max-width:1600px;width:100%;margin:0 auto}#tree-view{width:100%;overflow-x:auto}#architecture-view{flex:1;width:100%}@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeInDown{from{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}@keyframes slideIn{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slideOut{from{transform:translateX(0);opacity:1}to{transform:translateX(400px);opacity:0}}@keyframes slideInScale{from{opacity:0;transform:scale(0.9) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}header{text-align:center;margin-bottom:.75rem;animation:fadeInDown .6s ease-out}header h1{font-size:1.2rem;font-weight:700;color:var(--accent-primary);text-transform:uppercase;letter-spacing:1px;margin-bottom:.15rem;transition:all var(--transition-speed) ease}[data-theme=blurred] header{margin-bottom:1.5rem}[data-theme=blurred] header h1{font-size:2rem;text-transform:none;letter-spacing:normal;background:linear-gradient(135deg, var(--accent-blue), var(--accent-purple));-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);background-clip:text}.subtitle{color:var(--text-secondary);font-size:.7rem;text-transform:uppercase;letter-spacing:.5px;transition:all var(--transition-speed) ease}[data-theme=blurred] .subtitle{font-size:1rem;text-transform:none;letter-spacing:normal;font-weight:300}.header-banner{width:100%;max-width:800px;margin:.5rem auto;opacity:.8;transition:opacity .3s ease}.header-banner svg{width:100%;height:auto;max-height:80px}.header-banner:hover{opacity:1}[data-theme=blurred] .header-banner{opacity:.9;margin:1rem auto}[data-theme=blurred] .header-banner svg{max-height:100px;filter:drop-shadow(0 0 10px rgba(56, 189, 248, 0.2))}[data-theme=blurred] .header-banner:hover svg{filter:drop-shadow(0 0 15px rgba(56, 189, 248, 0.4))}.section-header{text-align:left;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid var(--border-color);transition:all var(--transition-speed) ease}.section-header h2{font-size:1rem;font-weight:600;color:var(--accent-primary);text-transform:uppercase;letter-spacing:1px;transition:all var(--transition-speed) ease}[data-theme=blurred] .section-header{text-align:center;margin-bottom:2rem;border-bottom:none;padding-bottom:0}[data-theme=blurred] .section-header h2{font-size:2rem;text-transform:none;letter-spacing:normal;background:linear-gradient(135deg, var(--accent-blue), var(--accent-purple));-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);background-clip:text}.theme-toggle{position:fixed;top:1rem;right:1rem;z-index:1000;display:flex;align-items:center;justify-content:center;width:36px;height:36px;padding:0;border:none;background:rgba(0,0,0,0);color:var(--text-secondary);cursor:pointer;transition:all .3s ease;border-radius:50%}.theme-toggle svg{width:18px;height:18px;transition:transform .5s ease,color .3s ease}.theme-toggle .theme-label{position:absolute;right:100%;margin-right:.5rem;font-family:var(--font-mono);font-size:.7rem;text-transform:uppercase;white-space:nowrap;opacity:0;transform:translateX(10px);transition:opacity .2s ease,transform .2s ease;pointer-events:none}.theme-toggle:hover{color:var(--accent-primary);background:var(--bg-card)}.theme-toggle:hover svg{transform:rotate(180deg)}.theme-toggle:hover .theme-label{opacity:1;transform:translateX(0)}[data-theme=blurred] .theme-toggle{color:var(--text-secondary)}[data-theme=blurred] .theme-toggle:hover{color:var(--accent-blue);background:hsla(0,0%,100%,.1);box-shadow:0 0 20px var(--glow)}[data-theme=blurred] .theme-toggle:hover svg{filter:drop-shadow(0 0 8px var(--accent-blue))}.zoom-controls{position:fixed;top:3.5rem;right:1rem;z-index:1000;display:flex;align-items:center;gap:.25rem;background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--border-radius);padding:.25rem;opacity:.7;transition:all .3s ease}.zoom-controls:hover{opacity:1;border-color:var(--accent-primary)}[data-theme=blurred] .zoom-controls{background:rgba(26,31,58,.9);backdrop-filter:blur(10px);border-radius:20px;padding:.35rem}[data-theme=blurred] .zoom-controls:hover{border-color:var(--accent-blue);box-shadow:0 0 20px var(--glow)}.zoom-btn{display:flex;align-items:center;justify-content:center;width:28px;height:28px;padding:0;border:none;background:rgba(0,0,0,0);color:var(--text-secondary);cursor:pointer;transition:all .2s ease;border-radius:4px}.zoom-btn svg{width:16px;height:16px}.zoom-btn:hover:not(:disabled){color:var(--accent-primary);background:var(--bg-primary)}.zoom-btn:disabled{opacity:.3;cursor:not-allowed}[data-theme=blurred] .zoom-btn{border-radius:50%}[data-theme=blurred] .zoom-btn:hover:not(:disabled){color:var(--accent-blue);background:hsla(0,0%,100%,.1)}.zoom-level{font-family:var(--font-mono);font-size:.65rem;color:var(--text-secondary);min-width:32px;text-align:center;user-select:none}[data-theme=blurred] .zoom-level{font-size:.7rem}.nav-level1{display:flex;justify-content:center;gap:.5rem;margin:1rem 0 .75rem 0}.nav-main-btn{padding:.6rem 1.5rem;font-size:.85rem;font-weight:600;text-transform:uppercase;letter-spacing:1px;border:2px solid var(--border-color);border-radius:var(--border-radius);background:var(--bg-card);color:var(--text-secondary);cursor:pointer;transition:all .3s ease}.nav-main-btn:hover{border-color:var(--accent-primary);color:var(--text-primary)}.nav-main-btn.active{border-color:var(--accent-primary);background:var(--accent-primary);color:var(--bg-primary)}[data-theme=blurred] .nav-main-btn{background:hsla(0,0%,100%,.05);border:1px solid hsla(0,0%,100%,.1);border-radius:25px;backdrop-filter:blur(10px)}[data-theme=blurred] .nav-main-btn:hover{border-color:var(--accent-blue);background:hsla(0,0%,100%,.1);box-shadow:0 0 15px var(--glow)}[data-theme=blurred] .nav-main-btn.active{background:linear-gradient(135deg, var(--accent-blue), var(--accent-purple));border-color:rgba(0,0,0,0);color:#fff;box-shadow:0 0 20px var(--glow)}.nav-level2{display:none;flex-wrap:wrap;justify-content:center;gap:.5rem;padding:.75rem;background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--border-radius);margin-bottom:1rem}.nav-level2.active{display:flex}[data-theme=blurred] .nav-level2{background:hsla(0,0%,100%,.03);border:1px solid hsla(0,0%,100%,.08);border-radius:15px;backdrop-filter:blur(10px)}.view-btn-group{position:relative}.view-btn-group .view-btn-dropdown{display:none;position:absolute;top:100%;left:0;z-index:100;flex-direction:column;gap:.25rem;padding:.5rem;background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--border-radius);min-width:100%;box-shadow:0 4px 12px rgba(0,0,0,.3)}.view-btn-group:hover .view-btn-dropdown{display:flex}[data-theme=blurred] .view-btn-group .view-btn-dropdown{background:rgba(26,31,58,.95);backdrop-filter:blur(15px);border:1px solid hsla(0,0%,100%,.1);border-radius:10px}.nav-level3{display:none;flex-wrap:wrap;justify-content:center;gap:.5rem;padding:.75rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--border-radius);margin-bottom:1rem;margin-top:-0.5rem}.nav-level3-group{display:none;flex-wrap:wrap;justify-content:center;gap:.5rem}[data-theme=blurred] .nav-level3{background:hsla(0,0%,100%,.02);border:1px solid hsla(0,0%,100%,.05);border-radius:12px;backdrop-filter:blur(10px)}.cards-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(var(--card-min-width, 220px), 1fr));gap:calc(1rem*var(--zoom-scale, 1));animation:fadeIn .8s ease-out}[data-theme=blurred] .cards-grid{grid-template-columns:repeat(auto-fit, minmax(var(--card-min-width, 280px), 1fr));gap:calc(2rem*var(--zoom-scale, 1))}.card{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--border-radius);padding:calc(var(--card-padding)*var(--zoom-scale, 1));cursor:pointer;transition:all .3s ease,transform .3s ease;position:relative;text-decoration:none;display:flex;flex-direction:column;transform-origin:center center;z-index:1;min-height:calc(120px*var(--zoom-scale, 1));height:calc(120px*var(--zoom-scale, 1))}.card:hover{background:var(--bg-card-hover);border-color:var(--border-highlight);transform:scale(var(--hover-scale, 2));z-index:100;box-shadow:0 20px 60px rgba(0,0,0,.7)}.card:hover .card-icon{color:var(--accent-primary)}.card:hover h3{color:var(--accent-primary)}.card:hover .card-status.online{background:var(--accent-green);color:#000}.card.card-link{text-decoration:none;color:inherit}[data-theme=blurred] .card{border-radius:var(--border-radius-lg);overflow:hidden;backdrop-filter:blur(10px);min-height:calc(180px*var(--zoom-scale, 1));height:calc(180px*var(--zoom-scale, 1))}[data-theme=blurred] .card::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg, var(--accent-blue), var(--accent-purple));opacity:0;transition:opacity .4s ease;z-index:0}[data-theme=blurred] .card::after{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);opacity:0;transition:opacity .4s ease;pointer-events:none}[data-theme=blurred] .card:hover{transform:scale(var(--hover-scale, 2));box-shadow:0 25px 80px var(--shadow),0 0 50px var(--glow);border-color:var(--accent-blue)}[data-theme=blurred] .card:hover::before{opacity:.1}[data-theme=blurred] .card:hover::after{opacity:1}[data-theme=blurred] .card:hover .card-icon{filter:drop-shadow(0 0 12px var(--accent-blue))}[data-theme=blurred] .card:hover h3{color:var(--accent-blue)}[data-theme=blurred] .card:hover p{color:var(--text-primary)}[data-theme=blurred] .card:hover .card-status.online{background:rgba(16,185,129,.25);color:var(--accent-green);box-shadow:0 0 15px rgba(16,185,129,.3)}[data-theme=blurred] .card>*{position:relative;z-index:1}.card-icon{width:calc(32px*var(--zoom-scale, 1));height:calc(32px*var(--zoom-scale, 1));margin-bottom:calc(.75rem*var(--zoom-scale, 1));color:var(--accent-blue);transition:all var(--transition-speed) ease}.card-icon svg{width:100%;height:100%}[data-theme=blurred] .card-icon{width:calc(60px*var(--zoom-scale, 1));height:calc(60px*var(--zoom-scale, 1));margin-bottom:calc(1.5rem*var(--zoom-scale, 1))}.card h3{font-size:calc(.95rem*var(--zoom-scale, 1));margin-bottom:calc(.25rem*var(--zoom-scale, 1));font-weight:600;text-transform:uppercase;letter-spacing:.5px;transition:color var(--transition-speed) ease}[data-theme=blurred] .card h3{font-size:calc(1.5rem*var(--zoom-scale, 1));text-transform:none;letter-spacing:normal;margin-bottom:calc(.75rem*var(--zoom-scale, 1))}.card p{color:var(--text-secondary);font-size:calc(.8rem*var(--zoom-scale, 1));margin-bottom:calc(.75rem*var(--zoom-scale, 1));transition:color var(--transition-speed) ease}[data-theme=blurred] .card p{font-size:calc(.95rem*var(--zoom-scale, 1));line-height:1.6;margin-bottom:calc(1.5rem*var(--zoom-scale, 1))}.card-status{display:inline-block;padding:calc(.2rem*var(--zoom-scale, 1)) calc(.5rem*var(--zoom-scale, 1));font-size:calc(.7rem*var(--zoom-scale, 1));font-weight:600;text-transform:uppercase;letter-spacing:.5px;transition:all var(--transition-speed) ease;border-radius:var(--border-radius);margin-top:auto}.card-status.online{background:rgba(0,0,0,0);color:var(--accent-green);border:1px solid var(--accent-green)}.card-status.pending{background:rgba(0,0,0,0);color:var(--accent-yellow);border:1px solid var(--accent-yellow)}[data-theme=blurred] .card-status{padding:calc(.4rem*var(--zoom-scale, 1)) calc(1rem*var(--zoom-scale, 1));font-size:calc(.85rem*var(--zoom-scale, 1));border-radius:20px}[data-theme=blurred] .card-status.online{background:rgba(16,185,129,.15);border-color:rgba(16,185,129,.3)}[data-theme=blurred] .card-status.pending{background:rgba(251,191,36,.15);border-color:rgba(251,191,36,.3)}.card-placeholder{border-style:dashed;opacity:.6}.card-placeholder:hover{opacity:.8;transform:none}[data-theme=blurred] .card-placeholder{border-style:dashed;background:hsla(0,0%,100%,.02);opacity:.5}[data-theme=blurred] .card-placeholder:hover{opacity:.7;transform:none;box-shadow:none}.card-actions{margin-top:calc(.5rem*var(--zoom-scale, 1));padding-top:calc(.5rem*var(--zoom-scale, 1));border-top:1px solid var(--border-color)}[data-theme=blurred] .card-actions{margin-top:calc(1rem*var(--zoom-scale, 1));padding-top:calc(1rem*var(--zoom-scale, 1))}.code-with-copy{display:flex;align-items:center;gap:calc(.5rem*var(--zoom-scale, 1));background:var(--bg-primary);padding:calc(.4rem*var(--zoom-scale, 1)) calc(.5rem*var(--zoom-scale, 1));border:1px solid var(--border-color);border-radius:var(--border-radius)}[data-theme=blurred] .code-with-copy{background:rgba(0,0,0,.3);border-radius:8px;padding:calc(.75rem*var(--zoom-scale, 1)) calc(1rem*var(--zoom-scale, 1))}.card-code{font-family:var(--font-mono);font-size:calc(.65rem*var(--zoom-scale, 1));color:var(--accent-orange);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[data-theme=blurred] .card-code{color:var(--accent-green);font-size:calc(.75rem*var(--zoom-scale, 1))}.copy-icon{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:calc(.25rem*var(--zoom-scale, 1));display:flex;align-items:center;justify-content:center;transition:color var(--transition-speed) ease}.copy-icon svg{width:calc(14px*var(--zoom-scale, 1));height:calc(14px*var(--zoom-scale, 1))}.copy-icon:hover{color:var(--accent-primary)}.copy-icon:disabled{opacity:.3;cursor:not-allowed}.vm-buttons{display:flex;gap:calc(.5rem*var(--zoom-scale, 1));margin-top:calc(.5rem*var(--zoom-scale, 1))}.vm-btn{flex:1;display:flex;align-items:center;justify-content:center;gap:calc(.25rem*var(--zoom-scale, 1));padding:calc(.4rem*var(--zoom-scale, 1));background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--border-radius);color:var(--text-secondary);font-family:var(--font-mono);font-size:calc(.55rem*var(--zoom-scale, 1));text-transform:uppercase;cursor:pointer;transition:all var(--transition-speed) ease}.vm-btn svg{width:calc(12px*var(--zoom-scale, 1));height:calc(12px*var(--zoom-scale, 1))}.vm-btn:hover:not(:disabled){border-color:var(--accent-primary);color:var(--accent-primary)}.vm-btn:disabled{opacity:.3;cursor:not-allowed}[data-theme=blurred] .vm-btn{border-radius:8px;padding:calc(.5rem*var(--zoom-scale, 1)) calc(.75rem*var(--zoom-scale, 1));backdrop-filter:blur(5px);background:hsla(0,0%,100%,.05);font-size:calc(.6rem*var(--zoom-scale, 1))}[data-theme=blurred] .vm-btn:hover:not(:disabled){background:rgba(74,158,255,.1);border-color:var(--accent-blue);color:var(--accent-blue);box-shadow:0 0 15px rgba(74,158,255,.2)}.card:nth-child(1){animation:fadeIn .4s ease-out .1s backwards}.card:nth-child(2){animation:fadeIn .4s ease-out .2s backwards}.card:nth-child(3){animation:fadeIn .4s ease-out .3s backwards}.card:nth-child(4){animation:fadeIn .4s ease-out .4s backwards}.card:nth-child(5){animation:fadeIn .4s ease-out .5s backwards}.card:nth-child(6){animation:fadeIn .4s ease-out .6s backwards}.card:nth-child(7){animation:fadeIn .4s ease-out .7s backwards}.card:nth-child(8){animation:fadeIn .4s ease-out .8s backwards}.card:nth-child(9){animation:fadeIn .4s ease-out .9s backwards}.card:nth-child(10){animation:fadeIn .4s ease-out 1s backwards}.view-toggle{display:flex;flex-wrap:wrap;justify-content:center;align-items:flex-start;gap:.35rem;margin-top:.75rem;padding:0 .5rem}[data-theme=blurred] .view-toggle{gap:.5rem}.tree-controls{display:flex;justify-content:center;align-items:center;gap:.5rem;margin-bottom:1rem;padding-top:.5rem}.tree-controls-group{display:flex;gap:.25rem}.tree-controls-sep{width:1px;height:24px;background:var(--border-color);margin:0 .5rem}.tree-filter-btn{padding:.25rem .5rem;border:1px solid var(--border-color);background:var(--bg-card);color:var(--text-secondary);font-family:var(--font-mono);font-size:.7rem;text-transform:uppercase;cursor:pointer;transition:all var(--transition-speed) ease;border-radius:var(--border-radius)}.tree-filter-btn:hover{border-color:var(--accent-primary);color:var(--accent-primary)}.tree-filter-btn.active{background:var(--accent-primary);border-color:var(--accent-primary);color:#000}[data-theme=blurred] .tree-controls-sep{background:hsla(0,0%,100%,.1)}[data-theme=blurred] .tree-filter-btn{border-radius:12px;backdrop-filter:blur(10px);background:hsla(0,0%,100%,.05)}[data-theme=blurred] .tree-filter-btn:hover{background:hsla(0,0%,100%,.1);border-color:var(--accent-blue);color:var(--accent-blue)}[data-theme=blurred] .tree-filter-btn.active{background:linear-gradient(135deg, var(--accent-blue), var(--accent-purple));border-color:rgba(0,0,0,0);color:#fff}.tree-ctrl-btn{display:flex;align-items:center;gap:.25rem;padding:.3rem .6rem;border:1px solid var(--border-color);background:var(--bg-card);color:var(--text-secondary);font-family:var(--font-mono);font-size:.75rem;text-transform:uppercase;cursor:pointer;transition:all var(--transition-speed) ease;border-radius:var(--border-radius)}.tree-ctrl-btn svg{width:12px;height:12px}.tree-ctrl-btn:hover{border-color:var(--accent-primary);color:var(--accent-primary)}[data-theme=blurred] .tree-ctrl-btn{border-radius:15px;backdrop-filter:blur(10px);background:hsla(0,0%,100%,.05)}[data-theme=blurred] .tree-ctrl-btn:hover{background:hsla(0,0%,100%,.1);border-color:var(--accent-blue);color:var(--accent-blue)}.view-btn{display:flex;align-items:center;gap:.2rem;padding:.3rem .5rem;border:1px solid var(--border-color);background:var(--bg-card);color:var(--text-secondary);font-family:var(--font-mono);font-size:.65rem;text-transform:uppercase;cursor:pointer;transition:all var(--transition-speed) ease;border-radius:var(--border-radius);white-space:nowrap;text-decoration:none}.view-btn svg{width:12px;height:12px}.view-btn:hover{border-color:var(--accent-primary);color:var(--text-primary)}.view-btn.active{background:var(--accent-primary);border-color:var(--accent-primary);color:#000}[data-theme=blurred] .view-btn{border-radius:14px;padding:.35rem .65rem;backdrop-filter:blur(10px);background:hsla(0,0%,100%,.05);text-transform:none;font-size:.7rem}[data-theme=blurred] .view-btn:hover{background:hsla(0,0%,100%,.1);border-color:var(--accent-blue)}[data-theme=blurred] .view-btn.active{background:linear-gradient(135deg, var(--accent-blue), var(--accent-purple));border-color:rgba(0,0,0,0);color:#fff}.view-group{display:flex;flex-direction:column;align-items:center;gap:.2rem}.view-group-label{font-size:.5rem;font-family:var(--font-mono);text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);opacity:.6}.view-group-buttons{display:flex;flex-wrap:wrap;justify-content:center;gap:.15rem}[data-theme=blurred] .view-group-label{font-size:.55rem;letter-spacing:1px;opacity:.5}[data-theme=blurred] .view-group-buttons{gap:.25rem}.view-group.group-active .view-btn{text-decoration:underline;text-underline-offset:4px;text-decoration-thickness:1px}.view-separator{width:1px;height:30px;background:var(--border-color);margin:0 .35rem;opacity:.3;align-self:center}[data-theme=blurred] .view-separator{background:linear-gradient(180deg, transparent, var(--border-color), transparent);height:35px;opacity:.25;margin:0 .5rem}.view-content{display:none}.view-content.active{display:block}#tree-view{width:100%}.tree-container{font-family:var(--font-mono);font-size:.8rem;padding:1rem 0}.tree-section{margin-bottom:1.5rem}.tree-section-header{display:flex;align-items:center;gap:.75rem;padding:.5rem 0;margin-bottom:.5rem;border-bottom:1px solid var(--border-color)}.tree-section-header .section-icon{font-size:1rem}.tree-section-header .section-title{font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:1.5px;color:var(--text-secondary)}.tree-list{list-style:none;padding:0;margin:0}.tree-item,.tree-node{position:relative}.tree-item::before,.tree-node::before{content:"";position:absolute;left:0;top:0;bottom:0;width:1px;background:var(--border-color)}.tree-item:last-child::before,.tree-node:last-child::before{height:1.1rem}.tree-row,.node-header{display:flex;align-items:center;gap:.5rem;padding:.35rem .5rem;margin-left:1rem;position:relative;transition:background .15s ease;border-radius:4px}.tree-row::before,.node-header::before{content:"";position:absolute;left:-1rem;top:50%;width:.75rem;height:1px;background:var(--border-color)}.tree-row:hover,.node-header:hover{background:var(--bg-card-hover)}.tree-row:hover .tree-actions,.node-header:hover .tree-actions{opacity:1}.tree-item[data-level="0"]>.tree-row,.tree-item[data-level="0"]>.node-header,[data-level="0"].tree-node>.tree-row,[data-level="0"].tree-node>.node-header{margin-left:0}.tree-item[data-level="0"]>.tree-row::before,.tree-item[data-level="0"]>.node-header::before,[data-level="0"].tree-node>.tree-row::before,[data-level="0"].tree-node>.node-header::before{display:none}.tree-item[data-level="0"]::before,[data-level="0"].tree-node::before{display:none}.tree-item[data-level="1"],[data-level="1"].tree-node{padding-left:1.5rem}.tree-item[data-level="2"],[data-level="2"].tree-node{padding-left:3rem}.tree-item[data-level="3"],[data-level="3"].tree-node{padding-left:4.5rem}.tree-toggle,.expand-icon{width:16px;height:16px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-secondary);flex-shrink:0}.tree-toggle:hover,.expand-icon:hover{color:var(--accent-primary)}.tree-toggle svg,.expand-icon svg{width:10px;height:10px;transition:transform .15s ease}.tree-toggle.expanded svg,.expanded.expand-icon svg{transform:rotate(90deg)}.tree-toggle.empty,.empty.expand-icon{visibility:hidden}.tree-status{width:8px;height:8px;border-radius:50%;flex-shrink:0}.tree-status.on{background:var(--accent-green);box-shadow:0 0 6px var(--accent-green)}.tree-status.dev{background:var(--accent-yellow)}.tree-status.hold{background:var(--accent-orange)}.tree-status.tbd{background:var(--text-secondary);opacity:.4}.tree-status.offline{background:var(--accent-red)}.tree-icon{font-size:.9rem;flex-shrink:0;width:18px;text-align:center}.tree-label,.node-title{color:var(--text-primary);flex:1;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tree-label.category,.category.node-title{color:var(--text-secondary);font-size:.7rem;text-transform:uppercase;letter-spacing:.5px}.tree-label.provider,.provider.node-title{font-weight:600;font-size:.85rem}.tree-label.vm,.vm.node-title{color:var(--accent-blue)}.tree-type{font-size:.6rem;padding:.1rem .35rem;background:var(--bg-secondary);border:1px solid var(--border-color);color:var(--text-secondary);border-radius:3px;text-transform:uppercase;flex-shrink:0}.tree-actions{display:flex;gap:.25rem;opacity:0;transition:opacity .15s ease;flex-shrink:0}.tree-action-btn,.node-copy-btn,.node-url-btn{width:22px;height:22px;display:flex;align-items:center;justify-content:center;background:var(--bg-card);border:1px solid var(--border-color);border-radius:4px;color:var(--text-secondary);cursor:pointer;transition:all .15s ease}.tree-action-btn svg,.node-copy-btn svg,.node-url-btn svg{width:12px;height:12px}.tree-action-btn:hover,.node-copy-btn:hover,.node-url-btn:hover{border-color:var(--accent-primary);color:var(--accent-primary)}.tree-action-btn.url-btn:hover,.url-btn.node-copy-btn:hover,.url-btn.node-url-btn:hover{border-color:var(--accent-blue);color:var(--accent-blue)}.tree-action-btn:disabled,.node-copy-btn:disabled,.node-url-btn:disabled{opacity:.3;cursor:not-allowed}.tree-action-btn.copied,.copied.node-copy-btn,.copied.node-url-btn{border-color:var(--accent-green);color:var(--accent-green)}.tree-children{display:none}.tree-children.expanded{display:block}.vm-card-grid{display:grid;grid-template-columns:repeat(3, 1fr);gap:.75rem;padding:.5rem 0}.vm-box{background:var(--bg-card);border:1px solid var(--border-color);border-radius:6px;overflow:hidden}.vm-box.box-services{border-left:3px solid var(--accent-blue)}.vm-box.box-data{border-left:3px solid var(--accent-purple)}.vm-box.box-os{border-left:3px solid var(--accent-green)}.vm-box-header{display:flex;align-items:center;gap:.5rem;padding:.4rem .6rem;background:var(--bg-secondary);border-bottom:1px solid var(--border-color);font-size:.65rem;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--text-secondary)}.vm-box-header .box-icon{font-size:.8rem}.vm-box-content{padding:.4rem}.vm-box-section:not(:last-child){margin-bottom:.5rem;padding-bottom:.5rem;border-bottom:1px dashed var(--border-color)}.vm-box-section-label{font-size:.55rem;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);opacity:.7;padding:.15rem .3rem;margin-bottom:.2rem}.vm-item{display:flex;align-items:center;gap:.4rem;padding:.3rem .4rem;border-radius:4px;transition:background .15s ease}.vm-item:hover{background:var(--bg-card-hover)}.vm-item-status{width:8px;height:8px;border-radius:50%;flex-shrink:0;opacity:.5}.vm-item-status.on{background:var(--accent-green)}.vm-item-status.offline{background:var(--accent-red)}.vm-item-status.dev{background:var(--accent-yellow)}.vm-item-status.hold{background:var(--accent-orange)}.vm-item-status.tbd{background:var(--text-secondary);opacity:.3}.vm-item-name{font-size:.7rem;color:var(--text-primary);flex:1;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vm-live-status{width:8px;height:8px;border-radius:50%;flex-shrink:0;margin-right:.3rem}.vm-live-status.online{background:var(--accent-green);box-shadow:0 0 6px var(--accent-green);animation:pulse-green 2s ease-in-out infinite}.vm-live-status.offline{background:var(--accent-red);box-shadow:0 0 6px var(--accent-red)}.vm-live-status.unknown{background:var(--text-secondary);opacity:.4}@keyframes pulse-green{0%,100%{box-shadow:0 0 4px var(--accent-green)}50%{box-shadow:0 0 10px var(--accent-green)}}.vm-item-actions{display:flex;align-items:center;gap:.2rem;flex-shrink:0}.vm-action-btn{width:20px;height:20px;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0);border:1px solid var(--border-color);border-radius:3px;color:var(--text-secondary);cursor:pointer;transition:all .15s ease;opacity:.5}.vm-action-btn svg{width:10px;height:10px}.vm-action-btn:hover{opacity:1;border-color:var(--accent-primary);color:var(--accent-primary)}.vm-action-btn.btn-url:hover{border-color:var(--accent-blue);color:var(--accent-blue)}.vm-action-btn.btn-ssh:hover{border-color:var(--accent-green);color:var(--accent-green)}.vm-action-btn:disabled{opacity:.2;cursor:not-allowed}.vm-action-btn:disabled:hover{border-color:var(--border-color);color:var(--text-secondary)}.vm-action-btn.copied{border-color:var(--accent-green);color:var(--accent-green);opacity:1}.vm-os-info{display:flex;align-items:center;gap:.5rem;padding:.4rem}.vm-os-info .os-icon{font-size:1.2rem}.vm-os-info .os-details{flex:1}.vm-os-info .os-details .os-name{font-size:.75rem;font-weight:600;color:var(--text-primary)}.vm-os-info .os-details .os-ip{font-size:.65rem;color:var(--text-secondary);font-family:var(--font-mono)}.os-subsection{padding:.3rem .4rem;border-top:1px dashed var(--border-color)}.os-subsection:first-of-type{margin-top:.3rem}.os-subsection-header{display:flex;align-items:center;gap:.3rem;font-size:.55rem;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);opacity:.8;margin-bottom:.2rem}.os-subsection-header .subsection-icon{font-size:.65rem}.os-subsection-items{display:flex;flex-wrap:wrap;gap:.25rem}.os-tag{display:inline-flex;align-items:center;gap:.2rem;padding:.15rem .4rem;font-size:.6rem;font-family:var(--font-mono);border-radius:3px;background:var(--bg-secondary);border:1px solid var(--border-color);color:var(--text-secondary)}.os-tag.tag-network{border-color:rgba(138,180,248,.3);color:var(--accent-blue)}.os-tag.tag-partition{border-color:rgba(129,199,132,.3);color:var(--accent-green)}[data-theme=blurred] .vm-box{background:hsla(0,0%,100%,.03);backdrop-filter:blur(10px);border-color:hsla(0,0%,100%,.08);border-radius:10px}[data-theme=blurred] .vm-box.box-services{border-left-color:var(--accent-blue)}[data-theme=blurred] .vm-box.box-data{border-left-color:var(--accent-purple)}[data-theme=blurred] .vm-box.box-os{border-left-color:var(--accent-green)}[data-theme=blurred] .vm-box-header{background:hsla(0,0%,100%,.02);border-bottom-color:hsla(0,0%,100%,.06)}[data-theme=blurred] .vm-box-section{border-bottom-color:hsla(0,0%,100%,.05)}[data-theme=blurred] .vm-item:hover{background:hsla(0,0%,100%,.05)}[data-theme=blurred] .vm-action-btn{background:hsla(0,0%,100%,.02);border-color:hsla(0,0%,100%,.1)}[data-theme=blurred] .vm-action-btn:hover{background:hsla(0,0%,100%,.08)}.tree-columns{display:flex;gap:1.5rem;padding:.5rem 0}.tree-columns .tree-column{flex:1;min-width:0}.tree-columns .tree-column .column-header{font-size:.65rem;text-transform:uppercase;letter-spacing:1px;color:var(--text-secondary);padding:.25rem .5rem;margin-bottom:.25rem;border-bottom:1px solid var(--border-color)}.tree-columns .tree-column .column-items{display:flex;flex-direction:column;gap:.15rem}.tree-service{display:flex;align-items:center;gap:.4rem;padding:.25rem .4rem;border-radius:4px;transition:background .15s ease}.tree-service:hover{background:var(--bg-card-hover)}.tree-service:hover .tree-actions{opacity:1}.tree-service .service-status{width:6px;height:6px;border-radius:50%;flex-shrink:0}.tree-service .service-status.on{background:var(--accent-green);box-shadow:0 0 4px var(--accent-green)}.tree-service .service-status.dev{background:var(--accent-yellow)}.tree-service .service-status.hold{background:var(--accent-orange)}.tree-service .service-status.tbd{background:var(--text-secondary);opacity:.4}.tree-service .service-name{font-size:.75rem;color:var(--text-primary);min-width:10rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tree-service .tree-actions{opacity:0}.tree-provider,.tree-vps{background:var(--bg-card);border:1px solid var(--border-color);border-radius:6px;margin-bottom:1rem;overflow:hidden}.tree-provider>.tree-row,.tree-provider>.node-header,.tree-vps>.tree-row,.tree-vps>.node-header{padding:.6rem .75rem;margin-left:0;border-bottom:1px solid var(--border-color)}.tree-provider>.tree-row::before,.tree-provider>.node-header::before,.tree-vps>.tree-row::before,.tree-vps>.node-header::before{display:none}.tree-provider>.tree-children,.tree-vps>.tree-children{padding:.5rem 0}.tree-section-divider{width:100%;display:flex;align-items:center;gap:1rem;margin:1.5rem 0 1rem}.tree-section-divider::before,.tree-section-divider::after{content:"";flex:1;height:1px;background:var(--border-color)}.tree-section-divider .divider-label{font-size:.65rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:1px;padding:.2rem .6rem;background:var(--bg-card);border:1px solid var(--border-color)}[data-theme=blurred] .tree-container{padding:1.5rem 0}[data-theme=blurred] .tree-section-header{border-bottom-color:hsla(0,0%,100%,.1)}[data-theme=blurred] .tree-item::before,[data-theme=blurred] .tree-node::before{background:hsla(0,0%,100%,.1)}[data-theme=blurred] .tree-row::before,[data-theme=blurred] .node-header::before{background:hsla(0,0%,100%,.1)}[data-theme=blurred] .tree-row:hover,[data-theme=blurred] .node-header:hover{background:hsla(0,0%,100%,.05)}[data-theme=blurred] .tree-provider,[data-theme=blurred] .tree-vps{background:hsla(0,0%,100%,.03);backdrop-filter:blur(10px);border-color:hsla(0,0%,100%,.08);border-radius:12px}[data-theme=blurred] .tree-provider>.tree-row,[data-theme=blurred] .tree-provider>.node-header,[data-theme=blurred] .tree-vps>.tree-row,[data-theme=blurred] .tree-vps>.node-header{border-bottom-color:hsla(0,0%,100%,.06)}[data-theme=blurred] .tree-status.online{box-shadow:0 0 8px var(--accent-green)}[data-theme=blurred] .tree-type{background:hsla(0,0%,100%,.05);border-color:hsla(0,0%,100%,.1);border-radius:8px}[data-theme=blurred] .tree-action-btn,[data-theme=blurred] .node-copy-btn,[data-theme=blurred] .node-url-btn{background:hsla(0,0%,100%,.05);border-color:hsla(0,0%,100%,.1);border-radius:6px}[data-theme=blurred] .tree-action-btn:hover,[data-theme=blurred] .node-copy-btn:hover,[data-theme=blurred] .node-url-btn:hover{background:hsla(0,0%,100%,.1)}[data-theme=blurred] .tree-section-divider::before,[data-theme=blurred] .tree-section-divider::after{background:linear-gradient(90deg, transparent, var(--border-color), transparent)}[data-theme=blurred] .tree-section-divider .divider-label{background:hsla(0,0%,100%,.05);border-color:hsla(0,0%,100%,.1);border-radius:12px;backdrop-filter:blur(10px)}.node-badge{font-size:.6rem;padding:.1rem .35rem;border-radius:3px;text-transform:uppercase;flex-shrink:0;margin-left:auto}.node-badge.on{background:rgba(0,0,0,0);color:var(--accent-green);border:1px solid var(--accent-green)}.node-badge.dev{background:rgba(0,0,0,0);color:var(--accent-yellow);border:1px solid var(--accent-yellow)}.node-badge.hold{background:rgba(0,0,0,0);color:var(--accent-orange);border:1px solid var(--accent-orange)}.node-badge.tbd{background:rgba(0,0,0,0);color:var(--text-secondary);border:1px solid var(--border-color)}.expand-icon{font-size:.65rem;width:12px}.expand-icon.expanded{transform:rotate(90deg)}.tree-children{padding-left:1rem;display:none}.tree-children.expanded{display:block}.tree-container[data-filter=on] .tree-service[data-mode=dev],.tree-container[data-filter=on] .tree-service[data-mode=hold],.tree-container[data-filter=on] .tree-service[data-mode=tbd],.tree-container[data-filter=on] .tree-node[data-mode=dev],.tree-container[data-filter=on] .tree-node[data-mode=hold],.tree-container[data-filter=on] .tree-node[data-mode=tbd]{display:none}.tree-container[data-filter=offline] .tree-service[data-mode=dev],.tree-container[data-filter=offline] .tree-service[data-mode=hold],.tree-container[data-filter=offline] .tree-service[data-mode=tbd],.tree-container[data-filter=offline] .tree-node[data-mode=dev],.tree-container[data-filter=offline] .tree-node[data-mode=hold],.tree-container[data-filter=offline] .tree-node[data-mode=tbd]{display:none}.tree-container[data-filter=offline] .tree-service[data-mode=on]:not([data-offline=true]),.tree-container[data-filter=offline] .tree-node[data-mode=on]:not([data-offline=true]){display:none}.ssh-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.8);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;z-index:2000;animation:fadeIn .3s ease-out}.ssh-modal{background:var(--bg-card);border-radius:16px;padding:2.5rem;max-width:600px;width:90%;box-shadow:0 20px 60px rgba(0,0,0,.5);border:1px solid rgba(74,158,255,.3);animation:slideInScale .3s ease-out}.ssh-modal h3{color:var(--accent-blue);margin-bottom:1.5rem;font-size:1.5rem}.ssh-command{background:rgba(0,0,0,.3);border-radius:8px;padding:1rem;margin-bottom:1.5rem;display:flex;align-items:center;gap:1rem;border:1px solid rgba(74,158,255,.2)}.ssh-command code{flex:1;color:var(--accent-green);font-family:"Courier New",monospace;font-size:.9rem;word-break:break-all}.copy-btn{padding:.5rem 1rem;background:var(--accent-blue);color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease;white-space:nowrap}.copy-btn:hover{background:var(--accent-purple);transform:scale(1.05)}.ssh-instruction{color:var(--text-secondary);margin-bottom:1rem;font-size:1rem}.ssh-options{display:flex;gap:1rem;margin-bottom:1.5rem}.ssh-option-btn{flex:1;padding:1rem;background:linear-gradient(135deg, var(--accent-blue), var(--accent-purple));color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:1rem;transition:all .3s ease}.ssh-option-btn:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(74,158,255,.4)}.close-modal-btn{width:100%;padding:.75rem;background:hsla(0,0%,100%,.1);color:var(--text-primary);border:1px solid hsla(0,0%,100%,.2);border-radius:8px;cursor:pointer;font-weight:500;transition:all .3s ease}.close-modal-btn:hover{background:hsla(0,0%,100%,.15);border-color:hsla(0,0%,100%,.3)}.notification{position:fixed;top:20px;right:20px;background:linear-gradient(135deg, var(--accent-blue), var(--accent-purple));color:#fff;padding:1rem 1.5rem;border-radius:8px;box-shadow:0 10px 30px rgba(0,0,0,.3);z-index:1000;animation:slideIn .3s ease-out;font-weight:500}.notification.closing{animation:slideOut .3s ease-out}#monitoring-view{max-width:1400px;width:100%;margin:0 auto;padding:0 1rem}.monitoring-grid{display:flex;flex-direction:column;gap:2rem}.monitoring-section{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--border-radius);padding:1.5rem}[data-theme=blurred] .monitoring-section{backdrop-filter:blur(10px);border-radius:var(--border-radius-lg)}.monitoring-section-title{font-size:1rem;font-weight:600;color:var(--accent-primary);text-transform:uppercase;letter-spacing:1px;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid var(--border-color)}[data-theme=blurred] .monitoring-section-title{color:var(--accent-blue);text-transform:none;font-size:1.2rem}.vm-status-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:1rem}.vm-status-card{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--border-radius);padding:1rem;transition:all var(--transition-speed) ease}.vm-status-card:hover{border-color:var(--accent-blue)}[data-theme=blurred] .vm-status-card{background:hsla(0,0%,100%,.03);border-radius:12px}.vm-status-header{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem;padding-bottom:.75rem;border-bottom:1px solid var(--border-color)}.vm-icon{font-size:1.5rem}.vm-name{flex:1;font-weight:600;font-size:.9rem;text-transform:uppercase}[data-theme=blurred] .vm-name{text-transform:none;font-size:1rem}.vm-status-indicator{width:12px;height:12px;border-radius:50%;animation:pulse 2s infinite}.vm-status-indicator.online{background:var(--accent-green);box-shadow:0 0 8px var(--accent-green)}.vm-status-indicator.pending{background:var(--accent-yellow);box-shadow:0 0 8px var(--accent-yellow)}.vm-status-indicator.offline{background:var(--accent-red);box-shadow:0 0 8px var(--accent-red)}.vm-status-details{display:flex;flex-direction:column;gap:.5rem}.vm-stat{display:flex;justify-content:space-between;font-size:.8rem}.vm-stat .stat-label{color:var(--text-secondary)}.vm-stat .stat-value{color:var(--text-primary);font-family:var(--font-mono)}.service-health-grid{display:flex;flex-direction:column;gap:.5rem}.service-health-row{display:grid;grid-template-columns:1fr 1.5fr auto;gap:1rem;padding:.75rem 1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--border-radius);align-items:center;font-size:.85rem}[data-theme=blurred] .service-health-row{background:hsla(0,0%,100%,.02);border-radius:8px}.service-name{font-weight:600;text-transform:uppercase}[data-theme=blurred] .service-name{text-transform:none}.service-url{color:var(--text-secondary);font-family:var(--font-mono);font-size:.75rem}.service-status{padding:.25rem .75rem;font-size:.7rem;font-weight:600;text-transform:uppercase;border-radius:var(--border-radius)}.service-status.online{background:rgba(0,204,102,.15);color:var(--accent-green);border:1px solid var(--accent-green)}.service-status.pending{background:rgba(255,204,0,.15);color:var(--accent-yellow);border:1px solid var(--accent-yellow)}[data-theme=blurred] .service-status{border-radius:12px}#resources-view{max-width:1400px;width:100%;margin:0 auto;padding:0 1rem}.resources-summary{display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:1.5rem;margin-bottom:2rem}.summary-card{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--border-radius);padding:1.5rem}.summary-card h4{font-size:1rem;font-weight:600;color:var(--accent-primary);text-transform:uppercase;margin-bottom:1rem}[data-theme=blurred] .summary-card{backdrop-filter:blur(10px);border-radius:var(--border-radius-lg);background:linear-gradient(135deg, rgba(74, 158, 255, 0.1), rgba(139, 92, 246, 0.1))}[data-theme=blurred] .summary-card h4{color:var(--text-primary);text-transform:none}.summary-stats{display:flex;flex-direction:column;gap:.75rem}.summary-stat{display:flex;align-items:center;gap:.75rem}.summary-stat .stat-icon{font-size:1.25rem}.summary-stat .stat-label{color:var(--text-secondary);font-size:.85rem;width:80px}.summary-stat .stat-value{color:var(--accent-blue);font-family:var(--font-mono);font-weight:600}.resources-section{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--border-radius);padding:1.5rem;margin-bottom:1.5rem}[data-theme=blurred] .resources-section{backdrop-filter:blur(10px);border-radius:var(--border-radius-lg)}.resources-section-title{font-size:1rem;font-weight:600;color:var(--accent-primary);text-transform:uppercase;letter-spacing:1px;margin-bottom:1rem}[data-theme=blurred] .resources-section-title{color:var(--accent-blue);text-transform:none;font-size:1.2rem}.resources-table-container{overflow-x:auto}.resources-table{width:100%;border-collapse:collapse;font-size:.8rem}.resources-table th,.resources-table td{padding:.75rem .5rem;text-align:left;border-bottom:1px solid var(--border-color)}.resources-table th{color:var(--text-secondary);font-weight:600;text-transform:uppercase;font-size:.7rem;letter-spacing:.5px;background:var(--bg-secondary)}[data-theme=blurred] .resources-table th{background:hsla(0,0%,100%,.03);text-transform:none;font-size:.8rem}.resources-table td{font-family:var(--font-mono)}.service-row,.vm-row{background:var(--bg-card)}.service-row:hover,.vm-row:hover{background:var(--bg-card-hover)}.component-row{background:var(--bg-secondary)}.component-row td{font-size:.75rem;color:var(--text-secondary)}.component-name{padding-left:1rem;color:var(--text-secondary)}.ai-service,.ai-vm{border-left:3px solid var(--accent-purple)}.resources-category{margin-bottom:3rem}.resources-category-title{font-size:1.5rem;font-weight:700;color:var(--accent-primary);text-transform:uppercase;letter-spacing:2px;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:2px solid var(--accent-primary)}[data-theme=blurred] .resources-category-title{color:var(--accent-blue);text-transform:none;background:linear-gradient(135deg, var(--accent-blue), var(--accent-green));-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);background-clip:text;border-bottom-color:var(--accent-blue)}.ai-category .resources-category-title{color:var(--accent-purple);border-bottom-color:var(--accent-purple)}[data-theme=blurred] .ai-category .resources-category-title{background:linear-gradient(135deg, var(--accent-purple), var(--accent-blue));-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);background-clip:text;border-bottom-color:var(--accent-purple)}.ai-card{border-left:3px solid var(--accent-purple)}[data-theme=blurred] .ai-card{background:linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(74, 158, 255, 0.1))}.ai-section{border-left:3px solid var(--accent-purple)}.totals-row{background:var(--bg-secondary);font-weight:600}.totals-row td{border-top:1px solid var(--border-color);color:var(--accent-primary)}[data-theme=blurred] .totals-row{background:hsla(0,0%,100%,.03)}[data-theme=blurred] .totals-row td{color:var(--accent-blue)}.totals-row.total-final{background:var(--bg-card)}.totals-row.total-final td{border-top:2px solid var(--accent-primary);font-size:.85rem}[data-theme=blurred] .totals-row.total-final{background:rgba(74,158,255,.1)}[data-theme=blurred] .totals-row.total-final td{border-top-color:var(--accent-blue)}.health-badge{padding:.2rem .5rem;font-size:.65rem;font-weight:600;text-transform:uppercase;border-radius:var(--border-radius)}.health-badge.online{background:rgba(0,204,102,.15);color:var(--accent-green);border:1px solid var(--accent-green)}.health-badge.pending{background:rgba(255,204,0,.15);color:var(--accent-yellow);border:1px solid var(--accent-yellow)}.health-badge.offline{background:rgba(255,51,51,.15);color:var(--accent-red);border:1px solid var(--accent-red)}[data-theme=blurred] .health-badge{border-radius:10px}.status-table td{font-size:.75rem}.status-badge{padding:.2rem .5rem;font-size:.65rem;font-weight:600;text-transform:uppercase;border-radius:var(--border-radius)}.status-badge.on{background:rgba(0,204,102,.15);color:var(--accent-green);border:1px solid var(--accent-green)}.status-badge.dev{background:rgba(74,158,255,.15);color:var(--accent-blue);border:1px solid var(--accent-blue)}.status-badge.hold{background:rgba(139,92,246,.15);color:var(--accent-purple);border:1px solid var(--accent-purple)}[data-theme=blurred] .status-badge{border-radius:10px}.wake-calculator{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--border-radius);padding:1.5rem;margin-top:1rem}[data-theme=blurred] .wake-calculator{background:hsla(0,0%,100%,.03);backdrop-filter:blur(10px);border-radius:12px}.wake-calc-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:1.5rem;margin-bottom:1.5rem}.wake-calc-input{display:flex;flex-direction:column;gap:.5rem}.wake-calc-input label{font-size:.85rem;font-weight:600;color:var(--text-primary);text-transform:uppercase;letter-spacing:.5px}[data-theme=blurred] .wake-calc-input label{text-transform:none}.wake-calc-input input{padding:.75rem 1rem;background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--border-radius);color:var(--text-primary);font-family:var(--font-mono);font-size:1rem;transition:all var(--transition-speed) ease}.wake-calc-input input:focus{outline:none;border-color:var(--accent-primary);box-shadow:0 0 10px var(--glow)}[data-theme=blurred] .wake-calc-input input{background:rgba(0,0,0,.3);border-radius:8px}[data-theme=blurred] .wake-calc-input input:focus{border-color:var(--accent-blue)}.wake-calc-input .wake-calc-hint{font-size:.7rem;color:var(--text-secondary)}.wake-calc-results{display:flex;flex-direction:column;gap:.5rem;padding-top:1rem;border-top:1px solid var(--border-color)}.wake-calc-row{display:grid;grid-template-columns:1fr 1.5fr auto;gap:1rem;padding:.5rem 0;align-items:center;font-size:.85rem}.wake-calc-row .wake-calc-label{font-weight:500;color:var(--text-primary)}.wake-calc-row .wake-calc-rate{color:var(--text-secondary);font-family:var(--font-mono);font-size:.75rem}.wake-calc-row .wake-calc-value{font-family:var(--font-mono);font-weight:600;color:var(--accent-blue);text-align:right;min-width:70px}.wake-calc-row.wake-calc-total{border-top:1px solid var(--border-color);padding-top:.75rem;margin-top:.25rem}.wake-calc-row.wake-calc-total .wake-calc-label{font-weight:700;color:var(--accent-primary)}.wake-calc-row.wake-calc-total .wake-calc-value{font-size:1.1rem;color:var(--accent-green)}[data-theme=blurred] .wake-calc-row.wake-calc-total .wake-calc-label{color:var(--accent-blue)}.wake-calc-note{font-size:.75rem;color:var(--text-secondary);margin-top:1rem;padding:.75rem;background:var(--bg-card);border-radius:var(--border-radius);border-left:3px solid var(--accent-yellow)}[data-theme=blurred] .wake-calc-note{background:rgba(251,191,36,.05);border-radius:8px}
</style>
    <script>
      (function() {
        var theme = localStorage.getItem('cloud-dashboard-theme') || 'blurred';
        document.documentElement.setAttribute('data-theme', theme);
      })();
    </script>

    <style>
        .arch-tabs {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        .arch-tab {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.2rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }
        .arch-tab:hover { border-color: var(--accent-blue); color: var(--text-primary); }
        .arch-tab.active {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            border-color: transparent;
            color: #fff;
        }
        .arch-tab.disabled { opacity: 0.5; cursor: not-allowed; }
        .arch-tab svg { width: 18px; height: 18px; }
        .arch-tab-badge {
            font-size: 0.6rem;
            padding: 0.15rem 0.4rem;
            border-radius: 8px;
            text-transform: uppercase;
            font-weight: 600;
        }
        .arch-tab-badge.available { background: rgba(16, 185, 129, 0.2); color: var(--accent-green); }
        .arch-tab-badge.pending { background: rgba(251, 191, 36, 0.2); color: var(--accent-yellow); }
        [data-theme="blurred"] .arch-tab { backdrop-filter: blur(10px); border-radius: 20px; }
        
        .arch-section { display: none; }
        .arch-section.active { display: block; }
        
        .arch-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 50vh;
            color: var(--text-secondary);
            text-align: center;
            padding: 2rem;
        }
        .arch-placeholder svg { width: 80px; height: 80px; margin-bottom: 1.5rem; opacity: 0.5; }
        .arch-placeholder h2 { font-size: 1.5rem; margin-bottom: 0.5rem; color: var(--text-primary); }

        @media (max-width: 768px) {
            .arch-tabs { gap: 0.3rem; }
            .arch-tab { padding: 0.5rem 0.8rem; font-size: 0.75rem; }
            .arch-tab span:not(.arch-tab-badge) { display: none; }
        }

        /* Diagram embed container */
        .diagram-embed {
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0a0a0f 100%);
            border-radius: 16px;
            padding: 20px;
            color: #e8e8f0;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        /* SECURITY DIAGRAM STYLES */
                /* ============================================
                   ROOT VARIABLES & THEME
                   ============================================ */
                :root {
                    --bg-color: #0a0a0f;
                    --bg-gradient: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0a0a0f 100%);
                    --text-main: #e8e8f0;
                    --text-muted: #8888a0;
                    --text-dim: #555566;
        
                    /* Security Layer Colors */
                    --edge-color: #ff4757;
                    --edge-glow: rgba(255, 71, 87, 0.4);
        
                    --firewall-color: #ff6b35;
                    --firewall-glow: rgba(255, 107, 53, 0.4);
        
                    --proxy-color: #f39c12;
                    --proxy-glow: rgba(243, 156, 18, 0.4);
        
                    --auth-color: #a55eea;
                    --auth-glow: rgba(165, 94, 234, 0.4);
        
                    --network-color: #4a9eff;
                    --network-glow: rgba(74, 158, 255, 0.4);
        
                    --container-color: #00d084;
                    --container-glow: rgba(0, 208, 132, 0.4);
        
                    --vpn-color: #00cec9;
                    --vpn-glow: rgba(0, 206, 201, 0.4);
                }
        
                * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                }
        
                body {
                    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
                    background: var(--bg-gradient);
                    background-attachment: fixed;
                    color: var(--text-main);
                    min-height: 100vh;
                    padding: 20px;
                    overflow-x: hidden;
                }
        
                .main-container {
                    max-width: 1400px;
                    margin: 0 auto;
                    display: flex;
                    flex-direction: column;
                    gap: 25px;
                }
        
                /* Header */
                .diagram-header {
                    text-align: center;
                    padding: 25px;
                    background: rgba(255,255,255,0.02);
                    border-radius: 16px;
                    border: 1px solid rgba(255,255,255,0.05);
                    backdrop-filter: blur(10px);
                }
        
                .diagram-header h1 {
                    font-size: 32px;
                    font-weight: 700;
                    background: linear-gradient(90deg, var(--edge-color), var(--firewall-color), var(--proxy-color), var(--auth-color), var(--network-color), var(--container-color));
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    margin-bottom: 10px;
                }
        
                .diagram-header .subtitle {
                    color: var(--text-muted);
                    font-size: 14px;
                }
        
                .version-badge {
                    display: inline-block;
                    background: linear-gradient(135deg, var(--edge-color), var(--auth-color));
                    color: white;
                    padding: 3px 12px;
                    border-radius: 12px;
                    font-size: 11px;
                    margin-left: 10px;
                    font-weight: 600;
                }
        
                /* ============================================
                   LEGEND
                   ============================================ */
                .legend {
                    display: flex;
                    justify-content: center;
                    flex-wrap: wrap;
                    gap: 15px;
                    padding: 15px;
                    background: rgba(0,0,0,0.3);
                    border-radius: 12px;
                    border: 1px solid rgba(255,255,255,0.05);
                }
        
                .legend-item {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-size: 12px;
                    color: var(--text-muted);
                }
        
                .legend-dot {
                    width: 12px;
                    height: 12px;
                    border-radius: 50%;
                    animation: pulse-dot 2s infinite;
                }
        
                @keyframes pulse-dot {
                    0%, 100% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.6; transform: scale(0.9); }
                }
        
                /* ============================================
                   VISUAL DIAGRAM
                   ============================================ */
                .visual-diagram {
                    background: rgba(0,0,0,0.4);
                    border-radius: 20px;
                    border: 1px solid rgba(255,255,255,0.1);
                    padding: 30px;
                    position: relative;
                    overflow: hidden;
                }
        
                .visual-diagram::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background:
                        radial-gradient(circle at 20% 20%, var(--edge-glow) 0%, transparent 40%),
                        radial-gradient(circle at 80% 80%, var(--auth-glow) 0%, transparent 40%),
                        radial-gradient(circle at 50% 50%, var(--container-glow) 0%, transparent 30%);
                    opacity: 0.3;
                    pointer-events: none;
                }
        
                .diagram-title {
                    text-align: center;
                    font-size: 18px;
                    font-weight: 600;
                    margin-bottom: 25px;
                    color: var(--text-main);
                }
        
                /* ============================================
                   DEFENSE IN DEPTH - CONCENTRIC RINGS
                   ============================================ */
                .defense-rings {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    padding: 40px;
                    position: relative;
                }
        
                .ring-container {
                    position: relative;
                    width: 700px;
                    height: 700px;
                }
        
                .ring {
                    position: absolute;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    transition: all 0.3s ease;
                }
        
                .ring:hover {
                    transform: scale(1.02);
                }
        
                .ring-1 {
                    width: 700px;
                    height: 700px;
                    top: 0;
                    left: 0;
                    border: 3px solid var(--edge-color);
                    box-shadow: 0 0 40px var(--edge-glow), inset 0 0 60px var(--edge-glow);
                    background: radial-gradient(circle, transparent 60%, rgba(255, 71, 87, 0.05) 100%);
                }
        
                .ring-2 {
                    width: 580px;
                    height: 580px;
                    top: 60px;
                    left: 60px;
                    border: 3px solid var(--firewall-color);
                    box-shadow: 0 0 30px var(--firewall-glow), inset 0 0 50px var(--firewall-glow);
                    background: radial-gradient(circle, transparent 60%, rgba(255, 107, 53, 0.05) 100%);
                }
        
                .ring-3 {
                    width: 460px;
                    height: 460px;
                    top: 120px;
                    left: 120px;
                    border: 3px solid var(--proxy-color);
                    box-shadow: 0 0 25px var(--proxy-glow), inset 0 0 40px var(--proxy-glow);
                    background: radial-gradient(circle, transparent 60%, rgba(243, 156, 18, 0.05) 100%);
                }
        
                .ring-4 {
                    width: 340px;
                    height: 340px;
                    top: 180px;
                    left: 180px;
                    border: 3px solid var(--auth-color);
                    box-shadow: 0 0 20px var(--auth-glow), inset 0 0 30px var(--auth-glow);
                    background: radial-gradient(circle, transparent 60%, rgba(165, 94, 234, 0.05) 100%);
                }
        
                .ring-5 {
                    width: 220px;
                    height: 220px;
                    top: 240px;
                    left: 240px;
                    border: 3px solid var(--network-color);
                    box-shadow: 0 0 15px var(--network-glow), inset 0 0 25px var(--network-glow);
                    background: radial-gradient(circle, transparent 50%, rgba(74, 158, 255, 0.08) 100%);
                }
        
                .ring-6 {
                    width: 100px;
                    height: 100px;
                    top: 300px;
                    left: 300px;
                    border: 3px solid var(--container-color);
                    box-shadow: 0 0 20px var(--container-glow), inset 0 0 30px var(--container-glow);
                    background: radial-gradient(circle, rgba(0, 208, 132, 0.15) 0%, rgba(0, 208, 132, 0.05) 100%);
                }
        
                .ring-label {
                    position: absolute;
                    font-size: 11px;
                    font-weight: 700;
                    letter-spacing: 1px;
                    text-transform: uppercase;
                    padding: 6px 14px;
                    border-radius: 20px;
                    background: rgba(0,0,0,0.8);
                    white-space: nowrap;
                    backdrop-filter: blur(10px);
                }
        
                .ring-1 .ring-label { top: 10px; left: 50%; transform: translateX(-50%); color: var(--edge-color); border: 1px solid var(--edge-color); }
                .ring-2 .ring-label { top: 10px; left: 50%; transform: translateX(-50%); color: var(--firewall-color); border: 1px solid var(--firewall-color); }
                .ring-3 .ring-label { top: 10px; left: 50%; transform: translateX(-50%); color: var(--proxy-color); border: 1px solid var(--proxy-color); }
                .ring-4 .ring-label { top: 10px; left: 50%; transform: translateX(-50%); color: var(--auth-color); border: 1px solid var(--auth-color); }
                .ring-5 .ring-label { top: 10px; left: 50%; transform: translateX(-50%); color: var(--network-color); border: 1px solid var(--network-color); }
        
                .core-icon {
                    font-size: 40px;
                    filter: drop-shadow(0 0 15px var(--container-color));
                }
        
                /* Ring Service Icons */
                .ring-services {
                    position: absolute;
                    display: flex;
                    gap: 8px;
                }
        
                .ring-1 .ring-services { bottom: 25px; left: 50%; transform: translateX(-50%); }
                .ring-2 .ring-services { bottom: 20px; left: 50%; transform: translateX(-50%); }
                .ring-3 .ring-services { bottom: 15px; left: 50%; transform: translateX(-50%); }
                .ring-4 .ring-services { bottom: 12px; left: 50%; transform: translateX(-50%); }
                .ring-5 .ring-services { bottom: 8px; left: 50%; transform: translateX(-50%); }
        
                .service-chip {
                    font-size: 9px;
                    padding: 4px 10px;
                    border-radius: 12px;
                    background: rgba(0,0,0,0.7);
                    border: 1px solid currentColor;
                    display: flex;
                    align-items: center;
                    gap: 4px;
                }
        
                .service-chip.active {
                    background: rgba(46, 204, 113, 0.15);
                    border-color: #2ecc71;
                    color: #2ecc71;
                }
        
                /* ============================================
                   HORIZONTAL FLOW DIAGRAM
                   ============================================ */
                .flow-diagram-horizontal {
                    display: flex;
                    align-items: stretch;
                    justify-content: center;
                    gap: 0;
                    padding: 30px 10px;
                    overflow-x: auto;
                    position: relative;
                }
        
                .flow-layer {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    min-width: 140px;
                    position: relative;
                }
        
                .flow-layer-box {
                    padding: 18px 12px;
                    border-radius: 16px;
                    border: 2px solid;
                    background: rgba(0,0,0,0.5);
                    backdrop-filter: blur(10px);
                    text-align: center;
                    width: 135px;
                    transition: all 0.3s ease;
                }
        
                .flow-layer-box:hover {
                    transform: scale(1.05);
                }
        
                .flow-layer-box .fl-icon {
                    font-size: 32px;
                    margin-bottom: 8px;
                    display: block;
                }
        
                .flow-layer-box .fl-label {
                    font-size: 9px;
                    font-weight: 700;
                    letter-spacing: 1px;
                    text-transform: uppercase;
                    margin-bottom: 6px;
                    padding: 3px 8px;
                    border-radius: 4px;
                    display: inline-block;
                }
        
                .flow-layer-box .fl-name {
                    font-weight: 600;
                    font-size: 12px;
                    margin-bottom: 4px;
                }
        
                .flow-layer-box .fl-desc {
                    font-size: 9px;
                    color: var(--text-muted);
                    line-height: 1.3;
                }
        
                /* Flow Connectors */
                .flow-connector {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    width: 50px;
                    position: relative;
                }
        
                .flow-connector::before {
                    content: '';
                    position: absolute;
                    width: 35px;
                    height: 2px;
                    background: linear-gradient(90deg, var(--conn-color-start), var(--conn-color-end));
                }
        
                .flow-connector::after {
                    content: '>';
                    font-size: 16px;
                    color: var(--text-muted);
                    animation: arrow-pulse 1s infinite;
                }
        
                @keyframes arrow-pulse {
                    0%, 100% { opacity: 0.5; transform: translateX(0); }
                    50% { opacity: 1; transform: translateX(3px); }
                }
        
                .flow-connector .conn-label {
                    position: absolute;
                    top: -16px;
                    font-size: 8px;
                    color: var(--text-dim);
                    white-space: nowrap;
                }
        
                /* Flow Layer Colors */
                .fl-edge {
                    border-color: var(--edge-color);
                    box-shadow: 0 0 25px var(--edge-glow);
                }
                .fl-edge .fl-label { background: var(--edge-color); color: #fff; }
                .fl-edge .fl-name { color: var(--edge-color); }
        
                .fl-firewall {
                    border-color: var(--firewall-color);
                    box-shadow: 0 0 25px var(--firewall-glow);
                }
                .fl-firewall .fl-label { background: var(--firewall-color); color: #000; }
                .fl-firewall .fl-name { color: var(--firewall-color); }
        
                .fl-proxy {
                    border-color: var(--proxy-color);
                    box-shadow: 0 0 25px var(--proxy-glow);
                }
                .fl-proxy .fl-label { background: var(--proxy-color); color: #000; }
                .fl-proxy .fl-name { color: var(--proxy-color); }
        
                .fl-auth {
                    border-color: var(--auth-color);
                    box-shadow: 0 0 25px var(--auth-glow);
                }
                .fl-auth .fl-label { background: var(--auth-color); color: #fff; }
                .fl-auth .fl-name { color: var(--auth-color); }
        
                .fl-network {
                    border-color: var(--network-color);
                    box-shadow: 0 0 25px var(--network-glow);
                }
                .fl-network .fl-label { background: var(--network-color); color: #000; }
                .fl-network .fl-name { color: var(--network-color); }
        
                .fl-container {
                    border-color: var(--container-color);
                    box-shadow: 0 0 25px var(--container-glow);
                }
                .fl-container .fl-label { background: var(--container-color); color: #000; }
                .fl-container .fl-name { color: var(--container-color); }
        
                .fl-vpn {
                    border-color: var(--vpn-color);
                    box-shadow: 0 0 25px var(--vpn-glow);
                }
                .fl-vpn .fl-label { background: var(--vpn-color); color: #000; }
                .fl-vpn .fl-name { color: var(--vpn-color); }
        
                /* Providers Row */
                .providers-row {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 4px;
                    justify-content: center;
                    margin-top: 10px;
                    padding-top: 10px;
                    border-top: 1px solid rgba(255,255,255,0.1);
                }
        
                .provider-chip {
                    font-size: 8px;
                    padding: 2px 6px;
                    border-radius: 8px;
                    background: rgba(255,255,255,0.1);
                    color: var(--text-muted);
                    white-space: nowrap;
                }
        
                .provider-chip.active {
                    background: rgba(46, 204, 113, 0.2);
                    color: #2ecc71;
                    border: 1px solid rgba(46, 204, 113, 0.3);
                }
        
                /* ============================================
                   STACKED LAYERS DIAGRAM
                   ============================================ */
                .stacked-diagram {
                    background: rgba(0,0,0,0.3);
                    border-radius: 20px;
                    padding: 30px;
                    border: 1px solid rgba(255,255,255,0.1);
                }
        
                .stacked-title {
                    text-align: center;
                    font-size: 16px;
                    font-weight: 600;
                    margin-bottom: 25px;
                    color: var(--text-muted);
                }
        
                .stack-container {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                    max-width: 1000px;
                    margin: 0 auto;
                }
        
                .stack-layer {
                    display: flex;
                    align-items: stretch;
                    border-radius: 12px;
                    overflow: hidden;
                    transition: all 0.3s ease;
                }
        
                .stack-layer:hover {
                    transform: scale(1.02);
                }
        
                .stack-label {
                    width: 120px;
                    padding: 15px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    font-weight: 700;
                    font-size: 11px;
                    text-transform: uppercase;
                    letter-spacing: 1px;
                }
        
                .stack-label .sl-icon {
                    font-size: 24px;
                    margin-bottom: 5px;
                }
        
                .stack-content {
                    flex: 1;
                    padding: 15px 20px;
                    background: rgba(0,0,0,0.4);
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                }
        
                .stack-content .sc-title {
                    font-weight: 600;
                    font-size: 14px;
                    margin-bottom: 2px;
                }
        
                .stack-content .sc-mental {
                    font-size: 11px;
                    font-style: italic;
                    color: var(--text-muted);
                }
        
                .stack-providers {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 8px;
                    margin-top: 5px;
                }
        
                .sp-item {
                    font-size: 11px;
                    padding: 4px 10px;
                    border-radius: 6px;
                    background: rgba(255,255,255,0.08);
                    display: flex;
                    align-items: center;
                    gap: 5px;
                }
        
                .sp-item.active {
                    background: rgba(46, 204, 113, 0.15);
                    border: 1px solid rgba(46, 204, 113, 0.3);
                }
        
                /* Stack Layer Colors */
                .stack-edge .stack-label { background: var(--edge-color); color: #fff; }
                .stack-edge .sc-title { color: var(--edge-color); }
        
                .stack-firewall .stack-label { background: var(--firewall-color); color: #000; }
                .stack-firewall .sc-title { color: var(--firewall-color); }
        
                .stack-proxy .stack-label { background: var(--proxy-color); color: #000; }
                .stack-proxy .sc-title { color: var(--proxy-color); }
        
                .stack-auth .stack-label { background: var(--auth-color); color: #fff; }
                .stack-auth .sc-title { color: var(--auth-color); }
        
                .stack-network .stack-label { background: var(--network-color); color: #000; }
                .stack-network .sc-title { color: var(--network-color); }
        
                .stack-container-layer .stack-label { background: var(--container-color); color: #000; }
                .stack-container-layer .sc-title { color: var(--container-color); }
        
                .stack-vpn .stack-label { background: var(--vpn-color); color: #000; }
                .stack-vpn .sc-title { color: var(--vpn-color); }
        
                /* Stack Connectors */
                .stack-connector {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 5px 0;
                    margin-left: 60px;
                }
        
                .stack-connector .arrow-down {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 2px;
                }
        
                .stack-connector .arrow-line {
                    width: 2px;
                    height: 12px;
                    background: linear-gradient(180deg, var(--from-color), var(--to-color));
                }
        
                .stack-connector .arrow-head {
                    width: 0;
                    height: 0;
                    border-left: 5px solid transparent;
                    border-right: 5px solid transparent;
                    border-top: 7px solid var(--to-color);
                }
        
                .stack-connector .arrow-label {
                    font-size: 9px;
                    color: var(--text-dim);
                    margin-left: 10px;
                }
        
                /* ============================================
                   SECURITY SERVICES TABLE
                   ============================================ */
                .security-table {
                    width: 100%;
                    border-collapse: collapse;
                    font-size: 12px;
                    margin-top: 20px;
                }
        
                .security-table thead tr {
                    border-bottom: 2px solid rgba(255,255,255,0.1);
                }
        
                .security-table th {
                    padding: 12px;
                    text-align: left;
                    font-weight: 600;
                    color: var(--text-muted);
                }
        
                .security-table td {
                    padding: 12px;
                    border-bottom: 1px solid rgba(255,255,255,0.05);
                }
        
                .security-table .layer-badge {
                    padding: 3px 10px;
                    border-radius: 8px;
                    font-weight: 600;
                    font-size: 10px;
                    text-transform: uppercase;
                }
        
                .status-active {
                    color: #2ecc71;
                }
        
                .status-planned {
                    color: #f39c12;
                }
        
                /* ============================================
                   ATTACK FLOW DIAGRAM
                   ============================================ */
                .attack-flow {
                    background: rgba(0,0,0,0.3);
                    border-radius: 16px;
                    padding: 25px;
                    border: 1px solid rgba(255,255,255,0.1);
                }
        
                .attack-title {
                    text-align: center;
                    font-size: 16px;
                    font-weight: 600;
                    margin-bottom: 20px;
                    color: var(--text-muted);
                }
        
                .attack-scenarios {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                    gap: 20px;
                }
        
                .attack-card {
                    background: rgba(0,0,0,0.4);
                    border-radius: 12px;
                    padding: 20px;
                    border: 1px solid rgba(255,255,255,0.1);
                }
        
                .attack-card h4 {
                    font-size: 14px;
                    margin-bottom: 12px;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
        
                .attack-card .attack-icon {
                    font-size: 20px;
                }
        
                .attack-steps {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                }
        
                .attack-step {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    font-size: 11px;
                    padding: 8px 12px;
                    border-radius: 8px;
                    background: rgba(255,255,255,0.03);
                }
        
                .attack-step .step-num {
                    width: 20px;
                    height: 20px;
                    border-radius: 50%;
                    background: var(--text-dim);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 10px;
                    font-weight: 700;
                    flex-shrink: 0;
                }
        
                .attack-step.blocked {
                    border: 1px solid var(--edge-color);
                    background: rgba(255, 71, 87, 0.1);
                }
        
                .attack-step.blocked .step-num {
                    background: var(--edge-color);
                }
        
                .attack-step .block-badge {
                    margin-left: auto;
                    font-size: 9px;
                    padding: 2px 8px;
                    border-radius: 8px;
                    background: var(--edge-color);
                    color: #fff;
                    font-weight: 600;
                }
        
                /* ============================================
                   RESPONSIVE
                   ============================================ */
                @media (max-width: 900px) {
                    .flow-diagram-horizontal {
                        flex-direction: column;
                        align-items: center;
                    }
        
                    .flow-connector {
                        width: 40px;
                        height: 40px;
                        transform: rotate(90deg);
                    }
        
                    .stack-layer {
                        flex-direction: column;
                    }
        
                    .stack-label {
                        width: 100%;
                        flex-direction: row;
                        gap: 10px;
                    }
        
                    .stack-connector {
                        margin-left: 0;
                    }
        
                    .ring-container {
                        width: 350px;
                        height: 350px;
                    }
        
                    .ring-1 { width: 350px; height: 350px; }
                    .ring-2 { width: 290px; height: 290px; top: 30px; left: 30px; }
                    .ring-3 { width: 230px; height: 230px; top: 60px; left: 60px; }
                    .ring-4 { width: 170px; height: 170px; top: 90px; left: 90px; }
                    .ring-5 { width: 110px; height: 110px; top: 120px; left: 120px; }
                    .ring-6 { width: 60px; height: 60px; top: 145px; left: 145px; }
        
                    .ring-label { font-size: 8px; padding: 4px 8px; }
                    .ring-services { display: none; }
                }
        
                @media (max-width: 600px) {
                    .diagram-header h1 {
                        font-size: 22px;
                    }
        
                    .flow-layer-box {
                        width: 120px;
                        padding: 12px 8px;
                    }
        
                    .legend {
                        flex-direction: column;
                        align-items: flex-start;
                    }
        
                    .attack-scenarios {
                        grid-template-columns: 1fr;
                    }
                }
        
                /* Mobile auto-fit scaling */
                @media (max-width: 480px) {
                    body {
                        padding: 10px;
                    }
        
                    .main-container {
                        gap: 15px;
                    }
        
                    .diagram-header {
                        padding: 15px;
                    }
        
                    .diagram-header h1 {
                        font-size: 18px;
                    }
        
                    .ring-container {
                        width: 280px;
                        height: 280px;
                    }
        
                    .ring-1 { width: 280px; height: 280px; }
                    .ring-2 { width: 230px; height: 230px; top: 25px; left: 25px; }
                    .ring-3 { width: 180px; height: 180px; top: 50px; left: 50px; }
                    .ring-4 { width: 130px; height: 130px; top: 75px; left: 75px; }
                    .ring-5 { width: 80px; height: 80px; top: 100px; left: 100px; }
                    .ring-6 { width: 40px; height: 40px; top: 120px; left: 120px; }
        
                    .ring-label {
                        font-size: 6px;
                        padding: 2px 6px;
                    }
        
                    .flow-layer-box {
                        width: 100px;
                        padding: 10px 6px;
                    }
        
                    .flow-layer-box .fl-icon {
                        font-size: 24px;
                    }
        
                    .flow-layer-box .fl-name {
                        font-size: 10px;
                    }
        
                    .flow-layer-box .fl-desc {
                        font-size: 7px;
                    }
        
                    .flow-connector {
                        width: 30px;
                    }
        
                    .stack-label {
                        width: 80px;
                        padding: 10px;
                        font-size: 9px;
                    }
        
                    .stack-content {
                        padding: 10px 12px;
                    }
        
                    .stack-content .sc-title {
                        font-size: 12px;
                    }
                }
        
                /* Hide navigation when embedded in iframe */
                body.embedded .diagram-header > div[style*="display: flex"][style*="justify-content: center"] {
                    display: none !important;
                }
        
                body.embedded #nav-products,
                body.embedded #nav-c3,
                body.embedded #nav-c3-level3 {
                    display: none !important;
                }

        /* AI DIAGRAM STYLES - scoped */
        #section-ai {
                #section-ai {
                    --bg-color: #0a0a0f;
                    --bg-gradient: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0a0a0f 100%);
                    --text-main: #e8e8f0;
                    --text-muted: #8888a0;
                    --text-dim: #555566;
        
                    /* Layer Colors */
                    --orchestrator-color: #ff6d5a;
                    --orchestrator-glow: rgba(255, 109, 90, 0.4);
        
                    --brain-color: #00d084;
                    --brain-glow: rgba(0, 208, 132, 0.4);
        
                    --logic-color: #ff9f43;
                    --logic-glow: rgba(255, 159, 67, 0.4);
        
                    --memory-color: #3ecf8e;
                    --memory-glow: rgba(62, 207, 142, 0.4);
        
                    --sandbox-color: #a55eea;
                    --sandbox-glow: rgba(165, 94, 234, 0.4);
        
                    --iaas-color: #4a9eff;
                    --iaas-glow: rgba(74, 158, 255, 0.4);
                }
    </style>
</head>
<body>
    <button class="theme-toggle" id="theme-toggle" title="Switch theme">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
        </svg>
        <span class="theme-label">Blurred</span>
    </button>

    <div class="container">
        <header>
            <h1>Cloud Portal</h1>
            <p class="subtitle">Architecture Diagrams</p>
            <div class="nav-level1">
                <a href="products.html" class="nav-main-btn">Products</a>
                <a href="cloud_control.html" class="nav-main-btn">Cloud Control</a>
                <a href="architecture.html" class="nav-main-btn active">Architecture</a>
            </div>
            <div class="arch-tabs">
                <button class="arch-tab active" data-arch="security">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                    <span>Security</span>
                    <span class="arch-tab-badge available">Live</span>
                </button>
                <button class="arch-tab" data-arch="service">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8M12 17v4"/></svg>
                    <span>Service</span>
                    <span class="arch-tab-badge available">Live</span>
                </button>
                <button class="arch-tab disabled" data-arch="infra">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="2" width="20" height="8" rx="2"/><rect x="2" y="14" width="20" height="8" rx="2"/></svg>
                    <span>Infra</span>
                    <span class="arch-tab-badge pending">Soon</span>
                </button>
                <button class="arch-tab disabled" data-arch="data">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>
                    <span>Data</span>
                    <span class="arch-tab-badge pending">Soon</span>
                </button>
                <button class="arch-tab disabled" data-arch="mcps">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                    <span>MCPs</span>
                    <span class="arch-tab-badge pending">Soon</span>
                </button>
                <button class="arch-tab" data-arch="ai">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="3"/><path d="M12 2v4m0 12v4M2 12h4m12 0h4"/></svg>
                    <span>AI</span>
                    <span class="arch-tab-badge available">Live</span>
                </button>
            </div>
        </header>

        <!-- SECURITY SECTION -->
        <div class="arch-section active" id="section-security">
            <div class="diagram-embed">
    <div class="main-container">
        <!-- Header -->
        <div class="diagram-header">
            <h1>Cloud Control Center</h1>
            <p class="subtitle">Security Architecture</p>
            <!-- Level 1: Main Sections (3 buttons) -->
            <div style="display: flex; justify-content: center; gap: 0.5rem; margin: 1rem 0 0.75rem 0;">
                <button class="nav-main-btn" data-section="products" style="padding: 0.5rem 1.2rem; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; background: rgba(255,255,255,0.05); color: var(--text-muted); cursor: pointer; transition: all 0.3s ease;">Products</button>
                <button class="nav-main-btn" data-section="c3" style="padding: 0.5rem 1.2rem; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; background: rgba(255,255,255,0.05); color: var(--text-muted); cursor: pointer; transition: all 0.3s ease;">Cloud Control Center</button>
                <button class="nav-main-btn active" data-section="architecture" style="padding: 0.5rem 1.2rem; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; border-radius: 20px; background: linear-gradient(135deg, var(--auth-color), var(--container-color)); color: #000; border: none; cursor: pointer;">Architecture</button>
            </div>
            <!-- Level 2: Sub-tabs for Products -->
            <div id="nav-products" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px;">
                <a href="index.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">All</a>
                <a href="index.html?filter=terminals" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">Terminals</a>
                <a href="index.html?filter=productivity" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User Productivity</a>
                <a href="index.html?filter=security" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User Security</a>
                <a href="index.html?filter=profile" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User Profile</a>
                <a href="index.html?filter=ai" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User AIs Models</a>
            </div>
            <!-- Level 2: Sub-tabs for Cloud Control Center -->
            <div id="nav-c3" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px;">
                <button class="view-btn" data-c3-group="operation-dashs" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; font-size: 12px; cursor: pointer; color: var(--text-main); border: none;">Operation Dashs</button>
                <button class="view-btn" data-c3-group="infra-services" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; font-size: 12px; cursor: pointer; color: var(--text-main); border: none;">Infra Services Access</button>
                <button class="view-btn" data-c3-group="infra-resources" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; font-size: 12px; cursor: pointer; color: var(--text-main); border: none;">Infra Resources</button>
            </div>
            <!-- Level 3: Sub-tabs for C3 groups -->
            <div id="nav-c3-level3" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; margin-top: -0.5rem;">
                <div class="nav-level3-group" id="c3-operation-dashs" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem;">
                    <a href="cloud_dash.html#monitor" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Monitor</a>
                    <a href="cloud_dash.html#orchestrate" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Orchestrate</a>
                    <a href="cloud_dash.html#cost" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Cost</a>
                    <a href="cloud_dash.html#security" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Security</a>
                </div>
                <div class="nav-level3-group" id="c3-infra-services" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem;">
                    <a href="cloud_dash.html#infra-security" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Security</a>
                    <a href="cloud_dash.html#infra-audit" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Audit</a>
                    <a href="cloud_dash.html#infra-data" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Data & API & Cache</a>
                </div>
                <div class="nav-level3-group" id="c3-infra-resources" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem;">
                    <a href="cloud_dash.html#infra-resources" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Hosts/VMs/Services</a>
                </div>
            </div>
            <!-- Level 2: Sub-tabs for Architecture (simple links) -->
            <div id="nav-architecture" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px;">
                <span style="padding: 6px 12px; background: linear-gradient(135deg, var(--auth-color), var(--container-color)); color: #000; border-radius: 6px; font-size: 12px; font-weight: 600;">Security</span>
                <a href="arch.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">Server</a>
                <a href="ai-arch.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">AI & MCPs</a>
                <a href="data-api-arch.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">Data & API</a>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Nav toggle - Products vs C3 vs Architecture
                document.querySelectorAll('.nav-main-btn').forEach(function(btn) {
                    btn.onclick = function() {
                        var section = this.dataset.section;
                        document.querySelectorAll('.nav-main-btn').forEach(function(b) {
                            b.classList.remove('active');
                            b.style.background = 'rgba(255,255,255,0.05)';
                            b.style.color = 'var(--text-muted)';
                            b.style.border = '1px solid rgba(255,255,255,0.2)';
                        });
                        this.classList.add('active');
                        this.style.background = 'linear-gradient(135deg, var(--auth-color), var(--container-color))';
                        this.style.color = '#000';
                        this.style.border = 'none';

                        var navProducts = document.getElementById('nav-products');
                        var navC3 = document.getElementById('nav-c3');
                        var navArch = document.getElementById('nav-architecture');
                        var navC3Level3 = document.getElementById('nav-c3-level3');

                        [navProducts, navC3, navArch].forEach(function(nav) {
                            if (nav) {
                                nav.style.display = 'none';
                            }
                        });

                        // Hide Level 3 nav
                        if (navC3Level3) {
                            navC3Level3.style.display = 'none';
                            document.querySelectorAll('.nav-level3-group').forEach(function(g) {
                                g.style.display = 'none';
                            });
                        }

                        var selectedNav = document.getElementById('nav-' + section);
                        if (selectedNav) {
                            selectedNav.style.display = 'flex';
                        }

                        // Reset C3 group active states
                        document.querySelectorAll('[data-c3-group]').forEach(function(b) {
                            b.style.background = 'rgba(255,255,255,0.1)';
                        });
                    };
                });

                // C3 Level 2 group buttons - show Level 3 items
                document.querySelectorAll('[data-c3-group]').forEach(function(btn) {
                    btn.onclick = function() {
                        var group = this.dataset.c3Group;

                        // Update button styles
                        document.querySelectorAll('[data-c3-group]').forEach(function(b) {
                            b.style.background = 'rgba(255,255,255,0.1)';
                        });
                        this.style.background = 'rgba(255,255,255,0.25)';

                        // Hide all Level 3 groups
                        document.querySelectorAll('.nav-level3-group').forEach(function(g) {
                            g.style.display = 'none';
                        });

                        // Show Level 3 container and selected group
                        var level3Container = document.getElementById('nav-c3-level3');
                        var selectedGroup = document.getElementById('c3-' + group);
                        if (level3Container && selectedGroup) {
                            level3Container.style.display = 'flex';
                            selectedGroup.style.display = 'flex';
                        }
                    };
                });
            });
        </script>

        <!-- Original Security Architecture Title -->
        <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.02); border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
            <h2 style="font-size: 24px; font-weight: 700; background: linear-gradient(90deg, var(--edge-color), var(--firewall-color), var(--proxy-color), var(--auth-color), var(--network-color), var(--container-color)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px;">Security Architecture <span class="version-badge">v2.0</span></h2>
            <p class="subtitle">Defense in Depth - Triple Auth (OAuth2 + TOTP + Passkey)</p>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--edge-color);"></div>
                <span>Edge Security</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--firewall-color);"></div>
                <span>Host Firewall</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--proxy-color);"></div>
                <span>TLS/Proxy</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--auth-color);"></div>
                <span>Authentication</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--network-color);"></div>
                <span>Network Isolation</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--container-color);"></div>
                <span>Container Security</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--vpn-color);"></div>
                <span>VPN Tunnel</span>
            </div>
        </div>

        <!-- ============================================
             DEFENSE IN DEPTH - CONCENTRIC RINGS
             ============================================ -->
        <div class="visual-diagram">
            <div class="diagram-title">Defense in Depth Architecture</div>

            <div class="defense-rings">
                <div class="ring-container">
                    <!-- Layer 1: Edge -->
                    <div class="ring ring-1">
                        <span class="ring-label">Layer 1: Edge Security</span>
                        <div class="ring-services">
                            <span class="service-chip active" style="color: var(--edge-color);">OCI Security Lists</span>
                            <span class="service-chip active" style="color: var(--edge-color);">GCP Firewall</span>
                            <span class="service-chip" style="color: var(--edge-color);">Cloudflare</span>
                        </div>
                    </div>

                    <!-- Layer 2: Firewall -->
                    <div class="ring ring-2">
                        <span class="ring-label">Layer 2: Host Firewall</span>
                        <div class="ring-services">
                            <span class="service-chip active" style="color: var(--firewall-color);">UFW</span>
                            <span class="service-chip active" style="color: var(--firewall-color);">Fail2Ban</span>
                            <span class="service-chip active" style="color: var(--firewall-color);">iptables</span>
                        </div>
                    </div>

                    <!-- Layer 3: Proxy -->
                    <div class="ring ring-3">
                        <span class="ring-label">Layer 3: TLS/Proxy</span>
                        <div class="ring-services">
                            <span class="service-chip active" style="color: var(--proxy-color);">NPM</span>
                            <span class="service-chip active" style="color: var(--proxy-color);">Let's Encrypt</span>
                            <span class="service-chip active" style="color: var(--proxy-color);">HSTS</span>
                        </div>
                    </div>

                    <!-- Layer 4: Authentication -->
                    <div class="ring ring-4">
                        <span class="ring-label">Layer 4: Auth</span>
                        <div class="ring-services">
                            <span class="service-chip active" style="color: var(--auth-color);">GitHub OAuth</span>
                            <span class="service-chip active" style="color: var(--auth-color);">TOTP</span>
                            <span class="service-chip active" style="color: var(--auth-color);">Passkey</span>
                        </div>
                    </div>

                    <!-- Layer 5: Network -->
                    <div class="ring ring-5">
                        <span class="ring-label">Layer 5: Network</span>
                        <div class="ring-services">
                            <span class="service-chip active" style="color: var(--network-color);">Docker</span>
                        </div>
                    </div>

                    <!-- Core: Application -->
                    <div class="ring ring-6">
                        <span class="core-icon"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             HORIZONTAL FLOW DIAGRAM
             ============================================ -->
        <div class="visual-diagram">
            <div class="diagram-title">Request Security Flow</div>

            <div class="flow-diagram-horizontal">
                <!-- Internet -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-edge">
                        <span class="fl-icon"></span>
                        <span class="fl-label">Internet</span>
                        <div class="fl-name">Inbound Request</div>
                        <div class="fl-desc">"Untrusted Traffic"</div>
                    </div>
                </div>

                <!-- Connector -->
                <div class="flow-connector" style="--conn-color-start: var(--edge-color); --conn-color-end: var(--firewall-color);">
                    <span class="conn-label">HTTPS:443</span>
                </div>

                <!-- Cloud Firewall -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-firewall">
                        <span class="fl-icon"></span>
                        <span class="fl-label">Edge</span>
                        <div class="fl-name">Cloud Firewall</div>
                        <div class="fl-desc">"Security Lists"</div>
                        <div class="providers-row">
                            <span class="provider-chip active">OCI</span>
                            <span class="provider-chip active">GCP</span>
                        </div>
                    </div>
                </div>

                <!-- Connector -->
                <div class="flow-connector" style="--conn-color-start: var(--firewall-color); --conn-color-end: var(--proxy-color);">
                    <span class="conn-label">Allowed</span>
                </div>

                <!-- UFW + Fail2Ban -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-proxy">
                        <span class="fl-icon"></span>
                        <span class="fl-label">Host</span>
                        <div class="fl-name">UFW + Fail2Ban</div>
                        <div class="fl-desc">"Rate Limiting"</div>
                        <div class="providers-row">
                            <span class="provider-chip active">UFW</span>
                            <span class="provider-chip active">Fail2Ban</span>
                        </div>
                    </div>
                </div>

                <!-- Connector -->
                <div class="flow-connector" style="--conn-color-start: var(--proxy-color); --conn-color-end: var(--proxy-color);">
                    <span class="conn-label">Not Banned</span>
                </div>

                <!-- NPM + SSL -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-proxy">
                        <span class="fl-icon"></span>
                        <span class="fl-label">TLS</span>
                        <div class="fl-name">NGINX Proxy</div>
                        <div class="fl-desc">"SSL Termination"</div>
                        <div class="providers-row">
                            <span class="provider-chip active">NPM</span>
                            <span class="provider-chip active">Let's Encrypt</span>
                        </div>
                    </div>
                </div>

                <!-- Connector -->
                <div class="flow-connector" style="--conn-color-start: var(--proxy-color); --conn-color-end: var(--auth-color);">
                    <span class="conn-label">Forward Auth</span>
                </div>

                <!-- Triple Auth -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-auth">
                        <span class="fl-icon"></span>
                        <span class="fl-label">Triple Auth</span>
                        <div class="fl-name">OAuth2 + Authelia</div>
                        <div class="fl-desc">"Passwordless SSO"</div>
                        <div class="providers-row">
                            <span class="provider-chip active">GitHub SSO</span>
                            <span class="provider-chip active">TOTP</span>
                            <span class="provider-chip active">Passkey</span>
                        </div>
                    </div>
                </div>

                <!-- Connector -->
                <div class="flow-connector" style="--conn-color-start: var(--auth-color); --conn-color-end: var(--network-color);">
                    <span class="conn-label">Verified</span>
                </div>

                <!-- Docker Network -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-network">
                        <span class="fl-icon"></span>
                        <span class="fl-label">Isolated</span>
                        <div class="fl-name">Docker Network</div>
                        <div class="fl-desc">"No Cross-Talk"</div>
                        <div class="providers-row">
                            <span class="provider-chip active">public_net</span>
                            <span class="provider-chip active">private_net</span>
                        </div>
                    </div>
                </div>

                <!-- Connector -->
                <div class="flow-connector" style="--conn-color-start: var(--network-color); --conn-color-end: var(--container-color);">
                    <span class="conn-label">127.0.0.1</span>
                </div>

                <!-- Application -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-container">
                        <span class="fl-icon"></span>
                        <span class="fl-label">Container</span>
                        <div class="fl-name">Application</div>
                        <div class="fl-desc">"Least Privilege"</div>
                        <div class="providers-row">
                            <span class="provider-chip active">read-only</span>
                            <span class="provider-chip active">no-root</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             STACKED LAYERS DIAGRAM
             ============================================ -->
        <div class="stacked-diagram">
            <div class="stacked-title">Security Stack Overview</div>

            <div class="stack-container">
                <!-- Edge Security -->
                <div class="stack-layer stack-edge">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>Edge</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">Cloud Provider Security</div>
                        <div class="sc-mental">"First line of defense" - Block malicious traffic before it reaches VM</div>
                        <div class="stack-providers">
                            <span class="sp-item active"> Oracle Security Lists</span>
                            <span class="sp-item active"> GCP Firewall Rules</span>
                            <span class="sp-item"> Cloudflare DDoS</span>
                        </div>
                    </div>
                </div>

                <div class="stack-connector" style="--from-color: var(--edge-color); --to-color: var(--firewall-color);">
                    <div class="arrow-down">
                        <div class="arrow-line"></div>
                        <div class="arrow-head"></div>
                    </div>
                    <span class="arrow-label">Allowed ports only (22, 80, 443, 587, 993)</span>
                </div>

                <!-- Host Firewall -->
                <div class="stack-layer stack-firewall">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>Firewall</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">Host-Level Protection</div>
                        <div class="sc-mental">"Local defense" - UFW rules + brute force protection</div>
                        <div class="stack-providers">
                            <span class="sp-item active"> UFW (default deny)</span>
                            <span class="sp-item active"> Fail2Ban (SSH/Web)</span>
                            <span class="sp-item active"> iptables (Docker bypass prevention)</span>
                        </div>
                    </div>
                </div>

                <div class="stack-connector" style="--from-color: var(--firewall-color); --to-color: var(--proxy-color);">
                    <div class="arrow-down">
                        <div class="arrow-line"></div>
                        <div class="arrow-head"></div>
                    </div>
                    <span class="arrow-label">Not rate-limited or banned</span>
                </div>

                <!-- TLS/Proxy Layer -->
                <div class="stack-layer stack-proxy">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>TLS</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">TLS Termination & Reverse Proxy</div>
                        <div class="sc-mental">"Encryption gate" - HTTPS only, security headers, rate limiting</div>
                        <div class="stack-providers">
                            <span class="sp-item active"> NGINX Proxy Manager</span>
                            <span class="sp-item active"> Let's Encrypt SSL</span>
                            <span class="sp-item active"> HSTS + CSP Headers</span>
                        </div>
                    </div>
                </div>

                <div class="stack-connector" style="--from-color: var(--proxy-color); --to-color: var(--auth-color);">
                    <div class="arrow-down">
                        <div class="arrow-line"></div>
                        <div class="arrow-head"></div>
                    </div>
                    <span class="arrow-label">Forward auth to Authelia</span>
                </div>

                <!-- Authentication Layer -->
                <div class="stack-layer stack-auth">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>Auth</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">Triple Auth - Passwordless SSO</div>
                        <div class="sc-mental">"Identity verification" - GitHub OAuth (primary) + TOTP/Passkey (backup)</div>
                        <div class="stack-providers">
                            <span class="sp-item active"> OAuth2 Proxy (GitHub SSO)</span>
                            <span class="sp-item active"> Authelia TOTP (Backup)</span>
                            <span class="sp-item active"> Authelia WebAuthn/Passkey</span>
                            <span class="sp-item active"> SSH Key-Only Auth</span>
                        </div>
                    </div>
                </div>

                <div class="stack-connector" style="--from-color: var(--auth-color); --to-color: var(--vpn-color);">
                    <div class="arrow-down">
                        <div class="arrow-line"></div>
                        <div class="arrow-head"></div>
                    </div>
                    <span class="arrow-label">Cross-VM secure tunnel</span>
                </div>

                <!-- VPN Tunnel -->
                <div class="stack-layer stack-vpn">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>VPN</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">WireGuard VPN Tunnel</div>
                        <div class="sc-mental">"Private network" - Secure cross-VM communication (10.0.0.x)</div>
                        <div class="stack-providers">
                            <span class="sp-item active"> WireGuard (GCP  OCI)</span>
                            <span class="sp-item"> 10.0.0.1 (GCP)</span>
                            <span class="sp-item"> 10.0.0.2 (OCI)</span>
                        </div>
                    </div>
                </div>

                <div class="stack-connector" style="--from-color: var(--vpn-color); --to-color: var(--network-color);">
                    <div class="arrow-down">
                        <div class="arrow-line"></div>
                        <div class="arrow-head"></div>
                    </div>
                    <span class="arrow-label">Isolated Docker networks</span>
                </div>

                <!-- Network Isolation -->
                <div class="stack-layer stack-network">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>Network</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">Docker Network Isolation</div>
                        <div class="sc-mental">"Micro-segmentation" - Services can't communicate across networks</div>
                        <div class="stack-providers">
                            <span class="sp-item active"> public_net (web services)</span>
                            <span class="sp-item active"> private_net (internal)</span>
                            <span class="sp-item active"> db_bridge (databases)</span>
                            <span class="sp-item active"> mail_net (email)</span>
                        </div>
                    </div>
                </div>

                <div class="stack-connector" style="--from-color: var(--network-color); --to-color: var(--container-color);">
                    <div class="arrow-down">
                        <div class="arrow-line"></div>
                        <div class="arrow-head"></div>
                    </div>
                    <span class="arrow-label">Container hardening</span>
                </div>

                <!-- Container Security -->
                <div class="stack-layer stack-container-layer">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>Container</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">Container Security Hardening</div>
                        <div class="sc-mental">"Least privilege" - Minimal attack surface per container</div>
                        <div class="stack-providers">
                            <span class="sp-item active"> read_only: true</span>
                            <span class="sp-item active"> no-new-privileges</span>
                            <span class="sp-item active"> tmpfs for temp data</span>
                            <span class="sp-item active"> 127.0.0.1 binding only</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             ATTACK SCENARIOS
             ============================================ -->
        <div class="attack-flow">
            <div class="attack-title">Attack Mitigation Scenarios</div>

            <div class="attack-scenarios">
                <!-- Brute Force Attack -->
                <div class="attack-card">
                    <h4><span class="attack-icon"></span> SSH Brute Force Attack</h4>
                    <div class="attack-steps">
                        <div class="attack-step">
                            <span class="step-num">1</span>
                            <span>Attacker sends SSH login attempts to port 22</span>
                        </div>
                        <div class="attack-step">
                            <span class="step-num">2</span>
                            <span>Cloud firewall allows port 22 (whitelisted)</span>
                        </div>
                        <div class="attack-step">
                            <span class="step-num">3</span>
                            <span>UFW allows SSH from any IP</span>
                        </div>
                        <div class="attack-step blocked">
                            <span class="step-num">4</span>
                            <span>Fail2Ban detects 5+ failed attempts  IP banned</span>
                            <span class="block-badge">BLOCKED</span>
                        </div>
                    </div>
                </div>

                <!-- Port Scan Attack -->
                <div class="attack-card">
                    <h4><span class="attack-icon"></span> Port Scanning</h4>
                    <div class="attack-steps">
                        <div class="attack-step">
                            <span class="step-num">1</span>
                            <span>Attacker scans all ports on VM IP</span>
                        </div>
                        <div class="attack-step blocked">
                            <span class="step-num">2</span>
                            <span>Cloud firewall drops all non-whitelisted ports</span>
                            <span class="block-badge">BLOCKED</span>
                        </div>
                        <div class="attack-step" style="opacity: 0.4;">
                            <span class="step-num">3</span>
                            <span>Only 22, 80, 443, 587, 993 visible</span>
                        </div>
                    </div>
                </div>

                <!-- Docker UFW Bypass -->
                <div class="attack-card">
                    <h4><span class="attack-icon"></span> Docker UFW Bypass Attempt</h4>
                    <div class="attack-steps">
                        <div class="attack-step">
                            <span class="step-num">1</span>
                            <span>Attacker finds container port (e.g., 8080)</span>
                        </div>
                        <div class="attack-step">
                            <span class="step-num">2</span>
                            <span>Attempts direct access to VM:8080</span>
                        </div>
                        <div class="attack-step blocked">
                            <span class="step-num">3</span>
                            <span>Container bound to 127.0.0.1:8080 only</span>
                            <span class="block-badge">BLOCKED</span>
                        </div>
                    </div>
                </div>

                <!-- Unauthorized Admin Access -->
                <div class="attack-card">
                    <h4><span class="attack-icon"></span> Unauthorized Admin Access</h4>
                    <div class="attack-steps">
                        <div class="attack-step">
                            <span class="step-num">1</span>
                            <span>Attacker finds admin panel URL</span>
                        </div>
                        <div class="attack-step">
                            <span class="step-num">2</span>
                            <span>NPM forwards to OAuth2 Proxy</span>
                        </div>
                        <div class="attack-step blocked">
                            <span class="step-num">3</span>
                            <span>GitHub OAuth requires 2FA - attacker blocked</span>
                            <span class="block-badge">BLOCKED</span>
                        </div>
                        <div class="attack-step" style="opacity: 0.5;">
                            <span class="step-num">4</span>
                            <span>Backup: Authelia TOTP/Passkey also requires 2FA</span>
                        </div>
                    </div>
                </div>

                <!-- Cross-VM Access -->
                <div class="attack-card">
                    <h4><span class="attack-icon"></span> Cross-VM Service Access</h4>
                    <div class="attack-steps">
                        <div class="attack-step">
                            <span class="step-num">1</span>
                            <span>Attacker discovers internal service on OCI VM</span>
                        </div>
                        <div class="attack-step">
                            <span class="step-num">2</span>
                            <span>Attempts direct IP access from internet</span>
                        </div>
                        <div class="attack-step blocked">
                            <span class="step-num">3</span>
                            <span>Service bound to WireGuard IP (10.0.0.2) only</span>
                            <span class="block-badge">BLOCKED</span>
                        </div>
                    </div>
                </div>

                <!-- Container Escape -->
                <div class="attack-card">
                    <h4><span class="attack-icon"></span> Container Escape Attempt</h4>
                    <div class="attack-steps">
                        <div class="attack-step">
                            <span class="step-num">1</span>
                            <span>Attacker gains shell in container</span>
                        </div>
                        <div class="attack-step">
                            <span class="step-num">2</span>
                            <span>Attempts to write malicious files</span>
                        </div>
                        <div class="attack-step blocked">
                            <span class="step-num">3</span>
                            <span>Container filesystem is read-only</span>
                            <span class="block-badge">BLOCKED</span>
                        </div>
                        <div class="attack-step blocked">
                            <span class="step-num">4</span>
                            <span>no-new-privileges prevents escalation</span>
                            <span class="block-badge">BLOCKED</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             SECURITY SERVICES INVENTORY
             ============================================ -->
        <div class="stacked-diagram">
            <div class="stacked-title">Security Services Inventory</div>
            <table class="security-table">
                <thead>
                    <tr>
                        <th>Service</th>
                        <th>Layer</th>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Location</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>OCI Security Lists</td>
                        <td><span class="layer-badge" style="background: var(--edge-color); color: #fff;">Edge</span></td>
                        <td>Cloud Firewall</td>
                        <td>Ingress/egress rules at cloud level</td>
                        <td>Oracle Cloud</td>
                        <td class="status-active">Active</td>
                    </tr>
                    <tr>
                        <td>GCP Firewall Rules</td>
                        <td><span class="layer-badge" style="background: var(--edge-color); color: #fff;">Edge</span></td>
                        <td>Cloud Firewall</td>
                        <td>Network tags + firewall rules</td>
                        <td>Google Cloud</td>
                        <td class="status-active">Active</td>
                    </tr>
                    <tr>
                        <td>UFW</td>
                        <td><span class="layer-badge" style="background: var(--firewall-color); color: #000;">Firewall</span></td>
                        <td>Host Firewall</td>
                        <td>Default deny, explicit allow rules</td>
                        <td>All VMs</td>
                        <td class="status-active">Active</td>
                    </tr>
                    <tr>
                        <td>Fail2Ban</td>
                        <td><span class="layer-badge" style="background: var(--firewall-color); color: #000;">Firewall</span></td>
                        <td>IPS</td>
                        <td>Brute force protection for SSH/Web</td>
                        <td>All VMs</td>
                        <td class="status-active">Active</td>
                    </tr>
                    <tr>
                        <td>NGINX Proxy Manager</td>
                        <td><span class="layer-badge" style="background: var(--proxy-color); color: #000;">TLS</span></td>
                        <td>Reverse Proxy</td>
                        <td>TLS termination, routing, headers</td>
                        <td>GCP Micro 1</td>
                        <td class="status-active">Active</td>
                    </tr>
                    <tr>
                        <td>Let's Encrypt</td>
                        <td><span class="layer-badge" style="background: var(--proxy-color); color: #000;">TLS</span></td>
                        <td>SSL/TLS</td>
                        <td>Auto-renewed certificates</td>
                        <td>NPM Container</td>
                        <td class="status-active">Active</td>
                    </tr>
                    <tr>
                        <td>OAuth2 Proxy</td>
                        <td><span class="layer-badge" style="background: var(--auth-color); color: #fff;">Auth</span></td>
                        <td>OAuth SSO</td>
                        <td>GitHub OAuth (Primary) - 2FA via GitHub</td>
                        <td>GCP Micro 1</td>
                        <td class="status-active">Active</td>
                    </tr>
                    <tr>
                        <td>Authelia TOTP</td>
                        <td><span class="layer-badge" style="background: var(--auth-color); color: #fff;">Auth</span></td>
                        <td>2FA Backup</td>
                        <td>Time-based OTP (Backup auth method)</td>
                        <td>GCP Micro 1</td>
                        <td class="status-active">Active</td>
                    </tr>
                    <tr>
                        <td>Authelia WebAuthn</td>
                        <td><span class="layer-badge" style="background: var(--auth-color); color: #fff;">Auth</span></td>
                        <td>Passkey</td>
                        <td>FIDO2/WebAuthn passwordless auth</td>
                        <td>GCP Micro 1</td>
                        <td class="status-active">Active</td>
                    </tr>
                    <tr>
                        <td>WireGuard</td>
                        <td><span class="layer-badge" style="background: var(--vpn-color); color: #000;">VPN</span></td>
                        <td>VPN Tunnel</td>
                        <td>Secure cross-VM communication</td>
                        <td>GCP  OCI</td>
                        <td class="status-active">Active</td>
                    </tr>
                    <tr>
                        <td>Docker Networks</td>
                        <td><span class="layer-badge" style="background: var(--network-color); color: #000;">Network</span></td>
                        <td>Micro-segmentation</td>
                        <td>public_net, private_net, db_bridge</td>
                        <td>OCI Flex 1</td>
                        <td class="status-active">Active</td>
                    </tr>
                    <tr>
                        <td>SSH Key Auth</td>
                        <td><span class="layer-badge" style="background: var(--container-color); color: #000;">Container</span></td>
                        <td>Access Control</td>
                        <td>Key-only auth, no passwords</td>
                        <td>All VMs</td>
                        <td class="status-active">Active</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
            </div>
        </div>

        <!-- SERVICE SECTION -->
        <div class="arch-section" id="section-service">
            <div class="diagram-embed">

<div class="main-container">

    <!-- ============================================
         HEADER
         ============================================ -->
    <div class="diagram-header">
        <h1>Cloud Control Center</h1>
        <p class="subtitle">Server Architecture</p>
        <!-- Level 1: Main Sections (3 buttons) -->
        <div style="display: flex; justify-content: center; gap: 0.5rem; margin: 1rem 0 0.75rem 0;">
            <button class="nav-main-btn" data-section="products" style="padding: 0.5rem 1.2rem; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; background: rgba(255,255,255,0.05); color: var(--text-muted); cursor: pointer; transition: all 0.3s ease;">Products</button>
            <button class="nav-main-btn" data-section="c3" style="padding: 0.5rem 1.2rem; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; background: rgba(255,255,255,0.05); color: var(--text-muted); cursor: pointer; transition: all 0.3s ease;">Cloud Control Center</button>
            <button class="nav-main-btn active" data-section="architecture" style="padding: 0.5rem 1.2rem; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; border-radius: 20px; background: linear-gradient(135deg, var(--public-color), var(--private-color)); color: #000; border: none; cursor: pointer;">Architecture</button>
        </div>
        <!-- Level 2: Sub-tabs for Products -->
        <div id="nav-products" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px;">
            <a href="index.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">All</a>
            <a href="index.html?filter=terminals" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">Terminals</a>
            <a href="index.html?filter=productivity" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User Productivity</a>
            <a href="index.html?filter=security" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User Security</a>
            <a href="index.html?filter=profile" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User Profile</a>
            <a href="index.html?filter=ai" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User AIs Models</a>
        </div>
        <!-- Level 2: Sub-tabs for Cloud Control Center -->
        <div id="nav-c3" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px;">
            <button class="view-btn" data-c3-group="operation-dashs" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; font-size: 12px; cursor: pointer; color: var(--text-main); border: none;">Operation Dashs</button>
            <button class="view-btn" data-c3-group="infra-services" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; font-size: 12px; cursor: pointer; color: var(--text-main); border: none;">Infra Services Access</button>
            <button class="view-btn" data-c3-group="infra-resources" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; font-size: 12px; cursor: pointer; color: var(--text-main); border: none;">Infra Resources</button>
        </div>
        <!-- Level 3: Sub-tabs for C3 groups -->
        <div id="nav-c3-level3" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; margin-top: -0.5rem;">
            <div class="nav-level3-group" id="c3-operation-dashs" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem;">
                <a href="cloud_dash.html#monitor" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Monitor</a>
                <a href="cloud_dash.html#orchestrate" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Orchestrate</a>
                <a href="cloud_dash.html#cost" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Cost</a>
                <a href="cloud_dash.html#security" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Security</a>
            </div>
            <div class="nav-level3-group" id="c3-infra-services" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem;">
                <a href="cloud_dash.html#infra-security" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Security</a>
                <a href="cloud_dash.html#infra-audit" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Audit</a>
                <a href="cloud_dash.html#infra-data" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Data & API & Cache</a>
            </div>
            <div class="nav-level3-group" id="c3-infra-resources" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem;">
                <a href="cloud_dash.html#infra-resources" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Hosts/VMs/Services</a>
            </div>
        </div>
        <!-- Level 2: Sub-tabs for Architecture (Active) -->
        <div id="nav-architecture" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px;">
            <a href="security-arch.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">Security</a>
            <span style="padding: 6px 12px; background: var(--public-color); color: #000; border-radius: 6px; font-size: 12px; font-weight: 600;">Server</span>
            <a href="ai-arch.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">AI & MCPs</a>
            <a href="data-api-arch.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">Data & API</a>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Nav toggle - Products vs C3 vs Architecture (3 sections)
            document.querySelectorAll('.nav-main-btn').forEach(function(btn) {
                btn.onclick = function() {
                    var section = this.dataset.section;

                    // Remove active from all Level 1 buttons
                    document.querySelectorAll('.nav-main-btn').forEach(function(b) {
                        b.classList.remove('active');
                        b.style.background = 'rgba(255,255,255,0.05)';
                        b.style.color = 'var(--text-muted)';
                        b.style.border = '1px solid rgba(255,255,255,0.2)';
                    });
                    this.classList.add('active');
                    this.style.background = 'linear-gradient(135deg, var(--public-color), var(--private-color))';
                    this.style.color = '#000';
                    this.style.border = 'none';

                    // Hide all Level 2 navs
                    var navProducts = document.getElementById('nav-products');
                    var navC3 = document.getElementById('nav-c3');
                    var navArch = document.getElementById('nav-architecture');
                    var navC3Level3 = document.getElementById('nav-c3-level3');

                    [navProducts, navC3, navArch].forEach(function(nav) {
                        if (nav) {
                            nav.style.display = 'none';
                        }
                    });

                    // Hide Level 3 nav
                    if (navC3Level3) {
                        navC3Level3.style.display = 'none';
                        document.querySelectorAll('.nav-level3-group').forEach(function(g) {
                            g.style.display = 'none';
                        });
                    }

                    // Show selected Level 2
                    var selectedNav = document.getElementById('nav-' + section);
                    if (selectedNav) {
                        selectedNav.style.display = 'flex';
                    }

                    // Reset C3 group active states
                    document.querySelectorAll('[data-c3-group]').forEach(function(b) {
                        b.style.background = 'rgba(255,255,255,0.1)';
                    });
                };
            });

            // C3 Level 2 group buttons - show Level 3 items
            document.querySelectorAll('[data-c3-group]').forEach(function(btn) {
                btn.onclick = function() {
                    var group = this.dataset.c3Group;

                    // Update button styles
                    document.querySelectorAll('[data-c3-group]').forEach(function(b) {
                        b.style.background = 'rgba(255,255,255,0.1)';
                    });
                    this.style.background = 'rgba(255,255,255,0.25)';

                    // Hide all Level 3 groups
                    document.querySelectorAll('.nav-level3-group').forEach(function(g) {
                        g.style.display = 'none';
                    });

                    // Show Level 3 container and selected group
                    var level3Container = document.getElementById('nav-c3-level3');
                    var selectedGroup = document.getElementById('c3-' + group);
                    if (level3Container && selectedGroup) {
                        level3Container.style.display = 'flex';
                        selectedGroup.style.display = 'flex';
                    }
                };
            });
        });
    </script>

    <!-- Original Architecture Title -->
    <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.02); border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
        <h2 style="font-size: 24px; font-weight: 700; background: linear-gradient(90deg, var(--public-color), var(--private-color), var(--mail-color)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px;">Secure VPS Architecture <span class="version-badge">v2.0</span></h2>
        <p class="subtitle">Complete Infrastructure Security Diagram with Network Isolation & Data Separation</p>
    </div>

    <!-- ============================================
         SECTION 1: INTERNET CLOUD
         ============================================ -->
    <div class="internet-zone">
        <div class="cloud-icon"></div>
        <div style="font-size: 18px; font-weight: bold; margin: 10px 0;">Internet Traffic</div>

        <div class="traffic-labels">
            <div class="traffic-type">
                <span class="traffic-dot http"></span>
                <span>HTTP/HTTPS (Web)</span>
            </div>
            <div class="traffic-type">
                <span class="traffic-dot ssh"></span>
                <span>SSH (Admin)</span>
            </div>
            <div class="traffic-type">
                <span class="traffic-dot mail"></span>
                <span>SMTP/IMAP (Mail)</span>
            </div>
            <div class="traffic-type">
                <span class="traffic-dot blocked"></span>
                <span>All Other (Blocked)</span>
            </div>
        </div>

        <div class="arrow-stream">
            <span class="arrow-particle"></span>
            <span class="arrow-particle"></span>
            <span class="arrow-particle"></span>
        </div>
    </div>

    <!-- ============================================
         SECTION 2: SERVER DOORS (PORTS)
         ============================================ -->
    <div class="doors-layer">
        <div class="doors-grid">
            <!-- SSH Door -->
            <div class="door-box ssh" onclick="openModal('ssh')">
                <div class="door-status open"></div>
                <div class="door-icon"></div>
                <div class="door-port">:22</div>
                <div class="door-label">SSH (Key Only)</div>
                <div class="door-connector ssh"></div>
            </div>

            <!-- HTTP Door -->
            <div class="door-box web" onclick="openModal('http')">
                <div class="door-status open"></div>
                <div class="door-icon"></div>
                <div class="door-port">:80</div>
                <div class="door-label">HTTP  HTTPS</div>
                <div class="door-connector web"></div>
            </div>

            <!-- HTTPS Door -->
            <div class="door-box web" onclick="openModal('https')">
                <div class="door-status open"></div>
                <div class="door-icon"></div>
                <div class="door-port">:443</div>
                <div class="door-label">HTTPS (TLS)</div>
                <div class="door-connector web"></div>
            </div>

            <!-- SMTP Door -->
            <div class="door-box mail" onclick="openModal('mail')">
                <div class="door-status open"></div>
                <div class="door-icon"></div>
                <div class="door-port">:25/587</div>
                <div class="door-label">SMTP (Mail Out)</div>
                <div class="door-connector mail"></div>
            </div>

            <!-- IMAP Door -->
            <div class="door-box mail" onclick="openModal('mail')">
                <div class="door-status open"></div>
                <div class="door-icon"></div>
                <div class="door-port">:993</div>
                <div class="door-label">IMAPS (Mail In)</div>
                <div class="door-connector mail"></div>
            </div>

            <!-- Blocked Door -->
            <div class="door-box blocked">
                <div class="door-status closed"></div>
                <div class="door-icon"></div>
                <div class="door-port">:*</div>
                <div class="door-label">All Other Ports</div>
            </div>
        </div>

        <div class="security-comment">
            <strong> SECURITY:</strong> Only these 6 ports are exposed. All others are DROP by default.
            Direct access to :8080 (Matomo), :3306 (MySQL), :27017 (MongoDB) is <strong>BLOCKED</strong> from internet.
        </div>
    </div>

    <!-- ============================================
         SECTION 3: FIREWALL (UFW)
         ============================================ -->
    <div class="firewall-layer">
        <div class="firewall-title">
            <span class="icon"></span>
            <span>UFW FIREWALL</span>
        </div>

        <div class="firewall-stats">
            <div class="firewall-stat">
                <div class="value">6</div>
                <div class="label">Ports Open</div>
            </div>
            <div class="firewall-stat">
                <div class="value">65529</div>
                <div class="label">Ports Blocked</div>
            </div>
            <div class="firewall-stat">
                <div class="value">DROP</div>
                <div class="label">Default Policy</div>
            </div>
        </div>

        <button class="info-btn" onclick="openModal('firewall')">i</button>
    </div>

    <div class="arrow-stream" style="height: 30px;">
        <span class="arrow-particle" style="color: var(--success-color);"></span>
        <span class="arrow-particle" style="color: var(--success-color);"></span>
        <span class="arrow-particle" style="color: var(--success-color);"></span>
    </div>

    <!-- ============================================
         SECTION 4: VPS SERVER BOX
         ============================================ -->
    <div class="vps-box">
        <div class="vps-label">
            <span> VPS SERVER</span>
            <span class="ip">130.110.251.193</span>
            <button class="info-btn" onclick="openModal('server')">i</button>
        </div>

        <!-- Hardware Specs -->
        <div class="hardware-specs">
            <div class="hw-spec provider">
                <span class="icon"></span>
                <span class="label">Provider:</span>
                <span class="value">Oracle Cloud</span>
            </div>
            <div class="hw-spec arch">
                <span class="icon"></span>
                <span class="label">Arch:</span>
                <span class="value">x86 AMD EPYC</span>
            </div>
            <div class="hw-spec cpu">
                <span class="icon"></span>
                <span class="label">CPU:</span>
                <span class="value">1 OCPU (1/8 core)</span>
            </div>
            <div class="hw-spec ram">
                <span class="icon"></span>
                <span class="label">RAM:</span>
                <span class="value">1 GB</span>
            </div>
            <div class="hw-spec storage">
                <span class="icon"></span>
                <span class="label">Storage:</span>
                <span class="value">47 GB</span>
            </div>
        </div>

        <!-- SSH Direct Path -->
        <div class="ssh-direct-path">
            <div class="ssh-line"></div>
            <div class="ssh-badge">DIRECT SSH</div>
            <div class="ssh-target">
                <div class="icon"></div>
                <div>Ubuntu 24.04</div>
                <div style="color: var(--ssh-color);">Host OS</div>
            </div>
        </div>

        <!-- ============================================
             NGINX REVERSE PROXY
             ============================================ -->
        <div class="nginx-layer">
            <div class="nginx-header">
                <div class="nginx-title">
                    <span class="icon"></span>
                    <span>NGINX Reverse Proxy</span>
                </div>
                <button class="info-btn" onclick="openModal('nginx')">i</button>
            </div>

            <div class="nginx-routes">
                <div class="route-box">
                    <span class="domain">diegonmarcos.com</span>
                    <span class="arrow"></span>
                    <span class="target">127.0.0.1:8081</span>
                </div>
                <div class="route-box">
                    <span class="domain">analytics.*.com</span>
                    <span class="arrow"></span>
                    <span class="target">127.0.0.1:8080</span>
                </div>
                <div class="route-box">
                    <span class="domain">cloud.*.com</span>
                    <span class="arrow"></span>
                    <span class="target">127.0.0.1:8082</span>
                </div>
                <div class="route-box">
                    <span class="domain">mail.*.com</span>
                    <span class="arrow"></span>
                    <span class="target">127.0.0.1:8025</span>
                </div>
            </div>

            <div class="nginx-flow-arrows">
                <div class="flow-arrow public">
                    <div class="line"></div>
                    <span class="label">Public</span>
                </div>
                <div class="flow-arrow public">
                    <div class="line"></div>
                    <span class="label">Analytics</span>
                </div>
                <div class="flow-arrow private">
                    <div class="line"></div>
                    <span class="label">Private</span>
                </div>
                <div class="flow-arrow mail">
                    <div class="line"></div>
                    <span class="label">Mail</span>
                </div>
            </div>
        </div>

        <!-- ============================================
             DOCKER ENVIRONMENT
             ============================================ -->
        <div class="docker-env">
            <div class="docker-label">
                <span class="whale"></span>
                <span>DOCKER COMPOSE</span>
            </div>

            <div class="network-zones">
                <!-- PUBLIC ZONE -->
                <div class="zone-column public">
                    <div class="zone-header">
                        <div class="zone-title"> Public Zone</div>
                        <div class="zone-network">network: public_net</div>
                    </div>

                    <div class="container-box public">
                        <div class="container-header">
                            <span class="container-name"><span class="icon"></span> Web Server</span>
                            <span class="container-port">:8081</span>
                        </div>
                        <div class="container-desc">Static website hosting (GitHub Pages replacement)</div>
                        <div class="container-tech">
                            <span class="tech-tag">nginx:alpine</span>
                            <span class="tech-tag">read-only</span>
                        </div>
                    </div>

                    <div class="connector"></div>

                    <div class="container-box public">
                        <div class="container-header">
                            <span class="container-name"><span class="icon"></span> Matomo</span>
                            <span class="container-port">:8080</span>
                        </div>
                        <div class="container-desc">Privacy-focused analytics platform</div>
                        <div class="container-tech">
                            <span class="tech-tag">matomo:fpm</span>
                            <span class="tech-tag">PHP 8.4</span>
                        </div>
                    </div>

                    <div class="connector"></div>

                    <div class="container-box db-sql">
                        <div class="container-header">
                            <span class="container-name"><span class="icon"></span> Matomo DB</span>
                            <span class="db-type sql">SQL</span>
                        </div>
                        <div class="container-desc">Analytics data storage</div>
                        <div class="container-tech">
                            <span class="tech-tag">MariaDB 11.4</span>
                            <span class="tech-tag">InnoDB</span>
                        </div>
                    </div>
                </div>

                <!-- PRIVATE ZONE -->
                <div class="zone-column private">
                    <div class="zone-header">
                        <div class="zone-title"> Private Zone</div>
                        <div class="zone-network">network: private_net (internal)</div>
                    </div>

                    <div class="container-box private">
                        <div class="container-header">
                            <span class="container-name"><span class="icon"></span> NextCloud</span>
                            <span class="container-port">:8082</span>
                        </div>
                        <div class="container-desc">Private file sync & storage</div>
                        <div class="container-tech">
                            <span class="tech-tag">nextcloud:fpm</span>
                            <span class="tech-tag">auth-only</span>
                        </div>
                    </div>

                    <div class="connector"></div>

                    <div class="container-box db-sql">
                        <div class="container-header">
                            <span class="container-name"><span class="icon"></span> NextCloud DB</span>
                            <span class="db-type sql">SQL</span>
                        </div>
                        <div class="container-desc">User data & metadata</div>
                        <div class="container-tech">
                            <span class="tech-tag">PostgreSQL 16</span>
                            <span class="tech-tag">Encrypted</span>
                        </div>
                    </div>

                    <div class="connector"></div>

                    <div class="container-box db-nosql">
                        <div class="container-header">
                            <span class="container-name"><span class="icon"></span> Cache/Search</span>
                            <span class="db-type nosql">NoSQL</span>
                        </div>
                        <div class="container-desc">Redis cache + search index</div>
                        <div class="container-tech">
                            <span class="tech-tag">Redis 7</span>
                            <span class="tech-tag">memory-only</span>
                        </div>
                    </div>
                </div>

                <!-- MAIL ZONE -->
                <div class="zone-column mail">
                    <div class="zone-header">
                        <div class="zone-title"> Mail Zone</div>
                        <div class="zone-network">network: mail_net (isolated)</div>
                    </div>

                    <div class="container-box mail">
                        <div class="container-header">
                            <span class="container-name"><span class="icon"></span> Mail Server</span>
                            <span class="container-port">:25/587/993</span>
                        </div>
                        <div class="container-desc">Postfix + Dovecot mail stack</div>
                        <div class="container-tech">
                            <span class="tech-tag">Mailu</span>
                            <span class="tech-tag">DKIM</span>
                            <span class="tech-tag">SPF</span>
                        </div>
                    </div>

                    <div class="connector"></div>

                    <div class="container-box db-sql">
                        <div class="container-header">
                            <span class="container-name"><span class="icon"></span> Mail DB</span>
                            <span class="db-type sql">SQL</span>
                        </div>
                        <div class="container-desc">User accounts & aliases</div>
                        <div class="container-tech">
                            <span class="tech-tag">SQLite</span>
                            <span class="tech-tag">Lightweight</span>
                        </div>
                    </div>

                    <div class="connector"></div>

                    <div class="container-box db-nosql">
                        <div class="container-header">
                            <span class="container-name"><span class="icon"></span> Mailboxes</span>
                            <span class="db-type nosql">Files</span>
                        </div>
                        <div class="container-desc">Maildir format storage</div>
                        <div class="container-tech">
                            <span class="tech-tag">Maildir++</span>
                            <span class="tech-tag">Encrypted</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             DOCKER NETWORKS
             ============================================ -->
        <div class="networks-layer">
            <div class="networks-label"> DOCKER NETWORKS (Isolated)</div>

            <div class="networks-grid">
                <div class="network-badge public-net">
                    <span class="network-icon"></span>
                    <div>
                        <div class="network-name">public_net</div>
                        <div class="network-members">web, matomo, matomo-db</div>
                    </div>
                </div>

                <div class="network-badge private-net">
                    <span class="network-icon"></span>
                    <div>
                        <div class="network-name">private_net</div>
                        <div class="network-members">nextcloud, nc-db, redis</div>
                    </div>
                    <div class="network-isolation" title="Internal Only"></div>
                </div>

                <div class="network-badge mail-net">
                    <span class="network-icon"></span>
                    <div>
                        <div class="network-name">mail_net</div>
                        <div class="network-members">mailu-front, mailu-admin, mailu-imap</div>
                    </div>
                    <div class="network-isolation" title="Isolated"></div>
                </div>

                <div class="network-badge db-net">
                    <span class="network-icon"></span>
                    <div>
                        <div class="network-name">db_bridge</div>
                        <div class="network-members">backup-agent only</div>
                    </div>
                </div>
            </div>

            <div class="security-comment" style="margin-top: 15px;">
                <strong> NETWORK ISOLATION:</strong> Containers in <code>private_net</code> cannot reach <code>public_net</code> and vice versa.
                A compromised Matomo container <strong>CANNOT</strong> access NextCloud or Mail data.
            </div>
        </div>

        <!-- ============================================
             HOST STORAGE LAYER (Physical Disks)
             ============================================ -->
        <div class="storage-wrapper">
            <div class="storage-label"> HOST STORAGE LAYER (Physical Disks)</div>

            <div class="storage-partitions">
                <div class="partition-box system">
                    <div class="partition-icon"></div>
                    <div class="partition-name">/ <span style="color:#888;font-size:10px">(47GB)</span></div>
                    <div class="partition-desc">Boot Volume - System & Configs</div>
                    <div class="partition-security">
                        <span class="security-tag restricted">root only</span>
                    </div>
                </div>

                <div class="partition-box public">
                    <div class="partition-icon"></div>
                    <div class="partition-name">/mnt/public <span style="color:#888;font-size:10px">(50GB)</span></div>
                    <div class="partition-desc">Block Vol 1 - Matomo DB + Logs</div>
                    <div class="partition-security">
                        <span class="security-tag readonly">quota limited</span>
                    </div>
                </div>

                <div class="partition-box private">
                    <div class="partition-icon"></div>
                    <div class="partition-name">/mnt/private <span style="color:#888;font-size:10px">(50GB)</span></div>
                    <div class="partition-desc">Block Vol 2 - NextCloud Files + DB</div>
                    <div class="partition-security">
                        <span class="security-tag encrypted">LUKS encrypted</span>
                    </div>
                </div>

                <div class="partition-box mail">
                    <div class="partition-icon"></div>
                    <div class="partition-name">/mnt/mail <span style="color:#888;font-size:10px">(50GB)</span></div>
                    <div class="partition-desc">Block Vol 3 - Mailboxes + Certs</div>
                    <div class="partition-security">
                        <span class="security-tag encrypted">LUKS encrypted</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             NETWORK + VOLUME ISOLATION (Integrated)
             ============================================ -->
        <div class="isolation-integrated">
            <div class="isolation-bar">
                <span> DOCKER NETWORK + VOLUME ISOLATION</span>
                <button class="info-btn" onclick="openModal('isolation')">i</button>
            </div>

            <!-- SVG Isolation Diagram - Integrated -->
            <div class="isolation-svg-container">
                <svg class="isolation-svg" viewBox="0 0 900 420" preserveAspectRatio="xMidYMid meet">
                    <defs>
                        <!-- Gradients -->
                        <linearGradient id="publicGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#2ecc71;stop-opacity:0.3"/>
                            <stop offset="100%" style="stop-color:#2ecc71;stop-opacity:0.05"/>
                        </linearGradient>
                        <linearGradient id="privateGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#3498db;stop-opacity:0.3"/>
                            <stop offset="100%" style="stop-color:#3498db;stop-opacity:0.05"/>
                        </linearGradient>
                        <linearGradient id="mailGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:0.3"/>
                            <stop offset="100%" style="stop-color:#9b59b6;stop-opacity:0.05"/>
                        </linearGradient>

                        <!-- Glow filters -->
                        <filter id="glow-public">
                            <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                            <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                        </filter>
                        <filter id="glow-private">
                            <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                            <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                        </filter>
                        <filter id="glow-mail">
                            <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                            <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                        </filter>

                        <!-- Arrow marker -->
                        <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <path d="M0,0 L0,6 L9,3 z" fill="#2ecc71"/>
                        </marker>
                        <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <path d="M0,0 L0,6 L9,3 z" fill="#3498db"/>
                        </marker>
                        <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <path d="M0,0 L0,6 L9,3 z" fill="#9b59b6"/>
                        </marker>
                    </defs>

                    <!-- ========== PUBLIC ZONE ========== -->
                    <g class="zone-group public-zone-svg">
                        <!-- Zone background -->
                        <rect x="30" y="20" width="250" height="300" rx="15" fill="url(#publicGrad)" stroke="#2ecc71" stroke-width="2" filter="url(#glow-public)"/>

                        <!-- Zone header -->
                        <rect x="30" y="20" width="250" height="40" rx="15" fill="#2ecc71" fill-opacity="0.2"/>
                        <text x="155" y="47" text-anchor="middle" fill="#2ecc71" font-size="14" font-weight="bold"> PUBLIC NETWORK</text>

                        <!-- Network name -->
                        <text x="155" y="70" text-anchor="middle" fill="#888" font-size="10" font-family="monospace">public_net (172.20.0.0/24)</text>

                        <!-- Containers -->
                        <rect x="55" y="85" width="200" height="35" rx="6" fill="#1a1a2e" stroke="#2ecc71" stroke-width="1"/>
                        <text x="165" y="107" text-anchor="middle" fill="#fff" font-size="11"> Matomo (analytics)</text>

                        <rect x="55" y="130" width="200" height="35" rx="6" fill="#1a1a2e" stroke="#2ecc71" stroke-width="1"/>
                        <text x="165" y="152" text-anchor="middle" fill="#fff" font-size="11"> Web Server (static)</text>

                        <rect x="55" y="175" width="200" height="35" rx="6" fill="#1a1a2e" stroke="#f1c40f" stroke-width="1"/>
                        <text x="165" y="197" text-anchor="middle" fill="#fff" font-size="11"> MariaDB (SQL)</text>

                        <!-- Volume connection -->
                        <line x1="155" y1="220" x2="155" y2="270" stroke="#2ecc71" stroke-width="3" stroke-dasharray="5,3">
                            <animate attributeName="stroke-dashoffset" from="0" to="-16" dur="1s" repeatCount="indefinite"/>
                        </line>
                        <text x="175" y="245" fill="#2ecc71" font-size="9" font-weight="bold">MOUNT</text>

                        <!-- Volume -->
                        <rect x="80" y="275" width="150" height="35" rx="6" fill="#0a0a0f" stroke="#2ecc71" stroke-width="2" stroke-dasharray="4,2"/>
                        <text x="155" y="297" text-anchor="middle" fill="#2ecc71" font-size="11" font-family="monospace"> /mnt/public</text>
                    </g>

                    <!-- ========== PRIVATE ZONE ========== -->
                    <g class="zone-group private-zone-svg">
                        <!-- Zone background -->
                        <rect x="325" y="20" width="250" height="300" rx="15" fill="url(#privateGrad)" stroke="#3498db" stroke-width="2" filter="url(#glow-private)"/>

                        <!-- Zone header -->
                        <rect x="325" y="20" width="250" height="40" rx="15" fill="#3498db" fill-opacity="0.2"/>
                        <text x="450" y="47" text-anchor="middle" fill="#3498db" font-size="14" font-weight="bold"> PRIVATE NETWORK</text>

                        <!-- Network name -->
                        <text x="450" y="70" text-anchor="middle" fill="#888" font-size="10" font-family="monospace">private_net (172.21.0.0/24) internal</text>

                        <!-- Containers -->
                        <rect x="350" y="85" width="200" height="35" rx="6" fill="#1a1a2e" stroke="#3498db" stroke-width="1"/>
                        <text x="460" y="107" text-anchor="middle" fill="#fff" font-size="11"> NextCloud (files)</text>

                        <rect x="350" y="130" width="200" height="35" rx="6" fill="#1a1a2e" stroke="#f1c40f" stroke-width="1"/>
                        <text x="460" y="152" text-anchor="middle" fill="#fff" font-size="11"> PostgreSQL (SQL)</text>

                        <rect x="350" y="175" width="200" height="35" rx="6" fill="#1a1a2e" stroke="#1abc9c" stroke-width="1"/>
                        <text x="460" y="197" text-anchor="middle" fill="#fff" font-size="11"> Redis (NoSQL cache)</text>

                        <!-- Volume connection -->
                        <line x1="450" y1="220" x2="450" y2="270" stroke="#3498db" stroke-width="3" stroke-dasharray="5,3">
                            <animate attributeName="stroke-dashoffset" from="0" to="-16" dur="1s" repeatCount="indefinite"/>
                        </line>
                        <text x="470" y="245" fill="#3498db" font-size="9" font-weight="bold">MOUNT</text>

                        <!-- Volume -->
                        <rect x="375" y="275" width="150" height="35" rx="6" fill="#0a0a0f" stroke="#27ae60" stroke-width="2"/>
                        <text x="450" y="293" text-anchor="middle" fill="#27ae60" font-size="11" font-family="monospace"> /mnt/private</text>
                        <text x="450" y="305" text-anchor="middle" fill="#27ae60" font-size="8">LUKS ENCRYPTED</text>
                    </g>

                    <!-- ========== MAIL ZONE ========== -->
                    <g class="zone-group mail-zone-svg">
                        <!-- Zone background -->
                        <rect x="620" y="20" width="250" height="300" rx="15" fill="url(#mailGrad)" stroke="#9b59b6" stroke-width="2" filter="url(#glow-mail)"/>

                        <!-- Zone header -->
                        <rect x="620" y="20" width="250" height="40" rx="15" fill="#9b59b6" fill-opacity="0.2"/>
                        <text x="745" y="47" text-anchor="middle" fill="#9b59b6" font-size="14" font-weight="bold"> MAIL NETWORK</text>

                        <!-- Network name -->
                        <text x="745" y="70" text-anchor="middle" fill="#888" font-size="10" font-family="monospace">mail_net (172.22.0.0/24) isolated</text>

                        <!-- Containers -->
                        <rect x="645" y="85" width="200" height="35" rx="6" fill="#1a1a2e" stroke="#9b59b6" stroke-width="1"/>
                        <text x="755" y="107" text-anchor="middle" fill="#fff" font-size="11"> Postfix (SMTP)</text>

                        <rect x="645" y="130" width="200" height="35" rx="6" fill="#1a1a2e" stroke="#9b59b6" stroke-width="1"/>
                        <text x="755" y="152" text-anchor="middle" fill="#fff" font-size="11"> Dovecot (IMAP)</text>

                        <rect x="645" y="175" width="200" height="35" rx="6" fill="#1a1a2e" stroke="#1abc9c" stroke-width="1"/>
                        <text x="755" y="197" text-anchor="middle" fill="#fff" font-size="11"> Maildir (storage)</text>

                        <!-- Volume connection -->
                        <line x1="745" y1="220" x2="745" y2="270" stroke="#9b59b6" stroke-width="3" stroke-dasharray="5,3">
                            <animate attributeName="stroke-dashoffset" from="0" to="-16" dur="1s" repeatCount="indefinite"/>
                        </line>
                        <text x="765" y="245" fill="#9b59b6" font-size="9" font-weight="bold">MOUNT</text>

                        <!-- Volume -->
                        <rect x="670" y="275" width="150" height="35" rx="6" fill="#0a0a0f" stroke="#27ae60" stroke-width="2"/>
                        <text x="745" y="293" text-anchor="middle" fill="#27ae60" font-size="11" font-family="monospace"> /mnt/mail</text>
                        <text x="745" y="305" text-anchor="middle" fill="#27ae60" font-size="8">LUKS ENCRYPTED</text>
                    </g>

                    <!-- ========== BLOCKED CONNECTIONS ========== -->
                    <!-- Public trying to access Private -->
                    <g class="blocked-connection">
                        <path d="M 280 150 Q 302 150 302 150" stroke="#e74c3c" stroke-width="2" stroke-dasharray="4,4" fill="none" opacity="0.6">
                            <animate attributeName="stroke-dashoffset" from="0" to="-16" dur="0.5s" repeatCount="indefinite"/>
                        </path>
                        <circle cx="302" cy="150" r="12" fill="#e74c3c">
                            <animate attributeName="r" values="12;14;12" dur="1s" repeatCount="indefinite"/>
                        </circle>
                        <text x="302" y="154" text-anchor="middle" fill="white" font-size="12" font-weight="bold"></text>
                    </g>

                    <!-- Private trying to access Public -->
                    <g class="blocked-connection">
                        <path d="M 325 180 Q 302 180 302 180" stroke="#e74c3c" stroke-width="2" stroke-dasharray="4,4" fill="none" opacity="0.6">
                            <animate attributeName="stroke-dashoffset" from="0" to="16" dur="0.5s" repeatCount="indefinite"/>
                        </path>
                        <circle cx="302" cy="180" r="12" fill="#e74c3c">
                            <animate attributeName="r" values="12;14;12" dur="1s" repeatCount="indefinite"/>
                        </circle>
                        <text x="302" y="184" text-anchor="middle" fill="white" font-size="12" font-weight="bold"></text>
                    </g>

                    <!-- Private trying to access Mail -->
                    <g class="blocked-connection">
                        <path d="M 575 150 Q 597 150 597 150" stroke="#e74c3c" stroke-width="2" stroke-dasharray="4,4" fill="none" opacity="0.6">
                            <animate attributeName="stroke-dashoffset" from="0" to="-16" dur="0.5s" repeatCount="indefinite"/>
                        </path>
                        <circle cx="597" cy="150" r="12" fill="#e74c3c">
                            <animate attributeName="r" values="12;14;12" dur="1s" repeatCount="indefinite"/>
                        </circle>
                        <text x="597" y="154" text-anchor="middle" fill="white" font-size="12" font-weight="bold"></text>
                    </g>

                    <!-- Mail trying to access Private -->
                    <g class="blocked-connection">
                        <path d="M 620 180 Q 597 180 597 180" stroke="#e74c3c" stroke-width="2" stroke-dasharray="4,4" fill="none" opacity="0.6">
                            <animate attributeName="stroke-dashoffset" from="0" to="16" dur="0.5s" repeatCount="indefinite"/>
                        </path>
                        <circle cx="597" cy="180" r="12" fill="#e74c3c">
                            <animate attributeName="r" values="12;14;12" dur="1s" repeatCount="indefinite"/>
                        </circle>
                        <text x="597" y="184" text-anchor="middle" fill="white" font-size="12" font-weight="bold"></text>
                    </g>

                    <!-- ========== ISOLATION LABELS ========== -->
                    <text x="302" y="130" text-anchor="middle" fill="#e74c3c" font-size="9" font-weight="bold">NO ROUTE</text>
                    <text x="597" y="130" text-anchor="middle" fill="#e74c3c" font-size="9" font-weight="bold">NO ROUTE</text>

                    <!-- ========== CLICKABLE INFO BUTTONS ========== -->
                    <!-- Networks info -->
                    <g class="svg-info-btn" onclick="openModal('networks')" style="cursor:pointer">
                        <circle cx="302" cy="200" r="10" fill="#3498db"/>
                        <text x="302" y="204" text-anchor="middle" fill="white" font-size="11" font-weight="bold">?</text>
                    </g>
                    <g class="svg-info-btn" onclick="openModal('networks')" style="cursor:pointer">
                        <circle cx="597" cy="200" r="10" fill="#3498db"/>
                        <text x="597" y="204" text-anchor="middle" fill="white" font-size="11" font-weight="bold">?</text>
                    </g>

                    <!-- Attack scenario button -->
                    <g class="svg-info-btn" onclick="openModal('attack')" style="cursor:pointer">
                        <rect x="350" y="335" width="200" height="30" rx="6" fill="#e74c3c"/>
                        <text x="450" y="355" text-anchor="middle" fill="white" font-size="11" font-weight="bold"> View Attack Scenario</text>
                    </g>

                    <!-- How it works button -->
                    <g class="svg-info-btn" onclick="openModal('howitworks')" style="cursor:pointer">
                        <rect x="350" y="375" width="200" height="30" rx="6" fill="#3498db"/>
                        <text x="450" y="395" text-anchor="middle" fill="white" font-size="11" font-weight="bold"> How Isolation Works</text>
                    </g>
                </svg>
            </div>
        </div>

    </div><!-- End VPS Box -->

    <!-- ============================================
         LEGEND
         ============================================ -->
    <div class="legend">
        <div class="legend-title"> LEGEND</div>
        <div class="legend-grid">
            <div class="legend-item">
                <div class="legend-color public"></div>
                <span>Public Zone (Internet Accessible)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color private"></div>
                <span>Private Zone (Auth Required)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color mail"></div>
                <span>Mail Zone (Email Services)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color ssh"></div>
                <span>SSH (Admin Access Only)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color nginx"></div>
                <span>NGINX (Reverse Proxy)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color firewall"></div>
                <span>Firewall (UFW/iptables)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color sql"></div>
                <span>SQL Database (MariaDB/PostgreSQL)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color nosql"></div>
                <span>NoSQL/Cache (Redis/Files)</span>
            </div>
        </div>
    </div>

    <!-- ============================================
         FOOTER ACTIONS
         ============================================ -->
    <div class="footer-actions">
        <button class="action-btn primary" onclick="openModal('checklist')">
             Implementation Checklist
        </button>
        <button class="action-btn secondary" onclick="openModal('security')">
             Security Best Practices
        </button>
        <button class="action-btn secondary" onclick="openModal('databases')">
             Database Strategy
        </button>
    </div>

</div><!-- End Main Container -->

<!-- ============================================
     MODAL
     ============================================ -->
<div id="modal" class="modal-overlay" onclick="if(event.target===this)closeModal()">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title" id="modal-title">Title</div>
            <button class="modal-close" onclick="closeModal()"></button>
        </div>
        <div class="modal-body" id="modal-body">Content</div>
    </div>
</div>

<script>
    // Modal Content Database
    const modalContent = {
        isolation: {
            title: ' Docker Network + Volume Isolation',
            body: `
                <h4>The Core Security Concept</h4>
                <p>Docker creates <strong>completely isolated environments</strong> called networks. Containers on different networks cannot communicate with each other - there is literally no network route between them.</p>

                <h4>How Volume Isolation Works</h4>
                <p>Each container can <strong>ONLY</strong> access volumes that are explicitly mounted to it in the docker-compose.yml file.</p>

                <div class="warning-box">
                    <strong>Key Point:</strong> A container in <code>public_net</code> has NO filesystem path to <code>/mnt/private</code>.
                    The volume simply doesn't exist from that container's perspective!
                </div>

                <h4>Technical Implementation</h4>
                <pre style="background:#111;padding:10px;border-radius:4px;overflow-x:auto;font-size:11px;"><code># docker-compose.yml

networks:
  public_net:
    driver: bridge
  private_net:
    driver: bridge
    internal: true  # No external access!

services:
  matomo:
    networks: [public_net]  # ONLY public_net
    volumes:
      - /mnt/public:/data   # ONLY /mnt/public

  nextcloud:
    networks: [private_net]  # ONLY private_net
    volumes:
      - /mnt/private:/data   # ONLY /mnt/private</code></pre>

                <h4>Why This Matters</h4>
                <ul>
                    <li><strong>Network Isolation:</strong> Matomo cannot ping NextCloud (no route)</li>
                    <li><strong>Volume Isolation:</strong> Matomo cannot read /mnt/private (not mounted)</li>
                    <li><strong>Blast Radius:</strong> Hacked Matomo = only analytics data at risk</li>
                </ul>

                <div class="tip-box">
                    <strong> Verification:</strong><br>
                    <code>docker exec matomo ping nextcloud</code>  Network unreachable<br>
                    <code>docker exec matomo ls /mnt/private</code>  No such file or directory
                </div>
            `
        },
        ssh: {
            title: ' SSH Access (Port 22)',
            body: `
                <h4>Direct Host Access</h4>
                <p>SSH provides direct access to the Ubuntu host OS, bypassing all containerized services.</p>

                <h4>Security Configuration</h4>
                <ul>
                    <li><strong>Key-Only Authentication</strong> - Password login disabled</li>
                    <li><strong>Root Login Disabled</strong> - Use sudo from unprivileged user</li>
                    <li><strong>Fail2Ban</strong> - Auto-blocks IPs after failed attempts</li>
                    <li><strong>Port Knocking</strong> - Optional additional layer</li>
                </ul>

                <div class="warning-box">
                    <strong> WARNING:</strong> SSH is the "master key". If compromised, attacker has full server access.
                    Protect your private key and use strong passphrases.
                </div>

                <h4>Commands</h4>
                <ul>
                    <li><code>ssh -i ~/.ssh/key ubuntu@130.110.251.193</code></li>
                    <li><code>sshd_config: PasswordAuthentication no</code></li>
                    <li><code>sshd_config: PermitRootLogin no</code></li>
                </ul>
            `
        },
        http: {
            title: ' HTTP Redirect (Port 80)',
            body: `
                <h4>Purpose</h4>
                <p>Port 80 exists solely to redirect all traffic to HTTPS (443).</p>

                <h4>NGINX Configuration</h4>
                <pre style="background:#111;padding:10px;border-radius:4px;overflow-x:auto;"><code>server {
    listen 80;
    server_name _;
    return 301 https://$host$request_uri;
}</code></pre>

                <div class="tip-box">
                    <strong> TIP:</strong> This ensures no unencrypted traffic is ever processed.
                    HSTS headers further enforce HTTPS-only browsing.
                </div>
            `
        },
        https: {
            title: ' HTTPS (Port 443)',
            body: `
                <h4>SSL/TLS Termination</h4>
                <p>All encrypted web traffic terminates at the host NGINX. Internal traffic to containers is unencrypted (localhost only).</p>

                <h4>Certificate Management</h4>
                <ul>
                    <li><strong>Provider:</strong> Let's Encrypt (via Certbot)</li>
                    <li><strong>Auto-renewal:</strong> Cron job every 12 hours</li>
                    <li><strong>Protocol:</strong> TLS 1.2+ only (no SSLv3, TLS 1.0/1.1)</li>
                </ul>

                <h4>Security Headers</h4>
                <ul>
                    <li><code>Strict-Transport-Security: max-age=31536000</code></li>
                    <li><code>X-Content-Type-Options: nosniff</code></li>
                    <li><code>X-Frame-Options: SAMEORIGIN</code></li>
                </ul>
            `
        },
        mail: {
            title: ' Mail Ports (25/587/993)',
            body: `
                <h4>Port Functions</h4>
                <ul>
                    <li><strong>25 (SMTP):</strong> Server-to-server mail delivery</li>
                    <li><strong>587 (Submission):</strong> Client  Server (authenticated)</li>
                    <li><strong>993 (IMAPS):</strong> Client mail retrieval (encrypted)</li>
                </ul>

                <h4>Security Measures</h4>
                <ul>
                    <li><strong>DKIM:</strong> Email signing for authenticity</li>
                    <li><strong>SPF:</strong> Authorized sender verification</li>
                    <li><strong>DMARC:</strong> Policy enforcement</li>
                    <li><strong>Fail2Ban:</strong> Blocks brute-force attempts</li>
                </ul>

                <div class="warning-box">
                    <strong> NOTE:</strong> Port 25 must be open for receiving mail but is often blocked by cloud providers.
                    Check Oracle Cloud's outbound SMTP policy.
                </div>
            `
        },
        firewall: {
            title: ' UFW Firewall Configuration',
            body: `
                <h4>Default Policy</h4>
                <ul>
                    <li><strong>Incoming:</strong> DENY (whitelist approach)</li>
                    <li><strong>Outgoing:</strong> ALLOW (containers need internet)</li>
                    <li><strong>Routed:</strong> DENY</li>
                </ul>

                <h4>Active Rules</h4>
                <pre style="background:#111;padding:10px;border-radius:4px;overflow-x:auto;"><code>ufw allow 22/tcp    # SSH
ufw allow 80/tcp    # HTTP  HTTPS redirect
ufw allow 443/tcp   # HTTPS
ufw allow 25/tcp    # SMTP
ufw allow 587/tcp   # SMTP Submission
ufw allow 993/tcp   # IMAPS</code></pre>

                <div class="warning-box">
                    <strong> DOCKER BYPASS:</strong> Docker modifies iptables directly!
                    Always bind containers to <code>127.0.0.1:port</code> to prevent UFW bypass.
                </div>

                <h4>Verification</h4>
                <ul>
                    <li><code>sudo ufw status verbose</code></li>
                    <li><code>sudo iptables -L -n</code></li>
                    <li>External port scan: <code>nmap -p- server_ip</code></li>
                </ul>
            `
        },
        nginx: {
            title: ' NGINX Reverse Proxy',
            body: `
                <h4>Role in Architecture</h4>
                <p>NGINX is the <strong>only</strong> service that talks to the internet (besides SSH).
                All web traffic is proxied through it to internal containers.</p>

                <h4>Routing Logic</h4>
                <ul>
                    <li><code>diegonmarcos.com</code>  Static site container (:8081)</li>
                    <li><code>analytics.diegonmarcos.com</code>  Matomo (:8080)</li>
                    <li><code>cloud.diegonmarcos.com</code>  NextCloud (:8082)</li>
                </ul>

                <h4>Security Benefits</h4>
                <ul>
                    <li>SSL termination at edge</li>
                    <li>Request filtering (blocks malformed HTTP)</li>
                    <li>Rate limiting per endpoint</li>
                    <li>Logging of all requests</li>
                </ul>

                <h4>Internal Binding</h4>
                <p>Containers bind to localhost only:</p>
                <pre style="background:#111;padding:10px;border-radius:4px;"><code>ports:
  - "127.0.0.1:8080:80"  # Not 0.0.0.0!</code></pre>
            `
        },
        server: {
            title: ' VPS Server Overview',
            body: `
                <h4>Specifications</h4>
                <ul>
                    <li><strong>Provider:</strong> Oracle Cloud (Always Free)</li>
                    <li><strong>Instance:</strong> VM.Standard.E2.1.Micro (x86)</li>
                    <li><strong>RAM:</strong> 1 GB (free tier)</li>
                    <li><strong>CPU:</strong> 1 OCPU (1/8 core)</li>
                    <li><strong>Storage:</strong> 47 GB boot volume</li>
                    <li><strong>OS:</strong> Ubuntu 24.04 LTS</li>
                </ul>

                <h4>Software Stack</h4>
                <ul>
                    <li>Docker + Docker Compose</li>
                    <li>NGINX (host-level reverse proxy)</li>
                    <li>UFW firewall</li>
                    <li>Fail2Ban intrusion prevention</li>
                    <li>Certbot for SSL certificates</li>
                </ul>

                <h4>Isolation Layers</h4>
                <ol>
                    <li>Network: UFW firewall</li>
                    <li>Application: Docker containers</li>
                    <li>Data: Separate volumes per service</li>
                    <li>Encryption: LUKS for sensitive data</li>
                </ol>
            `
        },
        databases: {
            title: ' Database Strategy',
            body: `
                <h4>SQL vs NoSQL Decision</h4>

                <h4>SQL Databases (Relational)</h4>
                <ul>
                    <li><strong>MariaDB (Matomo):</strong> Analytics data with complex queries</li>
                    <li><strong>PostgreSQL (NextCloud):</strong> User data, file metadata</li>
                    <li><strong>SQLite (Mail):</strong> Lightweight user/alias storage</li>
                </ul>

                <h4>NoSQL / Key-Value</h4>
                <ul>
                    <li><strong>Redis:</strong> Session cache, search index</li>
                    <li><strong>Maildir:</strong> Email storage (file-based)</li>
                </ul>

                <div class="warning-box">
                    <strong> ISOLATION RULE:</strong> Each service has its OWN database instance.
                    Never share a database between public and private services!
                </div>

                <h4>Backup Strategy</h4>
                <ul>
                    <li>SQL: Daily mysqldump / pg_dump to encrypted storage</li>
                    <li>Files: rsync to separate location</li>
                    <li>Retention: 7 daily, 4 weekly, 12 monthly</li>
                </ul>
            `
        },
        security: {
            title: ' Security Best Practices',
            body: `
                <h4>Blast Radius Containment</h4>
                <p>Assume any public service can be compromised. Design to limit damage.</p>

                <h4>Network Isolation</h4>
                <ul>
                    <li>Separate Docker networks per zone</li>
                    <li>No cross-network communication</li>
                    <li>Internal services use <code>internal: true</code></li>
                </ul>

                <h4>Data Isolation</h4>
                <ul>
                    <li>Separate volume mounts per service</li>
                    <li>Different partitions with quotas</li>
                    <li>LUKS encryption for sensitive data</li>
                </ul>

                <h4>Access Control</h4>
                <ul>
                    <li>SSH key-only authentication</li>
                    <li>Fail2Ban on all exposed ports</li>
                    <li>Regular security updates</li>
                    <li>Minimal installed packages</li>
                </ul>

                <div class="tip-box">
                    <strong> PRINCIPLE:</strong> If Matomo is hacked, the attacker should NOT be able to:
                    <ul>
                        <li>Access NextCloud files</li>
                        <li>Read email data</li>
                        <li>SSH into the host</li>
                        <li>Pivot to other containers</li>
                    </ul>
                </div>
            `
        },
        checklist: {
            title: ' Implementation Checklist',
            body: `
                <h4>Phase 1: Base Infrastructure</h4>
                <ul>
                    <li> Provision Oracle Cloud VPS</li>
                    <li> Configure SSH key access</li>
                    <li> Setup UFW firewall</li>
                    <li> Install Docker & Compose</li>
                    <li> Install host NGINX</li>
                </ul>

                <h4>Phase 2: Public Services</h4>
                <ul>
                    <li> Deploy Matomo container</li>
                    <li> Configure MariaDB for Matomo</li>
                    <li> Setup analytics.diegonmarcos.com</li>
                    <li> Deploy static web server</li>
                    <li> Configure diegonmarcos.com</li>
                </ul>

                <h4>Phase 3: Private Services</h4>
                <ul>
                    <li> Create encrypted /mnt/private partition</li>
                    <li> Deploy NextCloud container</li>
                    <li> Configure PostgreSQL</li>
                    <li> Setup cloud.diegonmarcos.com</li>
                </ul>

                <h4>Phase 4: Mail Services</h4>
                <ul>
                    <li> Deploy Mailu mail suite</li>
                    <li> Configure DNS (MX, SPF, DKIM)</li>
                    <li> Setup mail.diegonmarcos.com</li>
                    <li> Test email delivery</li>
                </ul>

                <h4>Phase 5: Hardening</h4>
                <ul>
                    <li> Configure Fail2Ban</li>
                    <li> Setup automated backups</li>
                    <li> Enable monitoring/alerting</li>
                    <li> Document recovery procedures</li>
                </ul>
            `
        },
        networks: {
            title: ' Docker Network Isolation Explained',
            body: `
                <h4>How Docker Networks Create Isolation</h4>
                <p>Docker networks create <strong>virtual network interfaces</strong> that are completely separate from each other.
                Containers can only communicate with other containers on the SAME network.</p>

                <h4>Network Types in Use</h4>
                <ul>
                    <li><strong style="color:#2ecc71">public_net</strong> - Bridge network for public-facing services (website, analytics)</li>
                    <li><strong style="color:#3498db">private_net</strong> - Internal network with <code>internal: true</code> (no internet access)</li>
                    <li><strong style="color:#9b59b6">mail_net</strong> - Isolated network for email services only</li>
                </ul>

                <div class="warning-box">
                    <strong> Key Point:</strong> There is NO network route between public_net and private_net.
                    <code>docker exec matomo ping nextcloud</code>  "Network unreachable"
                </div>

                <h4>Technical Implementation</h4>
                <pre style="background:#111;padding:10px;border-radius:4px;overflow-x:auto;font-size:11px;"><code># docker-compose.yml

networks:
  public_net:
    driver: bridge
  private_net:
    driver: bridge
    internal: true  #  Blocks internet access!
  mail_net:
    driver: bridge</code></pre>

                <div class="tip-box">
                    <strong> Verification Command:</strong><br>
                    <code>docker network inspect public_net</code> - See which containers are connected
                </div>
            `
        },
        attack: {
            title: ' Attack Scenario: Blast Radius Containment',
            body: `
                <h4>Scenario: Matomo Gets Compromised</h4>
                <p>Let's say an attacker finds a vulnerability in Matomo (analytics) and gains shell access inside the container.</p>

                <h4 style="color:#e74c3c"> What The Attacker CANNOT Do:</h4>
                <ul>
                    <li><strong>Access NextCloud files</strong> - Volume not mounted, path doesn't exist</li>
                    <li><strong>Ping NextCloud container</strong> - No network route (different network)</li>
                    <li><strong>Read email data</strong> - Mail container is on mail_net, unreachable</li>
                    <li><strong>Access host filesystem</strong> - Container isolation prevents this</li>
                    <li><strong>SSH to the host</strong> - No SSH keys inside container</li>
                    <li><strong>Modify the website</strong> - Read-only volume mount</li>
                </ul>

                <h4 style="color:#27ae60"> What The Attacker CAN Access:</h4>
                <ul>
                    <li><strong>Matomo analytics data</strong> - But this is already public-ish data (page views, IPs)</li>
                    <li><strong>Matomo database</strong> - Only analytics, no personal files</li>
                </ul>

                <div class="tip-box">
                    <strong> Result:</strong> The "blast radius" is contained to just the analytics container.
                    Your private files, emails, and system remain safe.
                </div>

                <h4>Defense Layers That Protected You:</h4>
                <ol>
                    <li><strong>Network Isolation:</strong> Can't reach other containers</li>
                    <li><strong>Volume Isolation:</strong> Can't access other data</li>
                    <li><strong>Container Isolation:</strong> Can't escape to host</li>
                    <li><strong>Read-Only Mounts:</strong> Can't persist malware</li>
                </ol>
            `
        },
        howitworks: {
            title: ' How Docker Isolation Actually Works',
            body: `
                <h4>1. Network Namespaces</h4>
                <p>Each Docker network creates a separate <strong>network namespace</strong>. Containers in different namespaces
                literally cannot see each other's network traffic - it's like they're on different physical networks.</p>

                <h4>2. Volume Mount Restrictions</h4>
                <p>Containers can ONLY access directories explicitly mounted in docker-compose.yml:</p>
                <pre style="background:#111;padding:10px;border-radius:4px;font-size:11px;"><code>matomo:
  volumes:
    - /mnt/public/matomo:/var/www/html  # Can ONLY see this path

nextcloud:
  volumes:
    - /mnt/private/nextcloud:/data  # Can ONLY see THIS path</code></pre>

                <h4>3. Process Isolation (cgroups)</h4>
                <p>Docker uses Linux cgroups to limit what each container can do:</p>
                <ul>
                    <li>CPU limits - prevent one container from starving others</li>
                    <li>Memory limits - prevent container from crashing host</li>
                    <li>I/O limits - prevent disk abuse</li>
                </ul>

                <h4>4. The Internal Flag</h4>
                <pre style="background:#111;padding:10px;border-radius:4px;font-size:11px;"><code>private_net:
  internal: true  #  This is crucial!</code></pre>
                <p>With <code>internal: true</code>, containers on private_net:</p>
                <ul>
                    <li> Can talk to each other (NextCloud  PostgreSQL)</li>
                    <li> Cannot access the internet at all</li>
                    <li> Cannot be reached from public_net containers</li>
                </ul>

                <div class="warning-box">
                    <strong> Remember:</strong> This isolation is enforced at the Linux kernel level.
                    It's not just a configuration - it's actual separation of resources.
                </div>
            `
        }
    };

    // Modal Functions
    function openModal(key) {
        const modal = document.getElementById('modal');
        const title = document.getElementById('modal-title');
        const body = document.getElementById('modal-body');

        if (modalContent[key]) {
            title.textContent = modalContent[key].title;
            body.innerHTML = modalContent[key].body;
            modal.style.display = 'flex';
        }
    }

    function closeModal() {
        document.getElementById('modal').style.display = 'none';
    }

    // Keyboard close
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeModal();
    });
</script>

            </div>
        </div>

        <!-- INFRA PLACEHOLDER -->
        <div class="arch-section" id="section-infra">
            <div class="arch-placeholder">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                <h2>Coming Soon</h2>
                <p>Infrastructure architecture diagram is under development.</p>
            </div>
        </div>

        <!-- DATA PLACEHOLDER -->
        <div class="arch-section" id="section-data">
            <div class="arch-placeholder">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                <h2>Coming Soon</h2>
                <p>Data & API architecture diagram is under development.</p>
            </div>
        </div>

        <!-- MCPS PLACEHOLDER -->
        <div class="arch-section" id="section-mcps">
            <div class="arch-placeholder">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                <h2>Coming Soon</h2>
                <p>MCPs architecture diagram is under development.</p>
            </div>
        </div>

        <!-- AI SECTION -->
        <div class="arch-section" id="section-ai">
            <div class="diagram-embed">
    <div class="main-container">
        <!-- Header -->
        <div class="diagram-header">
            <h1>Cloud Control Center</h1>
            <p class="subtitle">AI Architecture</p>
            <!-- Level 1: Main Sections (3 buttons) -->
            <div style="display: flex; justify-content: center; gap: 0.5rem; margin: 1rem 0 0.75rem 0;">
                <button class="nav-main-btn" data-section="products" style="padding: 0.5rem 1.2rem; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; background: rgba(255,255,255,0.05); color: var(--text-muted); cursor: pointer; transition: all 0.3s ease;">Products</button>
                <button class="nav-main-btn" data-section="c3" style="padding: 0.5rem 1.2rem; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; background: rgba(255,255,255,0.05); color: var(--text-muted); cursor: pointer; transition: all 0.3s ease;">Cloud Control Center</button>
                <button class="nav-main-btn active" data-section="architecture" style="padding: 0.5rem 1.2rem; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; border-radius: 20px; background: linear-gradient(135deg, var(--brain-color), var(--logic-color)); color: #000; border: none; cursor: pointer;">Architecture</button>
            </div>
            <!-- Level 2: Sub-tabs for Products -->
            <div id="nav-products" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px;">
                <a href="index.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">All</a>
                <a href="index.html?filter=terminals" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">Terminals</a>
                <a href="index.html?filter=productivity" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User Productivity</a>
                <a href="index.html?filter=security" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User Security</a>
                <a href="index.html?filter=profile" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User Profile</a>
                <a href="index.html?filter=ai" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">User AIs Models</a>
            </div>
            <!-- Level 2: Sub-tabs for Cloud Control Center -->
            <div id="nav-c3" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px;">
                <button class="view-btn" data-c3-group="operation-dashs" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; font-size: 12px; cursor: pointer; color: var(--text-main); border: none;">Operation Dashs</button>
                <button class="view-btn" data-c3-group="infra-services" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; font-size: 12px; cursor: pointer; color: var(--text-main); border: none;">Infra Services Access</button>
                <button class="view-btn" data-c3-group="infra-resources" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; font-size: 12px; cursor: pointer; color: var(--text-main); border: none;">Infra Resources</button>
            </div>
            <!-- Level 3: Sub-tabs for C3 groups -->
            <div id="nav-c3-level3" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; margin-top: -0.5rem;">
                <div class="nav-level3-group" id="c3-operation-dashs" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem;">
                    <a href="cloud_dash.html#monitor" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Monitor</a>
                    <a href="cloud_dash.html#orchestrate" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Orchestrate</a>
                    <a href="cloud_dash.html#cost" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Cost</a>
                    <a href="cloud_dash.html#security" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Security</a>
                </div>
                <div class="nav-level3-group" id="c3-infra-services" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem;">
                    <a href="cloud_dash.html#infra-security" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Security</a>
                    <a href="cloud_dash.html#infra-audit" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Audit</a>
                    <a href="cloud_dash.html#infra-data" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Data & API & Cache</a>
                </div>
                <div class="nav-level3-group" id="c3-infra-resources" style="display: none; flex-wrap: wrap; justify-content: center; gap: 0.5rem;">
                    <a href="cloud_dash.html#infra-resources" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px;">Hosts/VMs/Services</a>
                </div>
            </div>
            <!-- Level 2: Sub-tabs for Architecture (simple links) -->
            <div id="nav-architecture" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.75rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px;">
                <a href="security-arch.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">Security</a>
                <a href="arch.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">Server</a>
                <span style="padding: 6px 12px; background: linear-gradient(135deg, var(--brain-color), var(--logic-color)); color: #000; border-radius: 6px; font-size: 12px; font-weight: 600;">AI & MCPs</span>
                <a href="data-api-arch.html" class="view-btn" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border-radius: 6px; text-decoration: none; color: var(--text-main); font-size: 12px; transition: all 0.2s;">Data & API</a>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Nav toggle - Products vs C3 vs Architecture
                document.querySelectorAll('.nav-main-btn').forEach(function(btn) {
                    btn.onclick = function() {
                        var section = this.dataset.section;
                        document.querySelectorAll('.nav-main-btn').forEach(function(b) {
                            b.classList.remove('active');
                            b.style.background = 'rgba(255,255,255,0.05)';
                            b.style.color = 'var(--text-muted)';
                            b.style.border = '1px solid rgba(255,255,255,0.2)';
                        });
                        this.classList.add('active');
                        this.style.background = 'linear-gradient(135deg, var(--brain-color), var(--logic-color))';
                        this.style.color = '#000';
                        this.style.border = 'none';

                        var navProducts = document.getElementById('nav-products');
                        var navC3 = document.getElementById('nav-c3');
                        var navArch = document.getElementById('nav-architecture');
                        var navC3Level3 = document.getElementById('nav-c3-level3');

                        [navProducts, navC3, navArch].forEach(function(nav) {
                            if (nav) {
                                nav.style.display = 'none';
                            }
                        });

                        // Hide Level 3 nav
                        if (navC3Level3) {
                            navC3Level3.style.display = 'none';
                            document.querySelectorAll('.nav-level3-group').forEach(function(g) {
                                g.style.display = 'none';
                            });
                        }

                        var selectedNav = document.getElementById('nav-' + section);
                        if (selectedNav) {
                            selectedNav.style.display = 'flex';
                        }

                        // Reset C3 group active states
                        document.querySelectorAll('[data-c3-group]').forEach(function(b) {
                            b.style.background = 'rgba(255,255,255,0.1)';
                        });
                    };
                });

                // C3 Level 2 group buttons - show Level 3 items
                document.querySelectorAll('[data-c3-group]').forEach(function(btn) {
                    btn.onclick = function() {
                        var group = this.dataset.c3Group;

                        // Update button styles
                        document.querySelectorAll('[data-c3-group]').forEach(function(b) {
                            b.style.background = 'rgba(255,255,255,0.1)';
                        });
                        this.style.background = 'rgba(255,255,255,0.25)';

                        // Hide all Level 3 groups
                        document.querySelectorAll('.nav-level3-group').forEach(function(g) {
                            g.style.display = 'none';
                        });

                        // Show Level 3 container and selected group
                        var level3Container = document.getElementById('nav-c3-level3');
                        var selectedGroup = document.getElementById('c3-' + group);
                        if (level3Container && selectedGroup) {
                            level3Container.style.display = 'flex';
                            selectedGroup.style.display = 'flex';
                        }
                    };
                });
            });
        </script>

        <!-- Original AI Architecture Title -->
        <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.02); border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
            <h2 style="font-size: 24px; font-weight: 700; background: linear-gradient(90deg, var(--orchestrator-color), var(--brain-color), var(--logic-color), var(--sandbox-color)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px;">AI Infrastructure Architecture <span class="version-badge">v1.0</span></h2>
            <p class="subtitle">Serverless AI Stack - From Orchestration to Execution</p>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--orchestrator-color);"></div>
                <span>PaaS - Orchestrator</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--brain-color);"></div>
                <span>MaaS - Brain/API</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--logic-color);"></div>
                <span>FaaS - Logic/GPU</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--sandbox-color);"></div>
                <span>AaaS - Agent Sandbox</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot" style="background: var(--memory-color);"></div>
                <span>Database - Memory</span>
            </div>
        </div>

        <!-- ============================================
             MAIN VISUAL DIAGRAM - Horizontal Flow
             ============================================ -->
        <div class="visual-diagram">
            <div class="diagram-title">Data Flow Architecture</div>

            <div class="flow-diagram-horizontal">
                <!-- Orchestrator -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-orchestrator">
                        <span class="fl-icon"></span>
                        <span class="fl-label">PaaS</span>
                        <div class="fl-name">Orchestrator</div>
                        <div class="fl-desc">"Managed App Host"</div>
                        <div class="providers-row">
                            <span class="provider-chip active">n8n</span>
                            <span class="provider-chip">HF Spaces</span>
                            <span class="provider-chip">Railway</span>
                        </div>
                    </div>
                </div>

                <!-- Connector 1 -->
                <div class="flow-connector" style="--conn-color-start: var(--orchestrator-color); --conn-color-end: var(--brain-color);">
                    <span class="conn-label">HTTP</span>
                </div>

                <!-- Brain -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-brain">
                        <span class="fl-icon"></span>
                        <span class="fl-label">MaaS</span>
                        <div class="fl-name">The Brain</div>
                        <div class="fl-desc">"Inference API"</div>
                        <div class="providers-row">
                            <span class="provider-chip">Groq</span>
                            <span class="provider-chip">Together</span>
                            <span class="provider-chip">OpenRouter</span>
                        </div>
                    </div>
                </div>

                <!-- Connector 2 -->
                <div class="flow-connector" style="--conn-color-start: var(--brain-color); --conn-color-end: var(--logic-color);">
                    <span class="conn-label">Webhook</span>
                </div>

                <!-- Logic -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-logic">
                        <span class="fl-icon"></span>
                        <span class="fl-label">FaaS</span>
                        <div class="fl-name">Logic Host</div>
                        <div class="fl-desc">"Serverless GPU"</div>
                        <div class="providers-row">
                            <span class="provider-chip active">GCloud</span>
                            <span class="provider-chip">Modal</span>
                            <span class="provider-chip">Beam</span>
                        </div>
                    </div>
                </div>

                <!-- Connector 3 -->
                <div class="flow-connector" style="--conn-color-start: var(--logic-color); --conn-color-end: var(--sandbox-color);">
                    <span class="conn-label">Execute</span>
                </div>

                <!-- Sandbox -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-sandbox">
                        <span class="fl-icon"></span>
                        <span class="fl-label">AaaS</span>
                        <div class="fl-name">Agent Sandbox</div>
                        <div class="fl-desc">"Code Execution"</div>
                        <div class="providers-row">
                            <span class="provider-chip">E2B</span>
                            <span class="provider-chip">Relevance</span>
                        </div>
                    </div>
                </div>

                <!-- Connector 4 -->
                <div class="flow-connector" style="--conn-color-start: var(--sandbox-color); --conn-color-end: var(--memory-color);">
                    <span class="conn-label">Store</span>
                </div>

                <!-- Memory -->
                <div class="flow-layer">
                    <div class="flow-layer-box fl-memory">
                        <span class="fl-icon"></span>
                        <span class="fl-label">DB</span>
                        <div class="fl-name">Memory</div>
                        <div class="fl-desc">"Vector + SQL"</div>
                        <div class="providers-row">
                            <span class="provider-chip">Supabase</span>
                            <span class="provider-chip">Pinecone</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             STACKED LAYERS DIAGRAM
             ============================================ -->
        <div class="stacked-diagram">
            <div class="stacked-title">Service Stack Overview</div>

            <div class="stack-container">
                <!-- PaaS Layer -->
                <div class="stack-layer stack-orchestrator">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>PaaS</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">Platform-as-a-Service</div>
                        <div class="sc-mental">"Managed App Host" - Deploy without infrastructure management</div>
                        <div class="stack-providers">
                            <span class="sp-item active"> n8n (Self-Hosted)</span>
                            <span class="sp-item"> HuggingFace Spaces</span>
                            <span class="sp-item"> Koyeb / Railway</span>
                            <span class="sp-item"> Render</span>
                        </div>
                    </div>
                </div>

                <div class="stack-connector" style="--from-color: var(--orchestrator-color); --to-color: var(--brain-color);">
                    <div class="arrow-down">
                        <div class="arrow-line"></div>
                        <div class="arrow-head"></div>
                    </div>
                    <span class="arrow-label">Send prompt (HTTP)</span>
                </div>

                <!-- MaaS Layer -->
                <div class="stack-layer stack-brain">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>MaaS</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">Model-as-a-Service (Inference API)</div>
                        <div class="sc-mental">"The Brain / API" - LLM inference without hosting</div>
                        <div class="stack-providers">
                            <span class="sp-item"> HuggingFace API</span>
                            <span class="sp-item"> Groq (LPU)</span>
                            <span class="sp-item"> Together AI</span>
                            <span class="sp-item"> OpenRouter</span>
                        </div>
                    </div>
                </div>

                <div class="stack-connector" style="--from-color: var(--brain-color); --to-color: var(--logic-color);">
                    <div class="arrow-down">
                        <div class="arrow-line"></div>
                        <div class="arrow-head"></div>
                    </div>
                    <span class="arrow-label">Trigger job (Webhook)</span>
                </div>

                <!-- FaaS Layer -->
                <div class="stack-layer stack-logic">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>FaaS</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">Function-as-a-Service (Serverless GPU)</div>
                        <div class="sc-mental">"Agent Logic Host" - Run code on-demand with GPU</div>
                        <div class="stack-providers">
                            <span class="sp-item active"> Google Cloud Functions</span>
                            <span class="sp-item"> Modal</span>
                            <span class="sp-item"> Beam.cloud</span>
                            <span class="sp-item"> RunPod Serverless</span>
                        </div>
                    </div>
                </div>

                <div class="stack-connector" style="--from-color: var(--logic-color); --to-color: var(--sandbox-color);">
                    <div class="arrow-down">
                        <div class="arrow-line"></div>
                        <div class="arrow-head"></div>
                    </div>
                    <span class="arrow-label">Execute agent code</span>
                </div>

                <!-- AaaS Layer -->
                <div class="stack-layer stack-sandbox">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>AaaS</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">Agent-as-a-Service (Agent Infrastructure)</div>
                        <div class="sc-mental">"Agent Sandbox" - Safe execution environments for AI</div>
                        <div class="stack-providers">
                            <span class="sp-item"> E2B (Code Execution)</span>
                            <span class="sp-item"> Relevance AI</span>
                        </div>
                    </div>
                </div>

                <div class="stack-connector" style="--from-color: var(--sandbox-color); --to-color: var(--memory-color);">
                    <div class="arrow-down">
                        <div class="arrow-line"></div>
                        <div class="arrow-head"></div>
                    </div>
                    <span class="arrow-label">Store/Retrieve data</span>
                </div>

                <!-- Database Layer -->
                <div class="stack-layer stack-memory">
                    <div class="stack-label">
                        <span class="sl-icon"></span>
                        <span>DB</span>
                    </div>
                    <div class="stack-content">
                        <div class="sc-title">Database & Vector Storage</div>
                        <div class="sc-mental">"The Memory Layer" - Persistent state and embeddings</div>
                        <div class="stack-providers">
                            <span class="sp-item"> Supabase (PostgreSQL + pgvector)</span>
                            <span class="sp-item"> Pinecone</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Reference Table -->
        <div class="stacked-diagram">
            <div class="stacked-title">Service Category Quick Reference</div>
            <table style="width: 100%; border-collapse: collapse; font-size: 12px;">
                <thead>
                    <tr style="border-bottom: 2px solid rgba(255,255,255,0.1);">
                        <th style="padding: 12px; text-align: left;">Category</th>
                        <th style="padding: 12px; text-align: left;">Mental Model</th>
                        <th style="padding: 12px; text-align: left;">Technical Term</th>
                        <th style="padding: 12px; text-align: left;">Top Providers</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                        <td style="padding: 12px;"><span style="background: var(--iaas-color); color: #000; padding: 3px 8px; border-radius: 6px; font-weight: 600; font-size: 11px;">IaaS</span></td>
                        <td style="padding: 12px; color: var(--text-muted);">"Raw VPS"</td>
                        <td style="padding: 12px;">Infrastructure-as-a-Service</td>
                        <td style="padding: 12px; color: var(--text-muted);">Vast.ai, Oracle (Free), DigitalOcean</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                        <td style="padding: 12px;"><span style="background: var(--orchestrator-color); color: #000; padding: 3px 8px; border-radius: 6px; font-weight: 600; font-size: 11px;">PaaS</span></td>
                        <td style="padding: 12px; color: var(--text-muted);">"Managed App Host"</td>
                        <td style="padding: 12px;">Platform-as-a-Service</td>
                        <td style="padding: 12px; color: var(--text-muted);">HuggingFace Spaces, Koyeb, Railway, Render</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                        <td style="padding: 12px;"><span style="background: var(--logic-color); color: #000; padding: 3px 8px; border-radius: 6px; font-weight: 600; font-size: 11px;">FaaS</span></td>
                        <td style="padding: 12px; color: var(--text-muted);">"Agent Logic Host"</td>
                        <td style="padding: 12px;">Serverless GPU</td>
                        <td style="padding: 12px; color: var(--text-muted);">Modal, Beam.cloud, RunPod Serverless</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                        <td style="padding: 12px;"><span style="background: var(--brain-color); color: #000; padding: 3px 8px; border-radius: 6px; font-weight: 600; font-size: 11px;">MaaS</span></td>
                        <td style="padding: 12px; color: var(--text-muted);">"The Brain / API"</td>
                        <td style="padding: 12px;">Inference-as-a-Service</td>
                        <td style="padding: 12px; color: var(--text-muted);">HuggingFace API, Groq, Together AI, OpenRouter</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px;"><span style="background: var(--sandbox-color); color: #fff; padding: 3px 8px; border-radius: 6px; font-weight: 600; font-size: 11px;">AaaS</span></td>
                        <td style="padding: 12px; color: var(--text-muted);">"Agent Sandbox"</td>
                        <td style="padding: 12px;">Agent Infrastructure</td>
                        <td style="padding: 12px; color: var(--text-muted);">E2B (Code Execution), Relevance AI</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.arch-tab');
            const sections = document.querySelectorAll('.arch-section');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    if (this.classList.contains('disabled')) return;
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    const arch = this.getAttribute('data-arch');
                    sections.forEach(s => s.classList.remove('active'));
                    const target = document.getElementById('section-' + arch);
                    if (target) target.classList.add('active');
                    history.replaceState(null, '', '#' + arch);
                });
            });
            const hash = window.location.hash.slice(1);
            if (hash) {
                const tab = document.querySelector('.arch-tab[data-arch="' + hash + '"]');
                if (tab && !tab.classList.contains('disabled')) tab.click();
            }
        });
    </script>
    <script src="main.js"></script>
</body>
</html>
