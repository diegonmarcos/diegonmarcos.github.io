"use strict";(()=>{function l(){document.querySelectorAll(".card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.zIndex="10"}),e.addEventListener("mouseleave",()=>{e.style.zIndex="1",e.style.transform="translateY(0) scale(1) rotateX(0) rotateY(0)"}),e.addEventListener("mousemove",t=>{let n=e.getBoundingClientRect(),s=t.clientX-n.left,i=t.clientY-n.top,r=n.width/2,E=n.height/2,g=(i-E)/10,y=(r-s)/10;e.style.transform=`
                translateY(-12px)
                scale(1.02)
                perspective(1000px)
                rotateX(${g}deg)
                rotateY(${y}deg)
            `})})}function m(){document.querySelectorAll(".card-status").forEach(e=>{setInterval(()=>{Math.random()>.95&&(e.style.animation="pulse 0.5s ease-in-out",setTimeout(()=>{e.style.animation=""},500))},2e3)})}function c(o){let e=document.createElement("div");e.className="notification",e.textContent=o,document.body.appendChild(e),setTimeout(()=>{e.classList.add("closing"),setTimeout(()=>e.remove(),300)},2e3)}function u(o){let e=o.match(/ssh:\/\/(.+)@(.+)/);if(!e)return null;let t=e[1],n=e[2],s=`ssh -i ~/.ssh/matomo_key ${t}@${n}`;return{username:t,host:n,command:s}}function p(o){let e=document.createElement("div");e.className="ssh-modal-overlay",e.innerHTML=`
        <div class="ssh-modal">
            <h3>SSH Connection to ${o.host}</h3>
            <div class="ssh-command">
                <code>${o.command}</code>
                <button class="copy-btn" data-action="copy">Copy</button>
            </div>
            <p class="ssh-instruction">Choose how to connect:</p>
            <div class="ssh-options">
                <button class="ssh-option-btn" data-action="terminal">
                    Open in Terminal
                </button>
                <button class="ssh-option-btn" data-action="vscode">
                    Open in VS Code
                </button>
            </div>
            <button class="close-modal-btn" data-action="close">Close</button>
        </div>
    `,e.addEventListener("click",t=>{let s=t.target.dataset.action;t.target===e||s==="close"?a():s==="copy"?v(o.command):s==="terminal"?L(o.command):s==="vscode"&&C(o)}),document.body.appendChild(e)}function a(){let o=document.querySelector(".ssh-modal-overlay");o&&o.remove()}function v(o){navigator.clipboard.writeText(o).then(()=>{c("SSH command copied to clipboard!")})}function L(o){let e=/Linux/.test(navigator.userAgent),t=/Mac/.test(navigator.userAgent);e?window.location.href=`gnome-terminal://execute/${encodeURIComponent(o)}`:t?window.location.href=`terminal://execute/${encodeURIComponent(o)}`:(v(o),c("Command copied! Paste it in your terminal.")),a()}function C(o){let{username:e,host:t}=o;window.open(`vscode://vscode-remote/ssh-remote+${e}@${t}/home/${e}`,"_blank"),a()}var T={proxy:"http://130.110.251.193:81",analytics:"http://130.110.251.193:8080",firewall:"../vps_oracle/spec.md","vps-oracle-console":"https://cloud.oracle.com/","vps-gcloud-console":"https://console.cloud.google.com/","vm-ubuntu1":"ssh://ubuntu@130.110.251.193","vm-arch1":"ssh://user@pending",mail:"../mail/index.html",sync:"../sync/index.html",drive:"../drive/index.html","vps-local":"../vps_google/index.html",terminal:"../1.ops/index.html",dashboard:"../0.spec/index.html"};function d(o){let e=T[o];e&&(console.log(`Navigating to ${o}: ${e}`),e.startsWith("ssh://")?b(e):e.startsWith("http")?window.open(e,"_blank"):window.location.href=e)}function b(o){let e=u(o);if(e){if(e.host==="pending"||e.host.includes("pending")){c("This VM is not yet configured. IP address pending.");return}p(e)}}function f(){let o=document.querySelectorAll(".view-btn"),e=document.getElementById("cards-view"),t=document.getElementById("tree-view");o.forEach(n=>{n.addEventListener("click",()=>{let s=n.dataset.view;o.forEach(i=>i.classList.remove("active")),n.classList.add("active"),s==="cards"?(e==null||e.classList.add("active"),t==null||t.classList.remove("active")):s==="tree"&&(e==null||e.classList.remove("active"),t==null||t.classList.add("active"))})})}function h(){document.querySelectorAll(".tree-node[data-expanded]").forEach(e=>{let t=e.querySelector(".node-header"),n=e.querySelector(".expand-icon"),s=e.nextElementSibling;t&&(s!=null&&s.classList.contains("tree-children"))&&t.addEventListener("click",i=>{i.stopPropagation(),e.dataset.expanded==="true"?(e.dataset.expanded="false",n==null||n.classList.remove("expanded"),s.classList.remove("expanded")):(e.dataset.expanded="true",n==null||n.classList.add("expanded"),s.classList.add("expanded"))})})}function x(){document.querySelectorAll(".tree-node.service-node.clickable").forEach(e=>{e.addEventListener("click",()=>{let t=e.dataset.service;if(t){let n=new CustomEvent("service-click",{detail:{service:t}});document.dispatchEvent(n)}})})}function w(){document.querySelectorAll(".tree-node[data-expanded]").forEach(e=>{var n;e.dataset.expanded="true",(n=e.querySelector(".expand-icon"))==null||n.classList.add("expanded");let t=e.nextElementSibling;t!=null&&t.classList.contains("tree-children")&&t.classList.add("expanded")})}function H(){document.querySelectorAll(".tree-node[data-expanded]").forEach(e=>{var n;e.dataset.expanded="false",(n=e.querySelector(".expand-icon"))==null||n.classList.remove("expanded");let t=e.nextElementSibling;t!=null&&t.classList.contains("tree-children")&&t.classList.remove("expanded")})}function S(){let o=document.getElementById("expand-all"),e=document.getElementById("collapse-all");o==null||o.addEventListener("click",w),e==null||e.addEventListener("click",H)}document.addEventListener("DOMContentLoaded",()=>{l(),m(),document.querySelectorAll(".card").forEach(e=>{e.addEventListener("click",()=>{let t=e.dataset.service;t&&d(t)})}),f(),h(),x(),S(),document.addEventListener("service-click",e=>{let t=e.detail.service;t&&d(t)})});})();
