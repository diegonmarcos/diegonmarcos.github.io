import{d as e,a as t,p as a,l as n,j as l,f as s,o as i,F as o,e as r,z as c,c as u,g as d,v as p,t as v,y as m,r as h,q as y,C as f,D as g}from"./vendor-Dj1DyFXn.js";import{V as b}from"./query-DgYq02Yv.js";import{S as w,G as _,T as k,C as S,a as x,b as I,c as T,E,M as $,H as A,P as U,d as F,R as C,e as D,Y as q,N as R,V as M}from"./ui-C1zESExG.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const P={class:"header"},H={class:"header__inner"},N={class:"section-tabs"},V={class:"header__search"},L={class:"relative"},O=["value"],W=e({__name:"Header",props:{activeSection:{},searchQuery:{}},emits:["update:activeSection","update:searchQuery"],setup:e=>(o,r)=>(i(),t("header",P,[a("div",H,[r[3]||(r[3]=a("div",{class:"header__logo"},"MyFeed",-1)),a("nav",N,[a("button",{class:n(["section-tab",{"section-tab--active":"myfeed"===e.activeSection}]),onClick:r[0]||(r[0]=e=>o.$emit("update:activeSection","myfeed"))}," MyFeed ",2),a("button",{class:n(["section-tab",{"section-tab--active":"newsfeed"===e.activeSection}]),onClick:r[1]||(r[1]=e=>o.$emit("update:activeSection","newsfeed"))}," NewsFeed ",2)]),a("div",V,[a("div",L,[l(s(w),{class:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-text-tertiary"}),a("input",{type:"text",class:"search-input pl-8",placeholder:"Search...",value:e.searchQuery,onInput:r[2]||(r[2]=e=>o.$emit("update:searchQuery",e.target.value))},null,40,O)])])])]))}),B={class:"tab-bar"},Q=["onClick"],G=e({__name:"TabBar",props:{tabs:{},activeTab:{}},emits:["update:activeTab"],setup:e=>(a,l)=>(i(),t("div",B,[(i(!0),t(o,null,r(e.tabs,l=>(i(),t("button",{key:l.id,class:n(["tab",{"tab--active":e.activeTab===l.id}]),onClick:e=>a.$emit("update:activeTab",l.id)},c(l.label),11,Q))),128))]))}),Y={class:"row"},Z={class:"row__content"},j={class:"row__title"},J=["href"],X={class:"text-text-tertiary ml-1"},K={key:0,class:"row__description"},z={class:"row__time"},ee=["href"],te=e({__name:"GitHubRow",props:{event:{}},setup(e){const o=e,r=u(()=>{switch(o.event.type){case"PushEvent":default:return _;case"WatchEvent":return T;case"ForkEvent":return I;case"PullRequestEvent":return x;case"IssuesEvent":return S;case"CreateEvent":return k}}),m=u(()=>{switch(o.event.type){case"PushEvent":return"icon--commit";case"WatchEvent":return"icon--star";case"ForkEvent":return"icon--fork";case"PullRequestEvent":return"icon--pr";case"IssuesEvent":return"icon--issue";default:return"icon--github"}}),h=u(()=>{switch(o.event.type){case"PushEvent":return`pushed ${o.event.commits||1} commit${(o.event.commits||1)>1?"s":""}`;case"WatchEvent":return"starred";case"ForkEvent":return"forked";case"PullRequestEvent":return`${o.event.action||"opened"} PR`;case"IssuesEvent":return`${o.event.action||"opened"} issue`;case"CreateEvent":return`created ${o.event.branch||"branch"}`;default:return o.event.type.replace("Event","")}}),y=u(()=>{const e=new Date(o.event.createdAt),t=(new Date).getTime()-e.getTime(),a=Math.floor(t/6e4),n=Math.floor(t/36e5),l=Math.floor(t/864e5);return a<60?`${a}m`:n<24?`${n}h`:`${l}d`});return(o,u)=>(i(),t("div",Y,[(i(),d(p(r.value),{class:n(["row__icon icon",m.value])},null,8,["class"])),a("div",Z,[a("div",j,[a("a",{href:e.event.repoUrl,target:"_blank",rel:"noopener"},c(e.event.repo),9,J),a("span",X,c(h.value),1)]),e.event.message?(i(),t("div",K,c(e.event.message),1)):v("",!0)]),a("span",z,c(y.value),1),a("a",{href:e.event.repoUrl,target:"_blank",rel:"noopener",class:"btn btn--ghost btn--icon"},[l(s(E),{class:"w-3.5 h-3.5"})],8,ee)]))}}),ae={class:"row"},ne={class:"row__content"},le={class:"row__title"},se={key:0,class:"row__meta"},ie={key:0},oe=["href"],re=e({__name:"MusicRow",props:{track:{}},setup:e=>(n,o)=>(i(),t("div",ae,[l(s($),{class:"row__icon icon icon--music"}),a("div",ne,[a("div",le,c(e.track.artist)+" - "+c(e.track.title),1),e.track.album?(i(),t("div",se,[a("span",null,c(e.track.album),1),e.track.duration?(i(),t("span",ie,c(e.track.duration),1)):v("",!0)])):v("",!0)]),e.track.isFavorite?(i(),d(s(A),{key:0,class:"w-3.5 h-3.5 text-accent-red fill-accent-red"})):v("",!0),e.track.url?(i(),t("a",{key:1,href:e.track.url,target:"_blank",rel:"noopener",class:"btn btn--ghost btn--icon"},[l(s(E),{class:"w-3.5 h-3.5"})],8,oe)):v("",!0)]))}),ce={class:"row"},ue={class:"row__content"},de={class:"row__title"},pe=["href"],ve={class:"row__meta"},me={key:0,class:"flex items-center gap-1"},he={key:1},ye=["href"],fe=e({__name:"VideoRow",props:{video:{}},setup(e){const n=e,o=u(()=>{if(!n.video.publishedAt)return"";const e=new Date(n.video.publishedAt),t=(new Date).getTime()-e.getTime(),a=Math.floor(t/864e5),l=Math.floor(a/7),s=Math.floor(a/30);return a<7?`${a}d`:l<4?`${l}w`:`${s}mo`});return(n,r)=>(i(),t("div",ce,[l(s(U),{class:"row__icon icon icon--video"}),a("div",ue,[a("div",de,[a("a",{href:e.video.url,target:"_blank",rel:"noopener"},c(e.video.title),9,pe)]),a("div",ve,[a("span",null,c(e.video.channel),1),e.video.duration?(i(),t("span",me,[l(s(F),{class:"w-3 h-3"}),m(" "+c(e.video.duration),1)])):v("",!0),o.value?(i(),t("span",he,c(o.value),1)):v("",!0)])]),a("a",{href:e.video.url,target:"_blank",rel:"noopener",class:"btn btn--ghost btn--icon"},[l(s(E),{class:"w-3.5 h-3.5"})],8,ye)]))}}),ge="github-events-cache";function be(){try{const e=localStorage.getItem(ge);if(e){const t=JSON.parse(e);if(Date.now()-t.timestamp<3e5)return t}}catch(e){console.warn("Failed to read GitHub cache")}return null}async function we(){const e=be();if(e)return e.events;try{const e=await fetch("https://api.github.com/users/diegonmarcos/events/public?per_page=100");if(!e.ok)throw new Error(`GitHub API error: ${e.status}`);const t=await e.json(),a=[];for(const n of t){const e=_e(n);e&&a.push(e)}return function(e){try{localStorage.setItem(ge,JSON.stringify({events:e,timestamp:Date.now()}))}catch(t){console.warn("Failed to write GitHub cache")}}(a),a}catch(t){console.error("Failed to fetch GitHub events:",t);const e=be();return(null==e?void 0:e.events)||[]}}function _e(e){var t,a,n,l,s,i,o,r,c,u,d,p,v,m,h,y,f,g,b,w,_,k,S,x,I,T;const E={id:e.id,type:e.type,repo:(null==(t=e.repo)?void 0:t.name)||"unknown",repoUrl:`https://github.com/${(null==(a=e.repo)?void 0:a.name)||""}`,createdAt:e.created_at};switch(e.type){case"PushEvent":return{...E,commits:(null==(l=null==(n=e.payload)?void 0:n.commits)?void 0:l.length)||0,message:(null==(r=null==(o=null==(i=null==(s=e.payload)?void 0:s.commits)?void 0:i[0])?void 0:o.message)?void 0:r.split("\n")[0])||"",branch:(null==(u=null==(c=e.payload)?void 0:c.ref)?void 0:u.replace("refs/heads/",""))||"main"};case"WatchEvent":return{...E,action:(null==(d=e.payload)?void 0:d.action)||"starred"};case"ForkEvent":return E;case"PullRequestEvent":return{...E,action:(null==(p=e.payload)?void 0:p.action)||"opened",message:(null==(m=null==(v=e.payload)?void 0:v.pull_request)?void 0:m.title)||""};case"IssuesEvent":return{...E,action:(null==(h=e.payload)?void 0:h.action)||"opened",message:(null==(f=null==(y=e.payload)?void 0:y.issue)?void 0:f.title)||""};case"CreateEvent":return{...E,branch:(null==(g=e.payload)?void 0:g.ref)||(null==(b=e.payload)?void 0:b.ref_type)||""};case"DeleteEvent":return{...E,branch:(null==(w=e.payload)?void 0:w.ref)||""};case"IssueCommentEvent":return{...E,action:"commented",message:(null==(S=null==(k=null==(_=e.payload)?void 0:_.comment)?void 0:k.body)?void 0:S.slice(0,100))||""};case"PullRequestReviewEvent":return{...E,action:(null==(x=e.payload)?void 0:x.action)||"reviewed",message:(null==(T=null==(I=e.payload)?void 0:I.pull_request)?void 0:T.title)||""};default:return null}}const ke={username:"diegonmarcos",maxItems:10,autoFetch:!0,label:"ðŸŽ§ TIDAL"},Se=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?"];function xe(e={username:"diegonmarcos"}){const t={...ke,...e},a=h([]),n=h(!1),l=h(null);function s(e){var t,a,n,l,s,i;return{id:`tidal-${e.id||e.uuid||Math.random().toString(36)}`,type:"tidal",_type:"tidalTrack",_createdAt:e.dateAdded||e.streamStartDate||(new Date).toISOString(),title:e.title||e.name||"Unknown Track",artist:(null==(t=e.artist)?void 0:t.name)||(null==(n=null==(a=e.artists)?void 0:a[0])?void 0:n.name)||"Unknown Artist",album:(null==(l=e.album)?void 0:l.title)||(null==(s=e.album)?void 0:s.name)||void 0,duration:e.duration?o(e.duration):void 0,coverUrl:(null==(i=e.album)?void 0:i.cover)?`https://resources.tidal.com/images/${e.album.cover.replace(/-/g,"/")}/320x320.jpg`:void 0,tidalUrl:e.url||`https://tidal.com/track/${e.id}`,likes:0,isLiked:!1,isBookmarked:!1}}function i(e){var t,a,n;return{id:`tidal-album-${e.id||e.uuid||Math.random().toString(36)}`,type:"tidal",_type:"tidalTrack",_createdAt:e.releaseDate||e.streamStartDate||(new Date).toISOString(),title:e.title||e.name||"Unknown Album",artist:(null==(t=e.artist)?void 0:t.name)||(null==(n=null==(a=e.artists)?void 0:a[0])?void 0:n.name)||"Unknown Artist",album:"Album",coverUrl:e.cover?`https://resources.tidal.com/images/${e.cover.replace(/-/g,"/")}/320x320.jpg`:void 0,tidalUrl:e.url||`https://tidal.com/album/${e.id}`,likes:0,isLiked:!1,isBookmarked:!1}}function o(e){return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`}async function r(){n.value=!0,l.value=null;const e=`https://tidal.com/@${t.username}`;try{let n=null;for(const t of Se)try{const a=await fetch(t+encodeURIComponent(e));if(a.ok){n=await a.text();break}}catch(o){console.warn(`Failed with proxy ${t}:`,o);continue}if(!n)throw new Error("Failed to fetch Tidal profile from all proxies");const l=function(e){var a,n,l,r,c,u;const d=[];try{const p=e.match(/<script type="application\/ld\+json">([\s\S]*?)<\/script>/g);if(p)for(const e of p)try{const t=e.replace(/<script type="application\/ld\+json">/,"").replace(/<\/script>/,""),a=JSON.parse(t);(a.track||a.tracks||"MusicPlaylist"===a["@type"])&&console.log("Found Tidal JSON-LD:",a)}catch(o){}const v=e.match(/<script id="__NEXT_DATA__" type="application\/json">([\s\S]*?)<\/script>/);if(v)try{const e=JSON.parse(v[1]),o=null==(a=null==e?void 0:e.props)?void 0:a.pageProps,p=(null==o?void 0:o.tracks)||(null==(n=null==o?void 0:o.playlist)?void 0:n.tracks)||(null==(l=null==o?void 0:o.favorites)?void 0:l.tracks)||(null==(c=null==(r=null==o?void 0:o.user)?void 0:r.favorites)?void 0:c.tracks)||[];if(Array.isArray(p))for(const a of p.slice(0,t.maxItems))d.push(s(a));const m=(null==o?void 0:o.albums)||(null==(u=null==o?void 0:o.favorites)?void 0:u.albums)||[];if(Array.isArray(m)&&d.length<(t.maxItems||10))for(const a of m.slice(0,(t.maxItems||10)-d.length))d.push(i(a))}catch(o){console.warn("Failed to parse __NEXT_DATA__:",o)}if(0===d.length){const a=e.match(/<meta property="og:title" content="([^"]+)"/),n=e.match(/<meta property="og:description" content="([^"]+)"/),l=e.match(/<meta property="og:image" content="([^"]+)"/);a&&d.push({id:`tidal-profile-${t.username}`,type:"tidal",_type:"tidalTrack",_createdAt:(new Date).toISOString(),title:a[1],artist:t.username,album:(null==n?void 0:n[1])||void 0,coverUrl:(null==l?void 0:l[1])||void 0,tidalUrl:`https://tidal.com/@${t.username}`,likes:0,isLiked:!1,isBookmarked:!1})}}catch(o){console.error("Failed to parse Tidal page:",o)}return d}(n);l.length>0?a.value=l:c()}catch(o){console.error("Failed to fetch Tidal feed:",o),l.value="Could not fetch Tidal profile",c()}finally{n.value=!1}}function c(){a.value=[{id:"tidal-fallback-001",type:"tidal",_type:"tidalTrack",_createdAt:(new Date).toISOString(),title:`${t.label||"Tidal"} Profile`,artist:t.username,album:"Check out my music on Tidal",tidalUrl:`https://tidal.com/@${t.username}`,likes:0,isLiked:!1,isBookmarked:!1}]}return y(()=>{t.autoFetch&&r()}),{tracks:a,isLoading:n,error:l,fetchTidalFeed:r,config:t}}const Ie={channelHandle:"diegonmarcos1",maxItems:15,autoFetch:!0},Te=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?"];function Ee(e={}){const t={...Ie,...e},a=h([]),n=h(!1),l=h(null),s=h(t.channelId||null),i=h(t.playlistId||null);async function o(){n.value=!0,l.value=null;try{if(!t.playlistId&&!s.value&&t.channelHandle){const e=await async function(){if(!t.channelHandle)return null;const e=`https://www.youtube.com/@${t.channelHandle}`;for(const t of Te)try{const a=await fetch(t+encodeURIComponent(e)),n=await a.text(),l=n.match(/channel_id=([a-zA-Z0-9_-]+)/);if(l)return l[1];const s=n.match(/"browseId":"(UC[a-zA-Z0-9_-]+)"/);if(s)return s[1];const i=n.match(/"externalChannelId":"(UC[a-zA-Z0-9_-]+)"/);if(i)return i[1]}catch(a){console.warn(`Failed to get channel ID via proxy ${t}:`,a);continue}return null}();e&&(s.value=e)}const n=t.playlistId?`https://www.youtube.com/feeds/videos.xml?playlist_id=${t.playlistId}`:s.value?`https://www.youtube.com/feeds/videos.xml?channel_id=${s.value}`:null;if(!n)return l.value="Could not determine feed URL (no playlist, channel ID, or channel handle)",void r();let i=null;for(const t of Te)try{const e=await fetch(t+encodeURIComponent(n));if(e.ok){i=await e.text();break}}catch(e){console.warn(`Failed with proxy ${t}:`,e);continue}if(!i)throw new Error("Failed to fetch YouTube feed from all proxies");let o=function(e){const t=(new DOMParser).parseFromString(e,"text/xml").querySelectorAll("entry"),a=[];return t.forEach(e=>{var t,n,l,s,i,o,r,c;const u=(null==(t=e.querySelector("id"))?void 0:t.textContent)||"",d=(null==(n=e.querySelector("yt\\:videoId, videoId"))?void 0:n.textContent)||u.replace("yt:video:",""),p=(null==(l=e.querySelector("title"))?void 0:l.textContent)||"",v=(null==(s=e.querySelector("published"))?void 0:s.textContent)||"",m=(null==(i=e.querySelector("updated"))?void 0:i.textContent)||"",h=(null==(o=e.querySelector("author > name"))?void 0:o.textContent)||"",y=(null==(r=e.querySelector("media\\:group media\\:description, group description"))?void 0:r.textContent)||"",f=(null==(c=e.querySelector("media\\:group media\\:thumbnail, group thumbnail"))?void 0:c.getAttribute("url"))||`https://i.ytimg.com/vi/${d}/mqdefault.jpg`;d&&a.push({id:d,videoId:d,title:p,published:v,updated:m,author:h,description:y,thumbnail:f})}),a}(i);if(t.maxItems&&o.length>t.maxItems&&(o=o.slice(0,t.maxItems)),o.length>0){const e=t.playlistId?`Playlist ${t.playlistId}`:o[0].author||t.channelHandle||"YouTube",n=t.playlistId||s.value||"";a.value=function(e,a,n){const l=t.label?`${t.label}`:a;return e.map((e,a)=>({id:`yt-${t.playlistId||"channel"}-${e.videoId}`,type:"youtube",_type:"youtubeVideo",_createdAt:e.published,videoId:e.videoId,title:e.title,description:e.description.substring(0,200)+(e.description.length>200?"...":""),channel:{name:l,id:n,thumbnail:void 0},publishDate:e.published,duration:"",likes:0,isLiked:!1,isBookmarked:!1}))}(o,e,n)}else l.value="No videos found in feed",r()}catch(e){console.error("Failed to fetch YouTube feed:",e),l.value="Could not fetch YouTube feed",r()}finally{n.value=!1}}function r(){const e=t.playlistId?"Playlist":t.channelHandle||"YouTube";a.value=[{id:"yt-fallback-001",type:"youtube",_type:"youtubeVideo",_createdAt:(new Date).toISOString(),videoId:"dQw4w9WgXcQ",title:`Latest Video from ${e}`,description:"Check out the YouTube channel/playlist for the latest updates!",channel:{name:e,id:t.playlistId||s.value||""},publishDate:(new Date).toISOString(),duration:"",likes:0,isLiked:!1,isBookmarked:!1}]}return y(()=>{t.autoFetch&&o()}),{videos:a,isLoading:n,error:l,fetchYouTubeFeed:o,channelId:s,playlistId:i,config:t}}const $e={class:"myfeed"},Ae={class:"myfeed__header"},Ue={key:0,class:"feed-list"},Fe={key:0,class:"p-4 text-text-tertiary text-sm"},Ce={class:"section-header"},De={key:2,class:"empty-state"},qe={key:1,class:"feed-list"},Re={key:0,class:"p-4 text-text-tertiary text-sm"},Me={class:"section-header"},Pe={key:2,class:"empty-state"},He={key:2,class:"feed-list"},Ne={key:0,class:"p-4 text-text-tertiary text-sm"},Ve={class:"section-header"},Le={key:2,class:"empty-state"},Oe=(e,t)=>{const a=e.__vccOpts||e;for(const[n,l]of t)a[n]=l;return a},We=Oe(e({__name:"MyFeedContainer",setup(e){const n=h("github"),c=[{id:"github",label:"GitHub"},{id:"music",label:"Music"},{id:"youtube",label:"YouTube"}],{events:p,loading:m,loadEvents:y}=function(){const e=h([]),t=h(!1),a=h(null),n=u(()=>e.value.filter(e=>"PushEvent"===e.type)),l=u(()=>e.value.filter(e=>"WatchEvent"===e.type)),s=u(()=>e.value.filter(e=>"PullRequestEvent"===e.type)),i=u(()=>e.value.filter(e=>"IssuesEvent"===e.type)),o=u(()=>e.value.filter(e=>!["PushEvent","WatchEvent","PullRequestEvent","IssuesEvent"].includes(e.type)));async function r(){t.value=!0,a.value=null;try{e.value=await we()}catch(n){a.value="Failed to load GitHub activity",console.error(n)}finally{t.value=!1}}return r(),{events:e,commitEvents:n,starEvents:l,prEvents:s,issueEvents:i,otherEvents:o,loading:t,error:a,loadEvents:r}}(),{tracks:f,loading:g,fetchTidalProfile:b}=xe(),{videos:w,loading:_,fetchPlaylist:k}=Ee();function S(){switch(n.value){case"github":y();break;case"music":b();break;case"youtube":k()}}return(e,u)=>(i(),t("div",$e,[a("div",Ae,[l(G,{tabs:c,"active-tab":n.value,"onUpdate:activeTab":u[0]||(u[0]=e=>n.value=e)},null,8,["active-tab"]),a("button",{class:"btn btn--ghost btn--icon",onClick:S,title:"Refresh"},[l(s(C),{class:"w-4 h-4"})])]),"github"===n.value?(i(),t("div",Ue,[s(m)?(i(),t("div",Fe,"Loading GitHub activity...")):s(p).length>0?(i(),t(o,{key:1},[a("div",Ce,[l(s(D),{class:"section-header__icon"}),u[1]||(u[1]=a("span",null,"Recent Activity",-1))]),(i(!0),t(o,null,r(s(p).slice(0,30),e=>(i(),d(te,{key:e.id,event:e},null,8,["event"]))),128))],64)):(i(),t("div",De,[l(s(D),{class:"empty-state__icon"}),u[2]||(u[2]=a("p",{class:"empty-state__title"},"No GitHub activity",-1)),u[3]||(u[3]=a("p",{class:"empty-state__description"},"Recent activity will appear here",-1))]))])):v("",!0),"music"===n.value?(i(),t("div",qe,[s(g)?(i(),t("div",Re,"Loading music...")):s(f).length>0?(i(),t(o,{key:1},[a("div",Me,[l(s($),{class:"section-header__icon"}),u[4]||(u[4]=a("span",null,"Tidal Library",-1))]),(i(!0),t(o,null,r(s(f).slice(0,30),e=>(i(),d(re,{key:e.id,track:{id:e.id,title:e.title,artist:e.artist,album:e.album,duration:e.duration,url:e.url}},null,8,["track"]))),128))],64)):(i(),t("div",Pe,[l(s($),{class:"empty-state__icon"}),u[5]||(u[5]=a("p",{class:"empty-state__title"},"No music data",-1)),u[6]||(u[6]=a("p",{class:"empty-state__description"},"Connect your Tidal account",-1))]))])):v("",!0),"youtube"===n.value?(i(),t("div",He,[s(_)?(i(),t("div",Ne,"Loading videos...")):s(w).length>0?(i(),t(o,{key:1},[a("div",Ve,[l(s(q),{class:"section-header__icon"}),u[7]||(u[7]=a("span",null,"Liked Videos",-1))]),(i(!0),t(o,null,r(s(w).slice(0,30),e=>(i(),d(fe,{key:e.id,video:{id:e.id,title:e.title,channel:e.author||"Unknown",url:e.url,publishedAt:e.publishDate,thumbnail:e.thumbnail}},null,8,["video"]))),128))],64)):(i(),t("div",Le,[l(s(q),{class:"empty-state__icon"}),u[8]||(u[8]=a("p",{class:"empty-state__title"},"No videos",-1)),u[9]||(u[9]=a("p",{class:"empty-state__description"},"Liked videos will appear here",-1))]))])):v("",!0)]))}}),[["__scopeId","data-v-070d9373"]]),Be=["href"],Qe={class:"row__content"},Ge={class:"row__title"},Ye={key:0,class:"row__description"},Ze={class:"row__meta"},je={class:"row__source"},Je={class:"row__time"},Xe=Oe(e({__name:"NewsRow",props:{item:{}},setup(e){const n=e,o=u(()=>{const e=new Date(n.item.publishedAt),t=(new Date).getTime()-e.getTime(),a=Math.floor(t/6e4),l=Math.floor(t/36e5),s=Math.floor(t/864e5);return a<60?`${a}m ago`:l<24?`${l}h ago`:`${s}d ago`});return(n,r)=>(i(),t("a",{href:e.item.url,target:"_blank",rel:"noopener",class:"row"},[l(s(R),{class:"row__icon icon icon--news"}),a("div",Qe,[a("div",Ge,c(e.item.title),1),e.item.description?(i(),t("div",Ye,c(e.item.description),1)):v("",!0),a("div",Ze,[a("span",je,c(e.item.source),1),a("span",Je,c(o.value),1)])]),l(s(E),{class:"w-3.5 h-3.5 text-text-tertiary flex-shrink-0"})],8,Be))}}),[["__scopeId","data-v-282e5765"]]),Ke=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?"],ze={headlines:"https://news.google.com/rss?hl=en-US&gl=US&ceid=US:en",world:"https://news.google.com/rss/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNRGx1YlY4U0FtVnVHZ0pWVXlnQVAB?hl=en-US&gl=US&ceid=US:en",tech:"https://news.google.com/rss/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNRGRqTVhZU0FtVnVHZ0pWVXlnQVAB?hl=en-US&gl=US&ceid=US:en",science:"https://news.google.com/rss/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNRFp0Y1RjU0FtVnVHZ0pWVXlnQVAB?hl=en-US&gl=US&ceid=US:en",markets:"https://news.google.com/rss/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNRGx6TVdZU0FtVnVHZ0pWVXlnQVAB?hl=en-US&gl=US&ceid=US:en"},et=new Map;async function tt(e){const t=ze[e];if(!t)return console.warn(`Unknown category: ${e}`),[];const a=et.get(e);if(a&&Date.now()-a.timestamp<3e5)return a.data;try{const n=await async function(e){for(const a of Ke)try{const t=await fetch(a+encodeURIComponent(e));if(t.ok)return await t.text()}catch(t){console.warn(`Proxy ${a} failed for ${e}`)}return null}(t);if(!n)return console.warn(`Failed to fetch RSS for ${e}`),(null==a?void 0:a.data)||[];const l=new DOMParser,s=l.parseFromString(n,"text/xml").querySelectorAll("item"),i=[];return s.forEach((e,t)=>{t<30&&i.push(function(e,t){var a,n,l,s,i;const o=(null==(a=e.querySelector("title"))?void 0:a.textContent)||"No title",r=(null==(n=e.querySelector("link"))?void 0:n.textContent)||"",c=(null==(l=e.querySelector("description"))?void 0:l.textContent)||"",u=(null==(s=e.querySelector("pubDate"))?void 0:s.textContent)||(new Date).toISOString(),d=(null==(i=e.querySelector("guid"))?void 0:i.textContent)||r,p=o.replace(/ - [^-]+$/,""),v=o.match(/ - ([^-]+)$/),m=v?v[1]:t,h=c.replace(/<[^>]+>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").trim().slice(0,200);return{id:d||`${r}-${Date.now()}`,title:p,description:h||void 0,source:m,url:r,publishedAt:u}}(e,"Google News"))}),et.set(e,{data:i,timestamp:Date.now()}),i}catch(n){return console.error(`Error fetching RSS for ${e}:`,n),(null==a?void 0:a.data)||[]}}const at={class:"newsfeed"},nt={class:"newsfeed__header"},lt={key:0,class:"p-4 text-text-tertiary text-sm"},st={key:1,class:"error-state m-4"},it={class:"error-state__message"},ot={key:2,class:"feed-list"},rt={class:"time-group"},ct={key:3,class:"empty-state"},ut=Oe(e({__name:"NewsFeedContainer",setup(e){const{category:p,categories:v,groupedItems:m,loading:y,error:f,loadFeed:g}=function(e="headlines"){const t=h(e),a=h([]),n=h(!1),l=h(null);async function s(e){e&&(t.value=e),n.value=!0,l.value=null;try{a.value=await tt(t.value)}catch(s){l.value="Failed to load news feed",console.error(s)}finally{n.value=!1}}const i=u(()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(t.getTime()-864e5),l=[{label:"Today",items:[]},{label:"Yesterday",items:[]},{label:"Earlier",items:[]}];return a.value.forEach(e=>{const a=new Date(e.publishedAt);a>=t?l[0].items.push(e):a>=n?l[1].items.push(e):l[2].items.push(e)}),l.filter(e=>e.items.length>0)});return s(),{category:t,categories:[{id:"headlines",label:"Headlines"},{id:"world",label:"World"},{id:"tech",label:"Tech"},{id:"science",label:"Science"},{id:"markets",label:"Markets"}],items:a,groupedItems:i,loading:n,error:l,loadFeed:s}}("headlines");function b(e){g(e)}const w=v.map(e=>({id:e.id,label:e.label}));return(e,u)=>(i(),t("div",at,[a("div",nt,[l(G,{tabs:s(w),"active-tab":s(p),"onUpdate:activeTab":b},null,8,["tabs","active-tab"]),a("button",{class:"btn btn--ghost btn--icon",onClick:u[0]||(u[0]=e=>s(g)()),title:"Refresh"},[l(s(C),{class:n(["w-4 h-4",{"animate-spin":s(y)}])},null,8,["class"])])]),s(y)&&0===s(m).length?(i(),t("div",lt," Loading news... ")):s(f)?(i(),t("div",st,[a("p",it,c(s(f)),1)])):s(m).length>0?(i(),t("div",ot,[(i(!0),t(o,null,r(s(m),e=>(i(),t(o,{key:e.label},[a("div",rt,c(e.label),1),(i(!0),t(o,null,r(e.items,e=>(i(),d(Xe,{key:e.id,item:e},null,8,["item"]))),128))],64))),128))])):(i(),t("div",ct,[l(s(R),{class:"empty-state__icon"}),u[1]||(u[1]=a("p",{class:"empty-state__title"},"No news available",-1)),u[2]||(u[2]=a("p",{class:"empty-state__description"},"Try refreshing or selecting another category",-1))]))]))}}),[["__scopeId","data-v-03e6d808"]]),dt={class:"app-container"},pt={class:"main-content"},vt=f(Oe(e({__name:"App",setup(e){const n=h("myfeed"),s=h("");return(e,o)=>(i(),t("div",dt,[l(W,{"active-section":n.value,"search-query":s.value,"onUpdate:activeSection":o[0]||(o[0]=e=>n.value=e),"onUpdate:searchQuery":o[1]||(o[1]=e=>s.value=e)},null,8,["active-section","search-query"]),a("main",pt,["myfeed"===n.value?(i(),d(We,{key:0})):"newsfeed"===n.value?(i(),d(ut,{key:1})):v("",!0)]),o[2]||(o[2]=a("a",{href:"https://linktree.diegonmarcos.com",target:"_blank",rel:"noopener",class:"linktree-corner",title:"Linktree"}," ðŸ”— ",-1))]))}}),[["__scopeId","data-v-5f194882"]])),mt=g();vt.use(mt),vt.use(b,{queryClientConfig:{defaultOptions:{queries:{staleTime:3e5,cacheTime:18e5,refetchOnWindowFocus:!1}}}}),vt.component("Toaster",M),vt.mount("#app");
