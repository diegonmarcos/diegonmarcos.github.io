"use strict";(()=>{var R=["public/videos/background.mp4","public/videos/background2.mp4","public/videos/background3.mp4","public/videos/background4.mp4","public/images/background_static.jpg","public/images/professional.png","public/images/personal.png","public/images/venture1.png","public/images/venture2.png","public/images/tools.png"],$e="https://diegonmarcos.github.io/linktree_mindmap/",W="linktree_assets_cache_v1";var J="public/images/background_static.jpg",L,X,Z,Q,ee,F,H,te,ne;function se(){return window.location.protocol==="file:"}async function Be(){if(se())return 0;let e=performance.now();try{await fetch(J+"?t="+Date.now(),{method:"HEAD",cache:"no-store"});let t=performance.now();return Math.round(t-e)}catch{return 0}}async function Ae(){if(se())return 0;let e=performance.now();try{let n=await(await fetch(J+"?t="+Date.now(),{cache:"no-store"})).blob(),o=(performance.now()-e)/1e3,i=n.size*8/o/(1024*1024);return Math.round(i*100)/100}catch{return 0}}async function De(){v("Running network diagnostics..."),v("Measuring latency...");let e=await Be();ee.textContent=`${e}ms`,v("Testing download speed...");let t=await Ae();Q.textContent=`${t} Mbps`,localStorage.setItem("last_download_speed",`${t} Mbps`);let n=Math.round(t/8*100)/100;return te.textContent=`${n} MB/s`,{downloadSpeed:t,latency:e,transferRate:n}}function Ue(){try{let e=localStorage.getItem(W);if(e){let t=JSON.parse(e),n=Date.now()-t.timestamp,s=24*60*60*1e3;if(n<s)return H.textContent="Cached",H.style.color="#10b981",!0}}catch(e){console.warn("Cache check failed:",e)}return H.textContent="Not Cached",H.style.color="#f59e0b",!1}function Ne(e){return new Promise((t,n)=>{let s=e.split(".").pop()?.toLowerCase();if(s==="mp4"||s==="webm"){let o=document.createElement("video");o.preload="auto",o.onloadeddata=()=>t(),o.onerror=()=>n(new Error(`Failed to load video: ${e}`)),o.src=e}else{let o=new Image;o.onload=()=>t(),o.onerror=()=>n(new Error(`Failed to load image: ${e}`)),o.src=e}})}function Oe(){return new Promise(e=>{let t=document.createElement("iframe");t.style.position="absolute",t.style.width="0",t.style.height="0",t.style.border="none",t.style.visibility="hidden";let n=setTimeout(()=>{document.body.removeChild(t),e()},1e4);t.onload=()=>{clearTimeout(n),setTimeout(()=>{document.body.removeChild(t),e()},1e3)},t.onerror=()=>{clearTimeout(n),document.body.removeChild(t),e()},document.body.appendChild(t),t.src=$e})}async function ze(e){let t=R.length+1,n=0;if(F.textContent=`${n} / ${t}`,e){v("Loading from cache...");for(let a=0;a<t;a++)await new Promise(i=>setTimeout(i,50)),n++,U({loaded:n,total:t,percentage:Math.round(n/t*100)});return}v("Downloading assets...");let s=R.map(async a=>{try{await Ne(a),n++,U({loaded:n,total:t,percentage:Math.round(n/t*100)}),v(`Loaded: ${a.split("/").pop()}`)}catch(i){console.warn(`Asset load failed: ${a}`,i),n++,U({loaded:n,total:t,percentage:Math.round(n/t*100)})}}),o=Oe().then(()=>{n++,U({loaded:n,total:t,percentage:Math.round(n/t*100)}),v("Loaded: mindmap")});await Promise.all([...s,o]);try{localStorage.setItem(W,JSON.stringify({timestamp:Date.now(),assets:R}))}catch(a){console.warn("Failed to set cache:",a)}}function U(e){X.style.width=`${e.percentage}%`,Z.textContent=`${e.percentage}%`,F.textContent=`${e.loaded} / ${e.total}`}function v(e){ne.textContent=e}function K(){v("Complete! Entering experience..."),setTimeout(()=>{L.style.opacity="0",setTimeout(()=>{L.classList.remove("active"),L.style.display="none"},500)},500)}async function oe(){if(L=document.getElementById("loading-screen"),X=document.getElementById("progress-bar"),Z=document.getElementById("progress-text"),Q=document.getElementById("download-speed"),ee=document.getElementById("latency"),F=document.getElementById("assets-loaded"),H=document.getElementById("cache-status"),te=document.getElementById("transfer-rate"),ne=document.getElementById("loading-details"),!L){console.warn("Loading screen not found");return}L.classList.add("active");try{let e=Ue();await De(),await ze(e),K()}catch(e){console.error("Loading failed:",e),K()}}var ae=["public/videos/background.mp4","public/videos/background2.mp4","public/videos/background3.mp4","public/videos/background4.mp4","public/images/background_static.jpg","public/images/professional.png","public/images/personal.png","public/images/venture1.png","public/images/venture2.png","public/images/tools.png"];function _(){return window.location.protocol==="file:"}async function Re(){if(_())return"localhost (file://)";try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return"Unable to fetch"}}async function Fe(){if(_())return{avg:0,jitter:0};let e=[],t="public/images/background_static.jpg";for(let a=0;a<5;a++){let i=performance.now();try{await fetch(t+"?t="+Date.now()+"&ping="+a,{method:"HEAD",cache:"no-store"}),e.push(performance.now()-i)}catch{e.push(0)}}let n=e.reduce((a,i)=>a+i,0)/e.length,s=e.reduce((a,i)=>a+Math.pow(i-n,2),0)/e.length,o=Math.sqrt(s);return{avg:Math.round(n),jitter:Math.round(o)}}async function _e(){let e=await Fe(),t=await Re(),n=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return{downloadSpeed:localStorage.getItem("last_download_speed")||"Unknown",uploadSpeed:"N/A",latency:`${e.avg}ms`,jitter:`${e.jitter}ms`,connectionType:n?.type||"Unknown",effectiveType:n?.effectiveType||"Unknown",downlink:n?.downlink?`${n.downlink} Mbps`:"Unknown",rtt:n?.rtt?`${n.rtt}ms`:"Unknown",clientIP:t,serverIP:window.location.hostname,protocol:window.location.protocol.replace(":","")}}function Ve(){try{let e=JSON.parse(localStorage.getItem("linktree_assets_cache_v1")||"{}"),t=e.timestamp||0,n=Date.now()-t,s=24*60*60*1e3,o=new Date(t+s);return{status:n<s&&t>0?"Valid":"Expired",cacheAge:`${Math.round(n/1e3/60)} minutes`,cachedFiles:e.assets?.length||0,totalCachedSize:"Calculating...",lastUpdate:t>0?new Date(t).toLocaleString():"Never",validUntil:t>0?o.toLocaleString():"N/A"}}catch{return{status:"Unknown",cacheAge:"N/A",cachedFiles:0,totalCachedSize:"N/A",lastUpdate:"N/A",validUntil:"N/A"}}}function qe(){let e=navigator;return{browser:Ye(),browserVersion:je(),os:Ge(),platform:e.platform||"Unknown",language:e.language||"Unknown",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||"Unknown",screenResolution:`${screen.width}x${screen.height}`,viewportSize:`${window.innerWidth}x${window.innerHeight}`,deviceMemory:e.deviceMemory?`${e.deviceMemory} GB`:"Unknown",hardwareConcurrency:e.hardwareConcurrency?`${e.hardwareConcurrency} cores`:"Unknown",cookiesEnabled:e.cookieEnabled?"Yes":"No",doNotTrack:e.doNotTrack==="1"?"Yes":"No"}}function Ye(){let e=navigator.userAgent;return e.indexOf("Firefox")>-1?"Firefox":e.indexOf("Edg")>-1?"Edge":e.indexOf("Chrome")>-1?"Chrome":e.indexOf("Safari")>-1?"Safari":e.indexOf("Opera")>-1||e.indexOf("OPR")>-1?"Opera":"Unknown"}function je(){let t=navigator.userAgent.match(/(Firefox|Chrome|Safari|Edge|Opera|OPR)\/([0-9.]+)/);return t?t[2]:"Unknown"}function Ge(){let e=navigator.userAgent;return e.indexOf("Win")>-1?"Windows":e.indexOf("Mac")>-1?"macOS":e.indexOf("X11")>-1?"UNIX":e.indexOf("Linux")>-1?"Linux":e.indexOf("Android")>-1?"Android":e.indexOf("iOS")>-1?"iOS":"Unknown"}async function Ke(){let e=[];if(_()){let t=performance.getEntriesByType("resource");for(let n of ae){let s=t.find(a=>a.name.includes(n)),o=n.split(".").pop()?.toUpperCase()||"Unknown";s?e.push({url:n.split("/").pop()||n,type:o,size:s.transferSize?P(s.transferSize):"Local",cached:s.transferSize===0,loadTime:`${Math.round(s.duration)}ms`}):e.push({url:n.split("/").pop()||n,type:o,size:"Local",cached:!1,loadTime:"Pending"})}return e}for(let t of ae){let n=performance.now();try{let s=await fetch(t,{method:"HEAD"}),o=performance.now()-n,a=s.headers.get("content-length"),i=t.split(".").pop()?.toUpperCase()||"Unknown";e.push({url:t.split("/").pop()||t,type:i,size:a?P(parseInt(a)):"Unknown",cached:s.headers.get("x-cache")==="HIT",loadTime:`${Math.round(o)}ms`})}catch{e.push({url:t.split("/").pop()||t,type:"Error",size:"N/A",cached:!1,loadTime:"Failed"})}}return e}function We(){let e=performance.getEntriesByType("navigation")[0],t=performance.memory,n=performance.getEntriesByType("paint"),s=n.find(a=>a.name==="first-paint"),o=n.find(a=>a.name==="first-contentful-paint");return{pageLoadTime:e?`${Math.round(e.loadEventEnd-e.fetchStart)}ms`:"Unknown",domContentLoaded:e?`${Math.round(e.domContentLoadedEventEnd-e.fetchStart)}ms`:"Unknown",firstPaint:s?`${Math.round(s.startTime)}ms`:"N/A",firstContentfulPaint:o?`${Math.round(o.startTime)}ms`:"N/A",transferSize:e?.transferSize?P(e.transferSize):"Unknown",resourceCount:`${performance.getEntriesByType("resource").length}`,memoryUsage:t?P(t.usedJSHeapSize):"Unknown"}}function P(e){if(e===0)return"0 B";let t=1024,n=["B","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return`${(e/Math.pow(t,s)).toFixed(2)} ${n[s]}`}function Je(e){let t=e.assets.reduce((n,s)=>{let o=s.size.match(/([0-9.]+)\s*(B|KB|MB|GB)/);if(!o)return n;let a=parseFloat(o[1]),i=o[2],d={B:1,KB:1024,MB:1024*1024,GB:1024*1024*1024}[i]||1;return n+a*d},0);return`
    <div class="diagnostics-container">
      <!-- Network Section -->
      <div class="diag-section">
        <h3>Network Information</h3>
        <div class="diag-grid">
          <div class="diag-item"><span class="diag-label">Download Speed:</span><span class="diag-value">${e.network.downloadSpeed}</span></div>
          <div class="diag-item"><span class="diag-label">Latency:</span><span class="diag-value">${e.network.latency}</span></div>
          <div class="diag-item"><span class="diag-label">Jitter:</span><span class="diag-value">${e.network.jitter}</span></div>
          <div class="diag-item"><span class="diag-label">Connection Type:</span><span class="diag-value">${e.network.connectionType}</span></div>
          <div class="diag-item"><span class="diag-label">Effective Type:</span><span class="diag-value">${e.network.effectiveType}</span></div>
          <div class="diag-item"><span class="diag-label">Downlink:</span><span class="diag-value">${e.network.downlink}</span></div>
          <div class="diag-item"><span class="diag-label">RTT:</span><span class="diag-value">${e.network.rtt}</span></div>
          <div class="diag-item"><span class="diag-label">Client IP:</span><span class="diag-value">${e.network.clientIP}</span></div>
          <div class="diag-item"><span class="diag-label">Server:</span><span class="diag-value">${e.network.serverIP}</span></div>
          <div class="diag-item"><span class="diag-label">Protocol:</span><span class="diag-value">${e.network.protocol}</span></div>
        </div>
      </div>

      <!-- Cache Section -->
      <div class="diag-section">
        <h3>Cache Status</h3>
        <div class="diag-grid">
          <div class="diag-item"><span class="diag-label">Status:</span><span class="diag-value ${e.cache.status==="Valid"?"status-good":"status-warn"}">${e.cache.status}</span></div>
          <div class="diag-item"><span class="diag-label">Cache Age:</span><span class="diag-value">${e.cache.cacheAge}</span></div>
          <div class="diag-item"><span class="diag-label">Cached Files:</span><span class="diag-value">${e.cache.cachedFiles}</span></div>
          <div class="diag-item"><span class="diag-label">Total Size:</span><span class="diag-value">${P(t)}</span></div>
          <div class="diag-item"><span class="diag-label">Last Update:</span><span class="diag-value">${e.cache.lastUpdate}</span></div>
          <div class="diag-item"><span class="diag-label">Valid Until:</span><span class="diag-value">${e.cache.validUntil}</span></div>
        </div>
      </div>

      <!-- System Section -->
      <div class="diag-section">
        <h3>System Information</h3>
        <div class="diag-grid">
          <div class="diag-item"><span class="diag-label">Browser:</span><span class="diag-value">${e.system.browser} ${e.system.browserVersion}</span></div>
          <div class="diag-item"><span class="diag-label">OS:</span><span class="diag-value">${e.system.os}</span></div>
          <div class="diag-item"><span class="diag-label">Platform:</span><span class="diag-value">${e.system.platform}</span></div>
          <div class="diag-item"><span class="diag-label">Language:</span><span class="diag-value">${e.system.language}</span></div>
          <div class="diag-item"><span class="diag-label">Timezone:</span><span class="diag-value">${e.system.timezone}</span></div>
          <div class="diag-item"><span class="diag-label">Screen:</span><span class="diag-value">${e.system.screenResolution}</span></div>
          <div class="diag-item"><span class="diag-label">Viewport:</span><span class="diag-value">${e.system.viewportSize}</span></div>
          <div class="diag-item"><span class="diag-label">Device Memory:</span><span class="diag-value">${e.system.deviceMemory}</span></div>
          <div class="diag-item"><span class="diag-label">CPU Cores:</span><span class="diag-value">${e.system.hardwareConcurrency}</span></div>
          <div class="diag-item"><span class="diag-label">Cookies:</span><span class="diag-value">${e.system.cookiesEnabled}</span></div>
        </div>
      </div>

      <!-- Performance Section -->
      <div class="diag-section">
        <h3>Performance Metrics</h3>
        <div class="diag-grid">
          <div class="diag-item"><span class="diag-label">Page Load Time:</span><span class="diag-value">${e.performance.pageLoadTime}</span></div>
          <div class="diag-item"><span class="diag-label">DOM Content Loaded:</span><span class="diag-value">${e.performance.domContentLoaded}</span></div>
          <div class="diag-item"><span class="diag-label">First Paint:</span><span class="diag-value">${e.performance.firstPaint}</span></div>
          <div class="diag-item"><span class="diag-label">First Contentful Paint:</span><span class="diag-value">${e.performance.firstContentfulPaint}</span></div>
          <div class="diag-item"><span class="diag-label">Transfer Size:</span><span class="diag-value">${e.performance.transferSize}</span></div>
          <div class="diag-item"><span class="diag-label">Resources Loaded:</span><span class="diag-value">${e.performance.resourceCount}</span></div>
          <div class="diag-item"><span class="diag-label">Memory Usage:</span><span class="diag-value">${e.performance.memoryUsage}</span></div>
        </div>
      </div>

      <!-- Assets Section -->
      <div class="diag-section">
        <h3>Asset Information (${e.assets.length} files)</h3>
        <div class="assets-table">
          <div class="assets-table-header">
            <span>File</span>
            <span>Type</span>
            <span>Size</span>
            <span>Load Time</span>
            <span>Cached</span>
          </div>
          ${e.assets.map(n=>`
            <div class="assets-table-row">
              <span class="asset-name">${n.url}</span>
              <span class="asset-type">${n.type}</span>
              <span class="asset-size">${n.size}</span>
              <span class="asset-loadtime">${n.loadTime}</span>
              <span class="asset-cached ${n.cached?"cached-yes":"cached-no"}">${n.cached?"\u2713":"\u2717"}</span>
            </div>
          `).join("")}
        </div>
      </div>
    </div>
  `}function ie(){let e=document.getElementById("status-toggle"),t=document.getElementById("status-modal"),n=document.getElementById("status-modal-close"),s=document.getElementById("status-modal-body");!e||!t||!n||!s||(e.addEventListener("click",async()=>{t.style.display="flex",s.innerHTML=`
      <div class="status-loading">
        <div class="status-spinner"></div>
        <p>Gathering diagnostics...</p>
      </div>
    `;let o={network:await _e(),cache:Ve(),system:qe(),assets:await Ke(),performance:We()};s.innerHTML=Je(o)}),n.addEventListener("click",()=>{t.style.display="none"}),t.addEventListener("click",o=>{o.target===t&&(t.style.display="none")}))}function c(e){return document.getElementById(e)}function p(e,t=document){return t.querySelector(e)}function I(e,t=document){return t.querySelectorAll(e)}function re(e,t,n){e.style.setProperty(t,n)}function r(e,t){e.classList.add(t)}function l(e,t){e.classList.remove(t)}function w(e,t){return e.classList.contains(t)}function N(e){let t=e.parentElement?.closest(".collapsible-content");for(;t;){if(w(t,"open")){let n=t.style.maxHeight;t.style.maxHeight="none";let s=t.scrollHeight;t.style.maxHeight=n,t.offsetHeight,t.style.maxHeight=s+"px"}t=t.parentElement?.closest(".collapsible-content")}}function Xe(){I(".collapsible-content").forEach(t=>{w(t,"open")?t.style.maxHeight=t.scrollHeight+"px":t.style.maxHeight="0px"})}function Ze(e){let t=e.getAttribute("data-target");if(!t)return;let n=c(t);n&&(w(n,"open")?(l(n,"open"),l(e,"open"),n.style.maxHeight="0px",setTimeout(()=>N(n),100)):(r(n,"open"),r(e,"open"),n.style.maxHeight=n.scrollHeight+"px",setTimeout(()=>{w(n,"open")&&(n.style.maxHeight=n.scrollHeight+"px")},50),setTimeout(()=>N(n),100),setTimeout(()=>N(n),300),setTimeout(()=>N(n),500)))}function le(){Xe(),I(".more-toggle").forEach(t=>{t.addEventListener("click",()=>Ze(t))})}function ce(){let e=c("controls-fab"),t=c("controls-list"),n=e?.parentElement;if(!e||!t||!n)return;let s=null,o=()=>{l(t,"open"),l(e,"open"),s&&(clearTimeout(s),s=null)},a=()=>{r(t,"open"),r(e,"open"),s=window.setTimeout(()=>{o()},1e3)},i=()=>{s&&(clearTimeout(s),s=null)},d=()=>{i(),w(t,"open")&&(s=window.setTimeout(()=>{o()},1e3))};e.addEventListener("mouseenter",()=>{i(),w(t,"open")||a()}),t.addEventListener("mouseenter",()=>{i()}),n.addEventListener("mouseleave",()=>{d()}),e.addEventListener("click",()=>{w(t,"open")?o():a()})}var de=["public/videos/background.mp4","public/videos/background2.mp4","public/videos/background3.mp4","public/videos/background4.mp4"],Qe="public/images/background_static.jpg",u=null,M=!0;function ue(){return de[Math.floor(Math.random()*de.length)]}function me(){u=c("background-video"),u&&(u.src=ue(),u.poster=Qe)}function ge(){let e=c("video-toggle");if(!e||!u)return;localStorage.getItem("videoPlaying")==="false"?(M=!1,l(e,"active"),pe()):(M=!0,r(e,"active")),e.addEventListener("click",()=>{M?(pe(),l(e,"active")):(et(),r(e,"active")),localStorage.setItem("videoPlaying",String(M))})}function pe(){u&&(u.pause(),u.removeAttribute("src"),u.load(),M=!1)}function et(){u&&(u.src=ue(),u.play().catch(()=>{}),M=!0)}var C="professional",h,y,E,S,$,B,A,D,V=!1,tt=300,fe={effect:"creative",grabCursor:!0,centeredSlides:!1,slidesPerView:1,spaceBetween:0,loop:!0,creativeEffect:{prev:{shadow:!1,translate:["-120%",0,-500],rotate:[0,0,-15],opacity:0,scale:.8},next:{shadow:!1,translate:["120%",0,-500],rotate:[0,0,15],opacity:0,scale:.8}},keyboard:{enabled:!0,onlyInViewport:!0},touchRatio:1,resistanceRatio:.85,touchStartPreventDefault:!1,touchStartForcePreventDefault:!1,touchMoveStopPropagation:!1,simulateTouch:!0,allowTouchMove:!0,touchEventsTarget:"container",threshold:10,passiveListeners:!0,speed:900};function b(e){C=e,e==="professional"?(r(E,"selected"),l(S,"selected")):(r(S,"selected"),l(E,"selected"))}function f(){let e=p(".professional-swiper"),t=p(".personal-swiper");!e||!t||(C==="professional"?($.style.opacity="1",B.style.opacity="1",$.style.pointerEvents="auto",B.style.pointerEvents="auto",h.allowTouchMove=!0,h.enable(),r(e,"swiper-enabled"),l(e,"swiper-disabled"),A.style.opacity="0.3",D.style.opacity="0.3",A.style.pointerEvents="none",D.style.pointerEvents="none",y.allowTouchMove=!1,y.disable(),r(t,"swiper-disabled"),l(t,"swiper-enabled")):(A.style.opacity="1",D.style.opacity="1",A.style.pointerEvents="auto",D.style.pointerEvents="auto",y.allowTouchMove=!0,y.enable(),r(t,"swiper-enabled"),l(t,"swiper-disabled"),$.style.opacity="0.3",B.style.opacity="0.3",$.style.pointerEvents="none",B.style.pointerEvents="none",h.allowTouchMove=!1,h.disable(),r(e,"swiper-disabled"),l(e,"swiper-enabled")))}function he(e,t){Math.abs(e.deltaX)>Math.abs(e.deltaY)&&(V||(V=!0,e.deltaX>30?t.slidePrev():e.deltaX<-30&&t.slideNext(),setTimeout(()=>{V=!1},tt),e.preventDefault()))}function ve(e){he(e,h)}function we(e){he(e,y)}function q(){E.removeEventListener("wheel",ve),S.removeEventListener("wheel",we),C==="professional"?E.addEventListener("wheel",ve,{passive:!1}):S.addEventListener("wheel",we,{passive:!1})}function nt(){let e=!1;[E,S].forEach((t,n)=>{t.addEventListener("touchstart",s=>{s.touches.length===2&&(e=!0)},{passive:!0}),t.addEventListener("touchmove",s=>{e&&s.touches.length},{passive:!0}),t.addEventListener("touchend",()=>{e&&(b(n===0?"professional":"personal"),f(),e=!1)},{passive:!0})})}function st(){document.addEventListener("keydown",e=>{e.key==="ArrowLeft"?C==="professional"?h.slidePrev():y.slidePrev():e.key==="ArrowRight"?C==="professional"?h.slideNext():y.slideNext():e.key==="ArrowDown"?(b("personal"),f()):e.key==="ArrowUp"&&(b("professional"),f())})}function ot(){E.addEventListener("mouseenter",()=>{b("professional"),f(),q()}),S.addEventListener("mouseenter",()=>{b("personal"),f(),q()})}function ye(){if(typeof Swiper>"u"){console.warn("Swiper not loaded - carousel disabled");return}let e=p(".professional-section .carousel-row"),t=p(".personal-section .carousel-row");if(!e||!t)return;E=e,S=t;let n=p(".professional-prev"),s=p(".professional-next"),o=p(".personal-prev"),a=p(".personal-next");!n||!s||!o||!a||($=n,B=s,A=o,D=a,h=new Swiper(".professional-swiper",{...fe,navigation:{nextEl:".professional-next",prevEl:".professional-prev"},pagination:{el:".professional-pagination",clickable:!0}}),y=new Swiper(".personal-swiper",{...fe,navigation:{nextEl:".personal-next",prevEl:".personal-prev"},pagination:{el:".personal-pagination",clickable:!0}}),r(E,"selected"),f(),nt(),st(),ot(),q())}function Ee(){return C}function be(e,t){let n=!1;return function(...s){n||(e.apply(this,s),n=!0,setTimeout(()=>{n=!1},t))}}function Te(e){let t=e.getBoundingClientRect();return t.top+t.height/2}function at(e){return e.getBoundingClientRect().bottom<window.innerHeight/2}function Y(e,t){if(at(t))return;let n=window.innerHeight/2,s=Te(e),o=Te(t),a=Math.abs(n-s),i=Math.abs(n-o),d=Ee();a<i?d!=="professional"&&(b("professional"),f()):d!=="personal"&&(b("personal"),f())}function Se(){let e=p(".professional-section .carousel-row"),t=p(".personal-section .carousel-row");if(!e||!t)return;let n=be(()=>Y(e,t),150);window.addEventListener("scroll",n,{passive:!0}),setTimeout(()=>Y(e,t),100),window.addEventListener("resize",be(()=>{Y(e,t)},200),{passive:!0})}var k=!1;function Le(){I(".link").forEach(t=>{let n=t.getAttribute("data-preview");n&&re(t,"--thumbnail-url",`url(${n})`)})}function it(e){k=!k,localStorage.setItem("galleryEnabled",String(k)),k?(Le(),r(document.body,"gallery-mode"),r(e,"active")):(l(document.body,"gallery-mode"),l(e,"active"))}function Me(){let e=c("gallery-toggle");e&&(k=localStorage.getItem("galleryEnabled")==="true",k&&(Le(),r(document.body,"gallery-mode"),r(e,"active")),e.addEventListener("click",()=>it(e)))}var x=!1;function O(){document.body.classList.add("lite-mode"),x=!0;let e=c("video-toggle");e&&e.classList.contains("active")&&e.click()}function rt(){document.body.classList.remove("lite-mode"),x=!1;let e=c("video-toggle");e&&!e.classList.contains("active")&&e.click()}function lt(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function Ce(){let e=c("lite-toggle");if(lt()){O(),e&&r(e,"active");return}if(!e)return;localStorage.getItem("liteMode")==="true"&&(x=!0,r(e,"active"),O()),e.addEventListener("click",()=>{x?(rt(),l(e,"active")):(O(),r(e,"active")),localStorage.setItem("liteMode",String(x))}),window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",n=>{n.matches&&!x&&(O(),r(e,"active"))})}var j=!1,ke,ct=800;function dt(e,t){let n=window.scrollY,s=e-n,o=performance.now();function a(i){let d=i-o,m=Math.min(d/t,1),g=1-Math.pow(1-m,3);window.scrollTo(0,n+s*g),m<1?requestAnimationFrame(a):j=!1}j=!0,requestAnimationFrame(a)}function pt(){let e=document.querySelector("header"),t=document.querySelector(".professional-section"),n=document.querySelector(".personal-section"),s=[];e&&s.push(e.getBoundingClientRect().top+window.scrollY),t&&s.push(t.getBoundingClientRect().top+window.scrollY),n&&s.push(n.getBoundingClientRect().top+window.scrollY);let o=window.scrollY,a=s[0],i=Math.abs(o-a);for(let d of s){let m=Math.abs(o-d);m<i&&(i=m,a=d)}return a}function ut(){if(j)return;let e=pt(),t=window.scrollY;Math.abs(t-e)>50&&dt(e,ct)}function xe(){document.documentElement.style.scrollSnapType="none",window.addEventListener("scroll",()=>{clearTimeout(ke),ke=setTimeout(ut,500)},{passive:!0})}function He(){let e=c("mindmap-btn"),t=c("btn-mindmap"),n=c("mindmap-overlay"),s=c("mindmap-overlay-close"),o=c("mindmap-iframe");if(!e||!n||!s||!o)return;let a=e.href,i=null,d=()=>{o.src=a,console.log("Opening mindmap overlay with URL:",a),r(n,"active"),r(e,"hidden")},m=()=>{l(n,"active"),l(e,"hidden")};e.addEventListener("mouseenter",()=>{i=window.setTimeout(()=>{d()},500)}),e.addEventListener("mouseleave",()=>{i&&(clearTimeout(i),i=null)}),e.addEventListener("click",g=>{g.preventDefault(),d()}),t&&t.addEventListener("click",()=>{d()}),s.addEventListener("click",()=>{m()}),n.addEventListener("click",g=>{g.target===n&&m()}),document.addEventListener("keydown",g=>{g.key==="Escape"&&n.classList.contains("active")&&m()})}function Pe(){let e=document.querySelector(".controls-fab-container"),t=document.getElementById("mindmap-btn"),n=document.getElementById("controls-list");if(!e||!t||!n){console.warn("ScrollFab: FAB elements not found");return}let s=null,o=!1,a=window.scrollY,i=!1,d=50;function m(){return n.classList.contains("open")}function g(){m()||i||o||(o=!0,e.style.opacity="0",e.style.pointerEvents="none",t.style.opacity="0",t.style.pointerEvents="none")}function z(){o&&(o=!1,e.style.opacity="1",e.style.pointerEvents="auto",t.style.opacity="1",t.style.pointerEvents="auto")}function Ie(){let T=window.scrollY;Math.abs(T-a)>d&&(g(),a=T),s!==null&&clearTimeout(s),s=window.setTimeout(()=>{z(),s=null},500)}[e,t].forEach(T=>{T.addEventListener("touchstart",()=>{i=!0,z()},{passive:!0}),T.addEventListener("mousedown",()=>{i=!0,z()}),T.addEventListener("touchend",()=>{setTimeout(()=>{i=!1},300)},{passive:!0}),T.addEventListener("mouseup",()=>{setTimeout(()=>{i=!1},300)})}),window.addEventListener("scroll",Ie,{passive:!0}),console.log("ScrollFab: Initialized")}function mt(){le(),ce(),ie(),He(),me(),ge(),ye(),Se(),Me(),Ce(),xe(),Pe()}function G(){requestAnimationFrame(()=>{requestAnimationFrame(mt)})}document.addEventListener("DOMContentLoaded",async()=>{if(await oe(),typeof Swiper<"u")G();else{let e=setTimeout(G,5e3);window.addEventListener("swiperReady",()=>{clearTimeout(e),G()})}});})();
