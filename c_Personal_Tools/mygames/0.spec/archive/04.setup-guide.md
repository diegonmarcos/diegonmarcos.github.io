# Hybrid Folder Structure Setup Guide

This guide provides a quick-start script and configuration files for setting up the hybrid folder structure for your personal profile website.

## Quick Setup Script

Run this bash script to create the entire hybrid folder structure in one go:

```bash
#!/bin/bash
# setup-hybrid-structure.sh
# Run this script from your project root directory

echo "ğŸš€ Setting up hybrid folder structure..."

# Create numbered directories
echo "ğŸ“ Creating numbered directories..."
mkdir -p 0.spec
mkdir -p 1.1.ops
mkdir -p 1.2.analytics
mkdir -p 1.3.svelte/lib/{components/{common,layout,pages},services,types,utils}
mkdir -p 1.3.svelte/routes/{photos,music,stats}
mkdir -p 1.3.svelte/styles/{abstracts,base,components,layouts}
mkdir -p 2.1.assets/{images/albums,icons,fonts}

# Create symlinks
echo "ğŸ”— Creating symlinks..."
ln -sf 1.3.svelte/styles 2.2.sass
ln -sf 1.3.svelte/lib/types 2.3.ts

# Create .github directory
mkdir -p .github/workflows

# Create .gitkeep files in empty directories
echo "ğŸ“ Adding .gitkeep files..."
find . -type d -empty -exec touch {}/.gitkeep \;

echo "âœ… Hybrid folder structure created successfully!"
echo ""
echo "ğŸ“‚ Structure:"
tree -L 2 -I 'node_modules|.git'
```

### To Use:
1. Save as `setup-hybrid-structure.sh` in your project root
2. Make executable: `chmod +x setup-hybrid-structure.sh`
3. Run: `./setup-hybrid-structure.sh`

---

## Configuration Files

### 1. `svelte.config.js`

```javascript
import adapter from '@sveltejs/adapter-static';
import { vitePreprocess } from '@sveltejs/vite-plugin-svelte';

/** @type {import('@sveltejs/kit').Config} */
const config = {
  // Preprocess with Vite (includes Sass support)
  preprocess: vitePreprocess(),

  kit: {
    // Static adapter for GitHub Pages
    adapter: adapter({
      pages: 'dist',
      assets: 'dist',
      fallback: undefined,
      precompress: false,
      strict: true
    }),

    // Custom folder paths for hybrid structure
    files: {
      assets: '2.1.assets',
      hooks: {
        client: '1.3.svelte/hooks.client',
        server: '1.3.svelte/hooks.server'
      },
      lib: '1.3.svelte/lib',
      params: '1.3.svelte/params',
      routes: '1.3.svelte/routes',
      serviceWorker: '1.3.svelte/service-worker',
      appTemplate: '1.3.svelte/app.html'
    },

    // Output directory for SvelteKit internals
    outDir: '.svelte-kit',

    // Paths configuration
    paths: {
      base: '',
      assets: ''
    },

    // Alias configuration
    alias: {
      $lib: '1.3.svelte/lib'
    }
  }
};

export default config;
```

### 2. `vite.config.ts`

```typescript
import { sveltekit } from '@sveltejs/kit/vite';
import { defineConfig } from 'vite';

export default defineConfig({
  plugins: [sveltekit()],

  server: {
    fs: {
      // Allow serving files from numbered folders
      allow: ['.']
    },
    port: 5173
  },

  build: {
    target: 'esnext',
    outDir: 'dist'
  },

  css: {
    preprocessorOptions: {
      scss: {
        // Additional Sass options if needed
        additionalData: `@use "1.3.svelte/styles/abstracts/variables" as *;`
      }
    }
  }
});
```

### 3. `tsconfig.json`

```json
{
  "extends": "./.svelte-kit/tsconfig.json",
  "compilerOptions": {
    "allowJs": true,
    "checkJs": true,
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "skipLibCheck": true,
    "sourceMap": true,
    "strict": true,
    "moduleResolution": "bundler",
    "module": "esnext",
    "target": "esnext",

    // Path mappings for hybrid structure
    "paths": {
      "$lib": ["./1.3.svelte/lib"],
      "$lib/*": ["./1.3.svelte/lib/*"]
    }
  },

  // Include numbered folders
  "include": [
    "1.3.svelte/**/*.d.ts",
    "1.3.svelte/**/*.ts",
    "1.3.svelte/**/*.js",
    "1.3.svelte/**/*.svelte"
  ],

  "exclude": [
    "node_modules",
    "dist",
    ".svelte-kit",
    "**/*.spec.ts"
  ]
}
```

### 4. `package.json` (Essential Scripts)

```json
{
  "name": "mygames",
  "version": "1.0.0",
  "type": "module",
  "private": true,
  "scripts": {
    "dev": "vite dev",
    "build": "vite build",
    "preview": "vite preview",
    "check": "svelte-kit sync && svelte-check --tsconfig ./tsconfig.json",
    "check:watch": "svelte-kit sync && svelte-check --tsconfig ./tsconfig.json --watch",
    "lint": "eslint .",
    "format": "prettier --write ."
  },
  "devDependencies": {
    "@sveltejs/adapter-static": "^3.0.0",
    "@sveltejs/kit": "^2.0.0",
    "@sveltejs/vite-plugin-svelte": "^3.0.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "eslint": "^8.56.0",
    "eslint-plugin-svelte": "^2.35.0",
    "prettier": "^3.1.0",
    "prettier-plugin-svelte": "^3.1.0",
    "sass": "^1.69.0",
    "svelte": "^4.2.0",
    "svelte-check": "^3.6.0",
    "tslib": "^2.6.0",
    "typescript": "^5.3.0",
    "vite": "^5.0.0"
  }
}
```

### 5. `.gitignore`

```
# Dependencies
node_modules
.pnp
.pnp.js

# Build output
dist
.svelte-kit
build
.vercel
.netlify

# Environment
.env
.env.*
!.env.example

# Logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

# IDE
.DS_Store
.vscode/*
!.vscode/extensions.json
.idea

# Testing
coverage

# Misc
*.local
.cache
```

### 6. `1.3.svelte/app.html`

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%sveltekit.assets%/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Personal profile website with pixel art design" />
    %sveltekit.head%
  </head>
  <body data-sveltekit-preload-data="hover">
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>
```

### 7. `1.3.svelte/routes/+layout.svelte`

```svelte
<script lang="ts">
  // Import global styles
  import '../styles/global.scss';
</script>

<slot />
```

### 8. `1.3.svelte/routes/+page.svelte`

```svelte
<script lang="ts">
  // Home page
</script>

<main class="home">
  <h1>Personal Profile</h1>
  <p>Under construction...</p>
  <p class="subtitle">Pixel art design coming soon! ğŸ®</p>
</main>

<style lang="scss">
  .home {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 2rem;
  }

  h1 {
    font-size: clamp(2rem, 5vw, 3rem);
    margin-bottom: 1rem;
  }

  .subtitle {
    color: var(--text-secondary);
    margin-top: 1rem;
  }
</style>
```

---

## Step-by-Step Manual Setup

If you prefer to set up manually without the script:

### Step 1: Create Project
```bash
mkdir mygames
cd mygames
npm init -y
```

### Step 2: Install Dependencies
```bash
npm install -D @sveltejs/adapter-static @sveltejs/kit @sveltejs/vite-plugin-svelte
npm install -D svelte vite typescript svelte-check
npm install -D eslint prettier prettier-plugin-svelte sass
npm install -D @typescript-eslint/eslint-plugin @typescript-eslint/parser
```

### Step 3: Create Folder Structure
```bash
# Spec folder
mkdir -p 0.spec

# DevOps folders
mkdir -p 1.1.ops
mkdir -p 1.2.analytics

# Svelte source (main working directory)
mkdir -p 1.3.svelte/lib/components/{common,layout,pages}
mkdir -p 1.3.svelte/lib/{services,types,utils}
mkdir -p 1.3.svelte/routes/{photos,music,stats}
mkdir -p 1.3.svelte/styles/{abstracts,base,components,layouts}

# Assets folder
mkdir -p 2.1.assets/images/albums
mkdir -p 2.1.assets/{icons,fonts}

# GitHub workflows
mkdir -p .github/workflows
```

### Step 4: Create Symlinks
```bash
# Symlink for Sass (easy access)
ln -s 1.3.svelte/styles 2.2.sass

# Symlink for TypeScript types (easy access)
ln -s 1.3.svelte/lib/types 2.3.ts
```

### Step 5: Create Configuration Files
Copy the configuration files from sections above into your project:
- `svelte.config.js`
- `vite.config.ts`
- `tsconfig.json`
- Update `package.json` with scripts

### Step 6: Create Initial Files
Create these files with the content from sections above:
- `1.3.svelte/app.html`
- `1.3.svelte/routes/+layout.svelte`
- `1.3.svelte/routes/+page.svelte`

### Step 7: Create Sass Files
```bash
# Create initial Sass files
touch 1.3.svelte/styles/abstracts/_variables.scss
touch 1.3.svelte/styles/abstracts/_mixins.scss
touch 1.3.svelte/styles/base/_reset.scss
touch 1.3.svelte/styles/base/_typography.scss
touch 1.3.svelte/styles/global.scss
```

Copy the Sass content from `03.task.md` into these files.

### Step 8: Initialize Git
```bash
git init
git add .
git commit -m "feat: initial hybrid folder structure setup"
```

### Step 9: Test Development Server
```bash
npm run dev
```

Open `http://localhost:5173` and verify:
- Dark purple background appears
- "Personal Profile" text displays
- No console errors

---

## Troubleshooting

### Issue: "Cannot find module '1.3.svelte/lib'"
**Solution**: Run `npx svelte-kit sync` to regenerate SvelteKit internals

### Issue: Symlinks not working on Windows
**Solution**: Use Windows Subsystem for Linux (WSL) or Git Bash, or create junction points:
```cmd
mklink /J 2.2.sass 1.3.svelte\styles
mklink /J 2.3.ts 1.3.svelte\lib\types
```

### Issue: Sass files not compiling
**Solution**: Verify `sass` package is installed and `vitePreprocess()` is in `svelte.config.js`

### Issue: Path aliases not resolving
**Solution**:
1. Run `npx svelte-kit sync`
2. Restart VS Code
3. Check `tsconfig.json` paths match folder structure

### Issue: Build fails with "Cannot resolve module"
**Solution**: Check that all paths in `svelte.config.js` point to existing directories

---

## Verification Checklist

After setup, verify everything works:

- [ ] `npm run dev` starts without errors
- [ ] Browser shows page at http://localhost:5173
- [ ] Dark purple background visible
- [ ] No console errors
- [ ] Hot reload works (edit file, see changes)
- [ ] `npm run check` passes
- [ ] `npm run lint` passes
- [ ] Symlinks work: `ls -la 2.2.sass` shows files
- [ ] TypeScript imports work: `import { Album } from '$lib/types'`
- [ ] Sass imports work in `.svelte` files with `<style lang="scss">`

---

## Next Steps

Once setup is complete:

1. **Move spec files**: Copy `00-instruc.md`, `01-spec.md`, `02.plan.md`, `03.task.md` to `0.spec/`
2. **Start Phase 1 tasks**: Follow tasks in `03.task.md`
3. **Set up Git remote**: `git remote add origin [your-repo-url]`
4. **Push to GitHub**: `git push -u origin main`
5. **Begin development**: Start with Phase 2 (Core UI & Navigation)

---

## Folder Structure Reference

```
mygames/
â”œâ”€â”€ 0.spec/              # Product specs (you're here!)
â”œâ”€â”€ 1.1.ops/             # CI/CD (GitHub Actions later)
â”œâ”€â”€ 1.2.analytics/       # Matomo config (later)
â”œâ”€â”€ 1.3.svelte/          # Main SvelteKit source
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ types/       # â† Also accessible via 2.3.ts/
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ styles/          # â† Also accessible via 2.2.sass/
â”‚   â””â”€â”€ app.html
â”œâ”€â”€ 2.1.assets/          # Static files (images, icons, fonts)
â”œâ”€â”€ 2.2.sass/ â†’ 1.3.svelte/styles/     # Symlink
â”œâ”€â”€ 2.3.ts/   â†’ 1.3.svelte/lib/types/  # Symlink
â”œâ”€â”€ dist/                # Build output (after npm run build)
â”œâ”€â”€ .svelte-kit/         # SvelteKit internals
â””â”€â”€ node_modules/        # Dependencies
```

**Working Directories:**
- Write Svelte components in: `1.3.svelte/lib/components/`
- Write routes/pages in: `1.3.svelte/routes/`
- Write styles in: `1.3.svelte/styles/` or `2.2.sass/` (same thing)
- Write types in: `1.3.svelte/lib/types/` or `2.3.ts/` (same thing)
- Add images to: `2.1.assets/images/`

**Build Output:**
- Run `npm run build`
- Deploy `dist/` folder to GitHub Pages

---

**Document Version**: 1.0
**Last Updated**: 2025-11-14
**Compatible With**: SvelteKit 2.x, Vite 5.x
