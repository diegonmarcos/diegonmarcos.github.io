"use strict";(()=>{var L={physics:{repulsion:180,attraction:.025,centerGravity:.015,damping:.88,ambientForce:.3,ambientFrequency:.002,minVelocity:.02,maxVelocity:4},visual:{nodeRadiusByDepth:[45,32,24,16,12],glowIntensityByDepth:[1,.8,.6,.4,.25],opacityByDepth:[1,.95,.85,.7,.5],breatheDuration:4e3,particleCount:80}},te={voidBg:"#0a0a0f",voidBgLight:"#12121a",glassWhite:"rgba(255, 255, 255, 0.08)",glassWhiteHover:"rgba(255, 255, 255, 0.12)",glassBorder:"rgba(255, 255, 255, 0.15)",root:"#60a5fa",professional:"#4ade80",personal:"#f472b6",text:"#ffffff",textMuted:"rgba(255, 255, 255, 0.6)",textDim:"rgba(255, 255, 255, 0.4)"},v={levelSpacing:120,siblingSpacing:80,minZoom:.3,maxZoom:2.5,defaultZoom:1,panEasing:.12,hoverFadeSpeed:.15};var ye={root:{id:"dnm",label:"DNM",fullLabel:"Diego Nepomuceno Marcos",icon:"user",color:"#2196F3",children:["professional","personal"]},nodes:{professional:{id:"professional",label:"Professional",icon:"briefcase",color:"#4CAF50",children:["profile-pro","repos","nexus"]},personal:{id:"personal",label:"Personal",icon:"heart",color:"#E91E63",children:["profile-personal","deving","tools","circus"]},"profile-pro":{id:"profile-pro",label:"Profile",icon:"user",color:"#4CAF50",children:["contact-pro","profiles-pro","ventures","curriculum"]},repos:{id:"repos",label:"Repos",icon:"brand-github",color:"#4CAF50",children:["github-overview","cs-repos","eng-finance-repos"]},nexus:{id:"nexus",label:"Nexus",icon:"rocket",color:"#4CAF50",children:["nexus-contact","nexus-venture"]},"profile-personal":{id:"profile-personal",label:"Profile",icon:"user",color:"#E91E63",children:["contact-personal","profiles-personal","my-media","my-endurance","my-maps","my-bucket"]},deving:{id:"deving",label:"Deving",icon:"code",color:"#E91E63",children:["cloud-portal","ai-tools","inbox-tools","productivity-tools","dev-tools"]},tools:{id:"tools",label:"Tools",icon:"settings",color:"#E91E63",children:["health-tools","finance-tools","content-tools"]},circus:{id:"circus",label:"Circus",icon:"sparkles",color:"#E91E63",children:["games","video","audio"]},"contact-pro":{id:"contact-pro",label:"Contact",icon:"mail",color:"#81C784",links:[{label:"Email",url:"mailto:me@diegonmarcos.com",icon:"mail"},{label:"LinkedIn",url:"https://linkedin.com/in/diegonmarcos",icon:"brand-linkedin"},{label:"vCard",url:"public/diegonmarcos-contact_photo.vcf",icon:"user",download:!0}]},"profiles-pro":{id:"profiles-pro",label:"Profiles",icon:"world",color:"#81C784",links:[{label:"Landpage",url:"https://diegonmarcos.com/",icon:"world"},{label:"LinkedIn",url:"https://linkedin.com/in/diegonmarcos",icon:"brand-linkedin"},{label:"Github",url:"https://github.com/diegonmarcos",icon:"brand-github"}]},ventures:{id:"ventures",label:"Ventures",icon:"rocket",color:"#81C784",links:[{label:"Nexus",url:"https://diegonmarcos.github.io/nexus/",icon:"rocket"}]},curriculum:{id:"curriculum",label:"Curriculum",icon:"file-type-pdf",color:"#81C784",links:[{label:"CV (web)",url:"https://diegonmarcos.github.io/cv_web",icon:"file-type-html"},{label:"CV (pdf)",url:"https://diegonmarcos.github.io/cv_pdf",icon:"file-type-pdf"}]},"github-overview":{id:"github-overview",label:"Overview",icon:"brand-github",color:"#81C784",links:[{label:"Github",url:"https://github.com/diegonmarcos",icon:"brand-github"}]},"cs-repos":{id:"cs-repos",label:"Computer Science",icon:"brain",color:"#81C784",links:[{label:"Back-End",url:"https://github.com/diegonmarcos/back-System",icon:"settings"},{label:"Cyber-Security",url:"https://github.com/diegonmarcos/cyber-Cyberwarfare",icon:"bolt"},{label:"DevOps",url:"https://github.com/diegonmarcos/ops-Tooling",icon:"git-branch"},{label:"Front-End",url:"https://github.com/diegonmarcos/diegonmarcos.github.io",icon:"world"},{label:"ARM Mobile",url:"https://github.com/diegonmarcos/front-android-Portfolio",icon:"device-desktop"},{label:"Data Science",url:"https://github.com/diegonmarcos/ml-DataScience",icon:"brain"}]},"eng-finance-repos":{id:"eng-finance-repos",label:"Engineering & Finance",icon:"database",color:"#81C784",links:[{label:"Civil Engineer",url:"https://github.com/diegonmarcos/cveng_AFrame",icon:"settings"},{label:"Macro Economics",url:"https://github.com/diegonmarcos/ecoqt-thesis1",icon:"world-longitude"},{label:"Quant Finance",url:"https://github.com/diegonmarcos/ecoqt-thesis2",icon:"database"}]},"nexus-contact":{id:"nexus-contact",label:"Contact",icon:"mail",color:"#81C784",links:[{label:"Email",url:"mailto:me@diegonmarcos.com",icon:"mail"},{label:"LinkedIn",url:"https://linkedin.com/in/diegonmarcos",icon:"brand-linkedin"}]},"nexus-venture":{id:"nexus-venture",label:"Venture",icon:"rocket",color:"#81C784",links:[{label:"Website",url:"https://diegonmarcos.github.io/nexus/",icon:"rocket"},{label:"Slides",url:"https://diegonmarcos.github.io/nexus/slides",icon:"slideshow"}]},"contact-personal":{id:"contact-personal",label:"Contact",icon:"send",color:"#F48FB1",links:[{label:"Telegram",url:"https://t.me/diegonmarcos",icon:"send"},{label:"WhatsApp",url:"https://wa.me/34634769833",icon:"brand-whatsapp"}]},"profiles-personal":{id:"profiles-personal",label:"Profiles",icon:"user",color:"#F48FB1",links:[{label:"MyProfile",url:"https://diegonmarcos.github.io/myprofile",icon:"user"}]},"my-media":{id:"my-media",label:"Media",icon:"headphones",color:"#F48FB1",links:[{label:"TIDAL",url:"https://tidal.com/@diegonmarcos",icon:"headphones"},{label:"YouTube",url:"https://www.youtube.com/@diegonmarcos1",icon:"brand-youtube"},{label:"Pinterest",url:"https://www.pinterest.com/diegonmarcos",icon:"slideshow"},{label:"Instagram",url:"https://www.instagram.com/diegonmarcos",icon:"brand-instagram"}]},"my-endurance":{id:"my-endurance",label:"Endurance",icon:"bike",color:"#F48FB1",links:[{label:"Komoot",url:"https://www.komoot.com/user/2474200810898/routes",icon:"christmas-tree"},{label:"Strava",url:"https://www.strava.com/athletes/4662170",icon:"bike"}]},"my-maps":{id:"my-maps",label:"Maps",icon:"map-pin-2",color:"#F48FB1",links:[{label:"NomadMania",url:"https://nomadmania.com/profile/73889",icon:"brand-google-maps"},{label:"Google Maps",url:"https://www.google.com/maps/d/u/0/edit?mid=1Wpors-fGHMZOYPx41nDtyF9vXOJcpsY",icon:"map-pin-2"},{label:"Earth",url:"https://earth.google.com/earth/d/1WF5_9NDew9IB5xkTqXPpm9e9n8JM0a3H",icon:"world-longitude"}]},"my-bucket":{id:"my-bucket",label:"Bucket List",icon:"checklist",color:"#F48FB1",links:[{label:"50 Things",url:"https://bucketlistjourney.net/my-bucket-list",icon:"checklist"}]},"cloud-portal":{id:"cloud-portal",label:"Cloud Portal",icon:"settings",color:"#F48FB1",links:[{label:"Portal",url:"https://diegonmarcos.github.io/cloud",icon:"settings"}]},"ai-tools":{id:"ai-tools",label:"AI",icon:"robot",color:"#F48FB1",links:[{label:"Chat Multi-Model",url:"https://diegonmarcos.github.io/cloud/products.html",icon:"robot"},{label:"WebIDE",url:"https://diegonmarcos.github.io/cloud/products.html",icon:"device-desktop"}]},"inbox-tools":{id:"inbox-tools",label:"Inbox",icon:"mail",color:"#F48FB1",links:[{label:"Mail&Cal",url:"https://diegonmarcos.github.io/mymail",icon:"mail"},{label:"MyFeed",url:"https://diegonmarcos.github.io/myfeed",icon:"file-stack"}]},"productivity-tools":{id:"productivity-tools",label:"Productivity",icon:"file-stack",color:"#F48FB1",links:[{label:"Drive&Suite",url:"https://diegonmarcos.github.io/mydrive",icon:"file-stack"},{label:"JSON Vision",url:"https://diegonmarcos.github.io/json-vision",icon:"database"}]},"dev-tools":{id:"dev-tools",label:"DEV",icon:"git-branch",color:"#F48FB1",links:[{label:"API Endpoints",url:"https://diegonmarcos.github.io/cloud/api",icon:"git-branch"},{label:"MCP Tools",url:"https://diegonmarcos.github.io/cloud/mcp",icon:"settings"}]},"health-tools":{id:"health-tools",label:"Health",icon:"heart",color:"#F48FB1",links:[{label:"Feed Yourself",url:"https://diegonmarcos.github.io/feed_yourself",icon:"brain"},{label:"Health Tracker",url:"https://diegonmarcos.github.io/health_tracker",icon:"heart"}]},"finance-tools":{id:"finance-tools",label:"Finance",icon:"database",color:"#F48FB1",links:[{label:"Market Watch",url:"https://diegonmarcos.github.io/market_watch",icon:"database"},{label:"Central Bank",url:"https://diegonmarcos.github.io/central_bank",icon:"database"}]},"content-tools":{id:"content-tools",label:"Content",icon:"map-pin-2",color:"#F48FB1",links:[{label:"MyMaps",url:"https://diegonmarcos.github.io/mymaps",icon:"map-pin-2"}]},games:{id:"games",label:"Games",icon:"device-gamepad",color:"#F48FB1",links:[{label:"MyGames",url:"https://diegonmarcos.github.io/mygames",icon:"device-gamepad"}]},video:{id:"video",label:"Video",icon:"brand-youtube",color:"#F48FB1",links:[{label:"MyVideos",url:"https://diegonmarcos.github.io/myvideos",icon:"video"},{label:"MyMovies",url:"https://diegonmarcos.github.io/mymovies/",icon:"brand-youtube"}]},audio:{id:"audio",label:"Audio",icon:"headphones",color:"#F48FB1",links:[{label:"MyMusic",url:"https://diegonmarcos.github.io/mymusic/",icon:"headphones"}]}}};async function we(){return Promise.resolve(ye)}function Ee(e){let t=[],o=[],n=new Map,i=xe(e.root,0,null);t.push(i),n.set(i.id,i);function r(a,c,h){c&&c.forEach(u=>{let g=e.nodes[u];if(!g){console.warn(`Node not found: ${u}`);return}let b=xe(g,h,a);t.push(b),n.set(b.id,b),a.children.push(b),o.push({source:a,target:b,highlighted:!1,opacity:1}),r(b,g.children,h+1)})}return r(i,e.root.children,1),{nodes:t,edges:o}}function xe(e,t,o){let n=L.visual,i=Math.min(t,n.nodeRadiusByDepth.length-1);return{id:e.id,label:e.label,fullLabel:e.fullLabel,icon:e.icon,color:e.color,depth:t,parent:o,children:[],links:e.links||[],x:0,y:0,vx:0,vy:0,targetX:0,targetY:0,radius:n.nodeRadiusByDepth[i],opacity:n.opacityByDepth[i],glowIntensity:n.glowIntensityByDepth[i],highlighted:!1,hovered:!1,focused:!1,breathePhase:Math.random()*Math.PI*2,breatheScale:1}}function st(e){let t=[],o=e.parent;for(;o;)t.push(o),o=o.parent;return t}function dt(e){let t=[];function o(n){n.children.forEach(i=>{t.push(i),o(i)})}return o(e),t}function D(e,t,o){if(!o){e.forEach(a=>{a.highlighted=!1,a.opacity=L.visual.opacityByDepth[Math.min(a.depth,L.visual.opacityByDepth.length-1)]}),t.forEach(a=>{a.highlighted=!1,a.opacity=1});return}let n=new Set(st(o)),i=new Set(dt(o)),r=new Set([o,...n,...i]);e.forEach(a=>{a.highlighted=r.has(a),a.highlighted?a.opacity=L.visual.opacityByDepth[Math.min(a.depth,L.visual.opacityByDepth.length-1)]:a.opacity=.15}),t.forEach(a=>{a.highlighted=r.has(a.source)&&r.has(a.target),a.opacity=a.highlighted?1:.1})}function V(e=0,t=1){return Math.random()*(t-e)+e}function ke(e,t,o,n,i){let r=e-o,a=t-n;return r*r+a*a<=i*i}function ut(e){e=e.replace(/^#/,""),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);let t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255,a:1}}function ht(e){return`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}function y(e,t){if(e.startsWith("rgba"))return e.replace(/[\d.]+\)$/,`${t})`);if(e.startsWith("rgb("))return e.replace("rgb(","rgba(").replace(")",`, ${t})`);let o=ut(e);return o.a=t,ht(o)}function Me(e,t,o,n,i,r,a=1){let c=e.createRadialGradient(t,o,n,t,o,i);return c.addColorStop(0,y(r,.4*a)),c.addColorStop(.5,y(r,.15*a)),c.addColorStop(1,"transparent"),c}function Se(e,t,o,n,i,r=1){let a=e.createRadialGradient(t,o-n*.3,0,t,o,n);return a.addColorStop(0,y("#ffffff",.18*r)),a.addColorStop(.4,y(i,.12*r)),a.addColorStop(.8,y(i,.2*r)),a.addColorStop(1,y(i,.25*r)),a}var O=[],f=null,E=null;function Ne(e){if(f=e,E=f.getContext("2d"),!E){console.error("Failed to get 2D context for particle canvas");return}Ce(),pt(),window.addEventListener("resize",Ce)}function Ce(){f&&(f.width=window.innerWidth,f.height=window.innerHeight)}function pt(){O=[];let e=L.visual.particleCount;for(let t=0;t<e;t++)O.push(gt())}function gt(){let e=f?.width||window.innerWidth,t=f?.height||window.innerHeight;return{x:V(0,e),y:V(0,t),vx:V(-.2,.2),vy:V(-.2,.2),radius:V(.5,2),opacity:V(.2,.6),twinklePhase:V(0,Math.PI*2),twinkleSpeed:V(.01,.03)}}function Le(e){let t=f?.width||window.innerWidth,o=f?.height||window.innerHeight;O.forEach(n=>{n.x+=n.vx*e*.05,n.y+=n.vy*e*.05,n.x<0&&(n.x=t),n.x>t&&(n.x=0),n.y<0&&(n.y=o),n.y>o&&(n.y=0),n.twinklePhase+=n.twinkleSpeed*e*.1})}function Ge(){if(!E||!f)return;let e=E.createRadialGradient(f.width/2,f.height/2,0,f.width/2,f.height/2,Math.max(f.width,f.height)*.7);e.addColorStop(0,te.voidBgLight),e.addColorStop(1,te.voidBg),E.fillStyle=e,E.fillRect(0,0,f.width,f.height),O.forEach(t=>{let o=.5+.5*Math.sin(t.twinklePhase),n=t.opacity*o;if(E.beginPath(),E.arc(t.x,t.y,t.radius,0,Math.PI*2),E.fillStyle=y("#ffffff",n),E.fill(),t.radius>1.2){let i=E.createRadialGradient(t.x,t.y,0,t.x,t.y,t.radius*4);i.addColorStop(0,y("#ffffff",n*.3)),i.addColorStop(1,"transparent"),E.fillStyle=i,E.beginPath(),E.arc(t.x,t.y,t.radius*4,0,Math.PI*2),E.fill()}})}var k=null,s=null,Be=new Map;function Ve(e){if(k=e,s=k.getContext("2d"),!s){console.error("Failed to get 2D context for graph canvas");return}Pe(),window.addEventListener("resize",Pe)}function Pe(){k&&(k.width=window.innerWidth,k.height=window.innerHeight)}function z(){return{width:k?.width||window.innerWidth,height:k?.height||window.innerHeight}}function Fe(e,t,o,n){!s||!k||(s.clearRect(0,0,k.width,k.height),s.save(),s.translate(k.width/2+o.x,k.height/2+o.y),s.scale(o.scale,o.scale),s.translate(-k.width/2,-k.height/2),ft(t),mt(t),e.forEach(i=>bt(i,n)),e.forEach(i=>yt(i,o.scale)),s.restore())}function mt(e){s&&e.forEach(t=>{let{source:o,target:n,highlighted:i,opacity:r}=t,a=(o.x+n.x)/2,c=(o.y+n.y)/2,h=n.x-o.x,u=n.y-o.y,g=Math.sqrt(h*h+u*u),b=g*.15,w=-u/g,P=h/g,M=a+w*b,p=c+P*b,x=s.createLinearGradient(o.x,o.y,n.x,n.y),C=i?.7:.25,N=i?.7:.25;x.addColorStop(0,y(o.color,C*r*o.opacity)),x.addColorStop(1,y(n.color,N*r*n.opacity)),s.strokeStyle=x,s.lineWidth=i?2:1,s.lineCap="round",s.beginPath(),s.moveTo(o.x,o.y),s.quadraticCurveTo(M,p,n.x,n.y),s.stroke()})}function ft(e){if(!s)return;e.filter(o=>o.highlighted).forEach(o=>{let{source:n,target:i}=o,r=(n.x+i.x)/2,a=(n.y+i.y)/2,c=i.x-n.x,h=i.y-n.y,u=Math.sqrt(c*c+h*h),g=u*.15,b=-h/u,w=c/u,P=r+b*g,M=a+w*g;s.save(),s.filter="blur(6px)";let p=s.createLinearGradient(n.x,n.y,i.x,i.y);p.addColorStop(0,y(n.color,.4)),p.addColorStop(1,y(i.color,.4)),s.strokeStyle=p,s.lineWidth=4,s.lineCap="round",s.beginPath(),s.moveTo(n.x,n.y),s.quadraticCurveTo(P,M,i.x,i.y),s.stroke(),s.restore()})}function bt(e,t){if(!s)return;let{x:o,y:n,radius:i,color:r,opacity:a,glowIntensity:c,highlighted:h,hovered:u,breathePhase:g}=e,b=1+.02*Math.sin(t*.001+g),w=i*b,P=u?1:a,M=h||u?c*1.5:c,p=w*(2+M*.5),x=Me(s,o,n,w*.5,p,r,P*M);s.fillStyle=x,s.beginPath(),s.arc(o,n,p,0,Math.PI*2),s.fill();let C=Se(s,o,n,w,r,P);s.fillStyle=C,s.beginPath(),s.arc(o,n,w,0,Math.PI*2),s.fill(),s.strokeStyle=y("#ffffff",(u?.35:.2)*P),s.lineWidth=u?1.5:1,s.stroke(),w>14&&vt(e.icon,o,n,w*.5,P)}function vt(e,t,o,n,i){if(!s)return;let r=`public/icons/${e}.svg`,a=Be.get(r);a||(a=new Image,a.src=r,Be.set(r,a)),a.complete&&a.naturalWidth>0&&(s.save(),s.globalAlpha=i*.9,s.filter="brightness(0) invert(1)",s.drawImage(a,t-n,o-n,n*2,n*2),s.restore())}function yt(e,t){if(!s||!(e.depth<=1||e.hovered||e.highlighted))return;let n=e.depth===0?14:11,i=Math.max(10,n/Math.sqrt(t));s.font=`500 ${i}px Inter, sans-serif`,s.textAlign="center",s.textBaseline="top";let r=e.fullLabel||e.label,a=e.y+e.radius*e.breatheScale+8;s.fillStyle=y(e.color,.6*e.opacity),s.filter="blur(4px)",s.fillText(r,e.x,a),s.filter="none",s.fillStyle=y("#ffffff",e.opacity),s.fillText(r,e.x,a)}function Ie(e,t,o){let n=e.find(i=>i.depth===0);n&&(n.x=n.targetX=t,n.y=n.targetY=o,Te(n,t,o))}function Te(e,t,o){let n=e.children.length;if(n===0)return;let i=v.levelSpacing*(e.depth+1),r=Math.PI*1.2,a=-Math.PI/2-r/2;e.children.forEach((c,h)=>{let u=n>1?r/(n-1):0,g=a+(n>1?h*u:r/2);c.x=c.targetX=t+Math.cos(g)*i,c.y=c.targetY=o+Math.sin(g)*i,Te(c,c.x,c.y)})}function De(){return{x:0,y:0,scale:v.defaultZoom,targetX:0,targetY:0,targetScale:v.defaultZoom}}function Ye(e){e.x+=(e.targetX-e.x)*v.panEasing,e.y+=(e.targetY-e.y)*v.panEasing,e.scale+=(e.targetScale-e.scale)*v.panEasing,e.scale=Math.max(v.minZoom,Math.min(v.maxZoom,e.scale)),e.targetScale=Math.max(v.minZoom,Math.min(v.maxZoom,e.targetScale))}function _(e,t,o,n,i){let r=n/2,a=i/2;return{x:(e-r-o.x)/o.scale+r,y:(t-a-o.y)/o.scale+a}}function Xe(e,t,o,n){let i=o/2,r=n/2;t.targetX=i-e.x,t.targetY=r-e.y,t.targetScale=Math.min(1.5,v.maxZoom)}function H(e){e.targetX=0,e.targetY=0,e.targetScale=v.defaultZoom}function He(e){e.targetScale=Math.min(e.targetScale*1.3,v.maxZoom)}function Re(e){e.targetScale=Math.max(e.targetScale/1.3,v.minZoom)}function ne(e,t,o,n,i,r){let a=e.targetScale,c=Math.max(v.minZoom,Math.min(v.maxZoom,a*(1-n*.001))),h=i/2,u=r/2,g=t-h,b=o-u,w=c-a;e.targetX-=(g-e.targetX)*(w/a),e.targetY-=(b-e.targetY)*(w/a),e.targetScale=c}var oe=0;function Ae(e,t,o,n,i){let r=L.physics,a=Math.min(o,32)/16;oe+=r.ambientFrequency*o,e.forEach(c=>{if(c.dragging)return;let h=0,u=0,g=n-c.x,b=i-c.y;h+=g*r.centerGravity,u+=b*r.centerGravity,e.forEach(p=>{if(p===c)return;let x=c.x-p.x,C=c.y-p.y,N=Math.sqrt(x*x+C*C)||1,W=c.radius+p.radius+20;if(N<W*3){let ee=r.repulsion/(N*N);h+=x/N*ee,u+=C/N*ee}}),t.forEach(p=>{let x=null;if(p.source===c&&(x=p.target),p.target===c&&(x=p.source),!x)return;let C=x.x-c.x,N=x.y-c.y,W=Math.sqrt(C*C+N*N)||1,ct=100+Math.abs(c.depth-x.depth)*60,ve=(W-ct)*r.attraction;h+=C/W*ve,u+=N/W*ve});let w=Math.sin(oe+c.breathePhase)*r.ambientForce,P=Math.cos(oe*1.3+c.breathePhase*.7)*r.ambientForce;h+=w,u+=P,c.vx+=h*a,c.vy+=u*a,c.vx*=r.damping,c.vy*=r.damping;let M=Math.sqrt(c.vx*c.vx+c.vy*c.vy);if(M>r.maxVelocity&&(c.vx=c.vx/M*r.maxVelocity,c.vy=c.vy/M*r.maxVelocity),M<r.minVelocity&&M>0){let p=r.minVelocity/M;c.vx*=p*.5,c.vy*=p*.5}c.x+=c.vx*a,c.y+=c.vy*a})}function We(e,t){let o=L.visual.breatheDuration;e.forEach(n=>{let i=.03*n.glowIntensity;n.breatheScale=1+i*Math.sin(t/o*Math.PI*2+n.breathePhase)})}var l={hoveredNode:null,focusedNode:null,draggingNode:null,isPanning:!1,panStartX:0,panStartY:0,lastMouseX:0,lastMouseY:0},d=null,F=[],Y=[],m=null,ie=null,re=null;function ze(e,t,o,n){d=e,F=t,Y=o,m=n,d.addEventListener("mousemove",xt),d.addEventListener("mousedown",wt),d.addEventListener("mouseup",Et),d.addEventListener("mouseleave",kt),d.addEventListener("wheel",Mt,{passive:!1}),d.addEventListener("click",St),d.addEventListener("dblclick",Ct),d.addEventListener("touchstart",Nt,{passive:!1}),d.addEventListener("touchmove",Lt,{passive:!1}),d.addEventListener("touchend",Gt)}function $e(e,t){ie=e,re=t}function U(e,t){if(!d||!m)return null;let o=_(e,t,m,d.width,d.height);for(let n=F.length-1;n>=0;n--){let i=F[n],r=i.radius*1.2;if(ke(o.x,o.y,i.x,i.y,r))return i}return null}function xt(e){let t=d.getBoundingClientRect(),o=e.clientX-t.left,n=e.clientY-t.top;if(l.lastMouseX=o,l.lastMouseY=n,l.isPanning&&m){let r=o-l.panStartX,a=n-l.panStartY;m.targetX+=r,m.targetY+=a,l.panStartX=o,l.panStartY=n;return}if(l.draggingNode&&m&&d){let r=_(o,n,m,d.width,d.height);l.draggingNode.x=r.x,l.draggingNode.y=r.y,l.draggingNode.vx=0,l.draggingNode.vy=0;return}let i=U(o,n);l.hoveredNode&&l.hoveredNode!==i&&(l.hoveredNode.hovered=!1),i?(i.hovered=!0,d.style.cursor="pointer",D(F,Y,i)):(d.style.cursor=l.isPanning?"grabbing":"grab",l.focusedNode||D(F,Y,null)),l.hoveredNode=i}function wt(e){let t=d.getBoundingClientRect(),o=e.clientX-t.left,n=e.clientY-t.top,i=U(o,n);i?(l.draggingNode=i,i.dragging=!0,d.style.cursor="grabbing"):(l.isPanning=!0,l.panStartX=o,l.panStartY=n,d.style.cursor="grabbing")}function Et(){l.draggingNode&&(l.draggingNode.dragging=!1,l.draggingNode=null),l.isPanning=!1,d.style.cursor=l.hoveredNode?"pointer":"grab"}function kt(){l.hoveredNode&&(l.hoveredNode.hovered=!1,l.focusedNode||D(F,Y,null)),l.hoveredNode=null,l.isPanning=!1,l.draggingNode&&(l.draggingNode.dragging=!1,l.draggingNode=null)}function Mt(e){if(e.preventDefault(),!m||!d)return;let t=d.getBoundingClientRect(),o=e.clientX-t.left,n=e.clientY-t.top;ne(m,o,n,e.deltaY,d.width,d.height)}function St(e){let t=d.getBoundingClientRect(),o=e.clientX-t.left,n=e.clientY-t.top,i=U(o,n);i?ie&&ie(i):re&&re()}function Ct(){m&&(H(m),l.focusedNode=null,D(F,Y,null))}var ae=0;function Nt(e){if(e.preventDefault(),e.touches.length===1){let t=e.touches[0],o=d.getBoundingClientRect(),n=t.clientX-o.left,i=t.clientY-o.top;l.lastMouseX=n,l.lastMouseY=i;let r=U(n,i);r?(l.draggingNode=r,r.dragging=!0):(l.isPanning=!0,l.panStartX=n,l.panStartY=i)}else if(e.touches.length===2){let t=e.touches[0],o=e.touches[1];ae=Math.hypot(o.clientX-t.clientX,o.clientY-t.clientY)}}function Lt(e){if(e.preventDefault(),e.touches.length===1&&(l.isPanning||l.draggingNode)){let t=e.touches[0],o=d.getBoundingClientRect(),n=t.clientX-o.left,i=t.clientY-o.top;if(l.isPanning&&m){let r=n-l.panStartX,a=i-l.panStartY;m.targetX+=r,m.targetY+=a,l.panStartX=n,l.panStartY=i}else if(l.draggingNode&&m&&d){let r=_(n,i,m,d.width,d.height);l.draggingNode.x=r.x,l.draggingNode.y=r.y}l.lastMouseX=n,l.lastMouseY=i}else if(e.touches.length===2&&m&&d){let t=e.touches[0],o=e.touches[1],n=Math.hypot(o.clientX-t.clientX,o.clientY-t.clientY),i={x:(t.clientX+o.clientX)/2,y:(t.clientY+o.clientY)/2},r=d.getBoundingClientRect(),a=(ae-n)*2;ne(m,i.x-r.left,i.y-r.top,a,d.width,d.height),ae=n}}function Gt(){l.draggingNode&&(l.draggingNode.dragging=!1,l.draggingNode=null),l.isPanning=!1}function Ze(){return l.hoveredNode}function le(e){l.focusedNode=e,e&&D(F,Y,e)}function ce(){l.focusedNode=null,D(F,Y,null)}var G=null,se=null,$=null,B=null,de=null,J=null,qe=null,R=null,Oe=null,_e=null,Ue=null,Z=null,T=null,S=null,he=0,pe=0,X=null;function Je(e,t,o){S=e,he=t,pe=o,G=document.getElementById("tooltip"),se=document.getElementById("tooltip-title"),$=document.getElementById("tooltip-subtitle"),B=document.getElementById("link-panel"),de=document.getElementById("link-panel-title"),J=document.getElementById("link-panel-links"),qe=document.getElementById("link-panel-close"),R=document.getElementById("btn-back"),Oe=document.getElementById("btn-reset"),_e=document.getElementById("btn-zoom-in"),Ue=document.getElementById("btn-zoom-out"),Z=document.getElementById("loading"),T=document.createElement("div"),T.className="panel-backdrop",document.getElementById("ui-overlay")?.appendChild(T),qe?.addEventListener("click",ue),T?.addEventListener("click",ue),Oe?.addEventListener("click",nt),_e?.addEventListener("click",ot),Ue?.addEventListener("click",it),R?.addEventListener("click",Ft),document.addEventListener("keydown",It)}function Ke(e){X=e}function je(e,t){he=e,pe=t}function Qe(){Z&&(Z.hidden=!1)}function ge(){Z&&(Z.hidden=!0)}function et(e,t,o){if(!G||!se||!$)return;se.textContent=e.fullLabel||e.label,e.links.length>0?$.textContent=`${e.links.length} link${e.links.length>1?"s":""}`:e.children.length>0?$.textContent=`${e.children.length} item${e.children.length>1?"s":""}`:$.textContent="";let n=15,i=t+n,r=o+n;i+200>window.innerWidth&&(i=t-200-n),r+100>window.innerHeight&&(r=o-100-n),G.style.left=`${i}px`,G.style.top=`${r}px`,G.hidden=!1,G.classList.add("visible")}function tt(){G&&(G.classList.remove("visible"),setTimeout(()=>{G&&!G.classList.contains("visible")&&(G.hidden=!0)},150))}function Bt(e){!B||!de||!J||!T||(de.textContent=e.fullLabel||e.label,J.innerHTML="",e.links.forEach(t=>{let o=Pt(t);J.appendChild(o)}),T.classList.add("visible"),B.hidden=!1,requestAnimationFrame(()=>{B?.classList.add("visible")}))}function ue(){!B||!T||(B.classList.remove("visible"),T.classList.remove("visible"),setTimeout(()=>{B&&!B.classList.contains("visible")&&(B.hidden=!0)},300))}function Pt(e){let t=document.createElement("a");return t.className="link-card",t.href=e.url,t.target="_blank",t.rel="noopener noreferrer",e.download&&(t.download=""),t.innerHTML=`
    <div class="link-icon">
      <img src="public/icons/${e.icon}.svg" alt="${e.label}">
    </div>
    <span class="link-label">${e.label}</span>
  `,t}function Vt(){R&&(R.hidden=!1)}function q(){R&&(R.hidden=!0)}function nt(){S&&(H(S),q(),X&&X())}function ot(){S&&He(S)}function it(){S&&Re(S)}function Ft(){S&&(H(S),q(),X&&X())}function It(e){e.key==="Escape"&&(B&&!B.hidden?ue():S&&(H(S),q(),X&&X())),(e.key==="+"||e.key==="=")&&ot(),(e.key==="-"||e.key==="_")&&it(),(e.key==="0"||e.key==="r")&&nt()}function me(e){S&&(Xe(e,S,he,pe),Vt(),e.links.length>0&&Bt(e))}var A=[],j=[],I,be=0,Q=null,fe=null,K=null;async function rt(){try{if(Qe(),fe=document.getElementById("bg-canvas"),K=document.getElementById("graph-canvas"),!fe||!K)throw new Error("Canvas elements not found");Ne(fe),Ve(K);let e=await we(),t=Ee(e);A=t.nodes,j=t.edges,I=De();let{width:o,height:n}=z();Ie(A,o/2,n/2),ze(K,A,j,I),$e(Tt,Dt),Je(I,o,n),Ke(Yt),ge(),be=performance.now(),Q=requestAnimationFrame(at)}catch(e){console.error("Failed to initialize:",e),ge(),alert("Failed to load mindmap data. Please refresh the page.")}}function at(e){let t=e-be;be=e,Le(t),Ye(I);let{width:o,height:n}=z();Ae(A,j,t,o/2,n/2),We(A,e),Ge(),Fe(A,j,I,e),Xt(),Q=requestAnimationFrame(at)}function Tt(e){e.links.length>0?(me(e),le(e)):e.children.length>0&&(me(e),le(e))}function Dt(){ce(),q()}function Yt(){ce()}function Xt(){let e=Ze();if(e){let{width:t,height:o}=z(),n=t/2,i=o/2,r=(e.x-n)*I.scale+n+I.x,a=(e.y-i)*I.scale+i+I.y;et(e,r,a)}else tt()}function lt(){let{width:e,height:t}=z();je(e,t)}window.addEventListener("resize",lt);function Ht(){Q!==null&&cancelAnimationFrame(Q),window.removeEventListener("resize",lt)}window.addEventListener("beforeunload",Ht);document.readyState==="loading"?document.addEventListener("DOMContentLoaded",rt):rt();})();
