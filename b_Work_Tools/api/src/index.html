<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1400, shrink-to-fit=yes">
    <title>Cloud Control API Documentation</title>

    <!-- Swagger UI CSS -->
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui.css">

    <style>
        :root {
            --bg-primary: #0f1117;
            --bg-secondary: #161922;
            --bg-tertiary: #1e2230;
            --bg-card: #1a1e2e;
            --border: #2a2f42;
            --text-primary: #c8cdd8;
            --text-secondary: #7e8694;
            --text-muted: #525a68;
            --accent: #6b72a8;
            --accent-light: #8b92bf;
            --accent-dim: rgba(107,114,168,0.1);
            --green: #5a8a7a;
            --blue: #5a7a9e;
            --orange: #8a7a5a;
            --red: #9e5a5a;
            --yellow: #8a8060;
        }

        body {
            margin: 0; padding: 0; background: var(--bg-primary); color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        .api-header {
            background: linear-gradient(135deg, #1a1d2e 0%, #1e1a2e 100%);
            color: var(--text-primary); padding: 2rem; text-align: center;
            border-bottom: 1px solid var(--border);
        }
        .api-header h1 { margin: 0 0 0.5rem 0; font-size: 2.5rem; font-weight: 700; }
        .api-header p { margin: 0; font-size: 1.1rem; opacity: 0.85; }
        .api-header .version {
            display: inline-block; background: rgba(255,255,255,0.1);
            padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.9rem; margin-top: 0.5rem;
        }
        .api-badge {
            display: inline-block; background: rgba(255,255,255,0.08);
            padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem; margin-top: 0.5rem;
        }

        .api-links {
            background: var(--bg-secondary); padding: 1rem 2rem;
            border-bottom: 1px solid var(--border);
            display: flex; gap: 1.5rem; flex-wrap: wrap; align-items: center;
        }
        .api-links strong { color: var(--text-secondary); }
        .api-links a { color: var(--accent-light); text-decoration: none; font-weight: 500; transition: color 0.2s; }
        .api-links a:hover { color: #c7d2fe; text-decoration: underline; }
        .api-links .separator { color: var(--border); }

        .quick-links {
            background: var(--bg-tertiary); padding: 1.5rem 2rem; margin: 2rem;
            border-radius: 8px; border-left: 4px solid var(--accent);
        }
        .quick-links h3 { margin: 0 0 1rem 0; color: var(--text-primary); }
        .quick-links ul {
            list-style: none; padding: 0; margin: 0;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;
        }
        .quick-links li { display: flex; align-items: center; color: var(--text-secondary); }
        .quick-links li::before { content: "\2192"; color: var(--accent); font-weight: bold; margin-right: 0.5rem; }
        .quick-links code {
            background: var(--bg-card); padding: 0.25rem 0.5rem; border-radius: 4px;
            font-family: 'Courier New', monospace; font-size: 0.9rem; color: var(--accent-light);
            border: 1px solid var(--border);
        }

        #swagger-ui { max-width: 1400px; margin: 0 auto; }

        .api-footer {
            background: var(--bg-secondary); color: var(--text-secondary); text-align: center;
            padding: 2rem; margin-top: 3rem; border-top: 1px solid var(--border);
        }
        .api-footer a { color: var(--accent-light); text-decoration: none; }
        .api-footer a:hover { text-decoration: underline; }

        /* ========= SWAGGER UI DARK — NUCLEAR OVERRIDES ========= */

        /* Kill ALL default white/light backgrounds */
        .swagger-ui,
        .swagger-ui .wrapper,
        .swagger-ui .opblock-body,
        .swagger-ui .opblock-section-header,
        .swagger-ui .responses-wrapper,
        .swagger-ui .responses-inner,
        .swagger-ui .response,
        .swagger-ui .model-box,
        .swagger-ui section.models,
        .swagger-ui section.models .model-container,
        .swagger-ui .scheme-container { background: var(--bg-primary) !important; color: var(--text-primary) !important; }

        /* Topbar (API selector) */
        .swagger-ui .topbar { background: var(--bg-tertiary) !important; padding: 0.5rem 1rem; border-bottom: 1px solid var(--border); }
        .swagger-ui .topbar .topbar-wrapper .link { display: none; }
        .swagger-ui .topbar .topbar-wrapper { display: flex; align-items: center; }
        .swagger-ui .topbar .download-url-wrapper input,
        .swagger-ui .topbar .download-url-wrapper .select-label select,
        .swagger-ui .topbar select { background: var(--bg-primary) !important; color: var(--text-primary) !important; border: 1px solid var(--border) !important; }
        .swagger-ui .topbar .download-url-wrapper .select-label span { color: var(--text-secondary) !important; }
        .swagger-ui .topbar .download-url-wrapper .download-url-button { background: var(--bg-tertiary) !important; }

        /* Kill ALL bright/colored text — force muted */
        .swagger-ui,
        .swagger-ui p,
        .swagger-ui span,
        .swagger-ui label,
        .swagger-ui small,
        .swagger-ui h1, .swagger-ui h2, .swagger-ui h3, .swagger-ui h4, .swagger-ui h5, .swagger-ui h6,
        .swagger-ui .info .title,
        .swagger-ui .info .description p,
        .swagger-ui .info li,
        .swagger-ui .info table td,
        .swagger-ui .renderedMarkdown p,
        .swagger-ui .markdown p,
        .swagger-ui .opblock-tag,
        .swagger-ui .opblock-tag small,
        .swagger-ui .opblock .opblock-summary-description,
        .swagger-ui .opblock .opblock-summary-path,
        .swagger-ui .opblock .opblock-summary-path__deprecated,
        .swagger-ui .opblock-description-wrapper,
        .swagger-ui .opblock-description-wrapper p,
        .swagger-ui .opblock-external-docs-wrapper p,
        .swagger-ui .opblock-section-header h4,
        .swagger-ui .opblock-section-header label,
        .swagger-ui .parameter__name,
        .swagger-ui .parameter__type,
        .swagger-ui .parameter__in,
        .swagger-ui .response-col_status,
        .swagger-ui .response-col_description,
        .swagger-ui .response-col_links,
        .swagger-ui .responses-inner h4,
        .swagger-ui .responses-inner h5,
        .swagger-ui .responses-table .response-col_description__inner p,
        .swagger-ui .responses-table thead td.col_header,
        .swagger-ui .model,
        .swagger-ui .model-title,
        .swagger-ui .model .property,
        .swagger-ui .prop-type,
        .swagger-ui .prop-format,
        .swagger-ui .tab li,
        .swagger-ui .loading-container .loading::after,
        .swagger-ui table thead tr th,
        .swagger-ui table thead tr td,
        .swagger-ui table tbody tr td { color: var(--text-secondary) !important; }

        /* Slightly brighter for primary headings */
        .swagger-ui .info .title,
        .swagger-ui .opblock-tag,
        .swagger-ui .opblock .opblock-summary-path,
        .swagger-ui .opblock-section-header h4,
        .swagger-ui .parameter__name,
        .swagger-ui .response-col_status,
        .swagger-ui .responses-inner h4,
        .swagger-ui .model-title,
        .swagger-ui .tab li.active,
        .swagger-ui h1, .swagger-ui h2, .swagger-ui h3, .swagger-ui h4 { color: var(--text-primary) !important; }

        /* Links */
        .swagger-ui a,
        .swagger-ui .info a { color: var(--accent-light) !important; }

        /* SVG icons */
        .swagger-ui svg:not(.opblock-summary-method svg),
        .swagger-ui .expand-operation svg,
        .swagger-ui .expand-methods svg,
        .swagger-ui .opblock-tag svg { fill: var(--text-muted) !important; }

        /* Scheme container */
        .swagger-ui .scheme-container { border-bottom: 1px solid var(--border) !important; box-shadow: none !important; }
        .swagger-ui select { background: var(--bg-tertiary) !important; color: var(--text-primary) !important; border: 1px solid var(--border) !important; }

        /* Filter */
        .swagger-ui .filter .operation-filter-input { background: var(--bg-tertiary) !important; color: var(--text-primary) !important; border: 1px solid var(--border) !important; }

        /* Tag sections */
        .swagger-ui .opblock-tag-section { border: none !important; }
        .swagger-ui .opblock-tag { border-bottom: 1px solid var(--border) !important; }
        .swagger-ui .opblock-tag:hover { background: var(--bg-secondary) !important; }

        /* ALL operation blocks — uniform dark, no colored backgrounds */
        .swagger-ui .opblock { border: 1px solid var(--border) !important; background: var(--bg-secondary) !important; box-shadow: none !important; margin-bottom: 8px; }
        .swagger-ui .opblock .opblock-summary { border-bottom: 1px solid var(--border) !important; background: transparent !important; }

        /* Method badges — muted, low-saturation */
        .swagger-ui .opblock.opblock-get .opblock-summary-method { background: #2d4a5e !important; }
        .swagger-ui .opblock.opblock-post .opblock-summary-method { background: #2d4e44 !important; }
        .swagger-ui .opblock.opblock-put .opblock-summary-method { background: #4e4430 !important; }
        .swagger-ui .opblock.opblock-delete .opblock-summary-method { background: #5e2d2d !important; }
        .swagger-ui .opblock.opblock-patch .opblock-summary-method { background: #3a3d5e !important; }
        .swagger-ui .opblock.opblock-options .opblock-summary-method { background: #3a4a4a !important; }
        .swagger-ui .opblock.opblock-head .opblock-summary-method { background: #3a4a4a !important; }
        .swagger-ui .opblock-summary-method { color: var(--text-primary) !important; }

        /* Expanded operation body */
        .swagger-ui .opblock-body { background: var(--bg-primary) !important; }
        .swagger-ui .opblock-section-header { background: var(--bg-tertiary) !important; border-bottom: 1px solid var(--border) !important; box-shadow: none !important; }

        /* Code blocks / pre */
        .swagger-ui pre,
        .swagger-ui pre.microlight,
        .swagger-ui .microlight,
        .swagger-ui .highlight-code > .microlight,
        .swagger-ui .opblock-body pre.microlight,
        .swagger-ui .example.microlight,
        .swagger-ui code { background: #0a0c10 !important; color: var(--text-secondary) !important; border: 1px solid var(--border) !important; border-radius: 4px; }

        /* Tables — kill all borders/colors */
        .swagger-ui table thead tr th,
        .swagger-ui table thead tr td { border-bottom: 1px solid var(--border) !important; }
        .swagger-ui table tbody tr td { border-bottom: 1px solid rgba(42,47,66,0.5) !important; }
        .swagger-ui .parameter__name.required::after { color: #9e5a5a !important; }

        /* ALL inputs/textareas */
        .swagger-ui input[type=text],
        .swagger-ui input[type=password],
        .swagger-ui input[type=search],
        .swagger-ui input[type=email],
        .swagger-ui input[type=file],
        .swagger-ui textarea { background: #0a0c10 !important; color: var(--text-primary) !important; border: 1px solid var(--border) !important; }

        /* Buttons */
        .swagger-ui .btn { border-radius: 4px !important; }
        .swagger-ui .btn.execute { background: #3a3d5e !important; border-color: #3a3d5e !important; color: var(--text-primary) !important; }
        .swagger-ui .btn.execute:hover { background: #464a6e !important; border-color: #464a6e !important; }
        .swagger-ui .btn.cancel { background: transparent !important; border-color: #5e3a3a !important; color: #9e5a5a !important; }
        .swagger-ui .btn.authorize { background: transparent !important; border-color: #3a5e4a !important; color: #5a8a7a !important; }
        .swagger-ui .btn.authorize svg { fill: #5a8a7a !important; }
        .swagger-ui .try-out__btn { border-color: var(--accent) !important; color: var(--accent) !important; background: transparent !important; }
        .swagger-ui .try-out__btn:hover { background: var(--accent-dim) !important; }

        /* Response accept message */
        .swagger-ui .response-control-media-type__accept-message { color: #5a8a7a !important; }
        .swagger-ui .response-control-media-type--accept-controller select { background: var(--bg-tertiary) !important; color: var(--text-primary) !important; border-color: var(--border) !important; }

        /* Models section */
        .swagger-ui section.models { border: 1px solid var(--border) !important; }
        .swagger-ui section.models h4 { border-bottom: 1px solid var(--border) !important; }
        .swagger-ui section.models .model-box { background: var(--bg-secondary) !important; }
        .swagger-ui .model .property.primitive { color: var(--accent) !important; }

        /* Authorization dialog */
        .swagger-ui .dialog-ux .modal-ux { background: var(--bg-secondary) !important; border: 1px solid var(--border) !important; }
        .swagger-ui .dialog-ux .modal-ux-header { border-bottom: 1px solid var(--border) !important; }
        .swagger-ui .dialog-ux .backdrop-ux { background: rgba(0,0,0,0.8) !important; }

        /* Copy / download */
        .swagger-ui .copy-to-clipboard { background: var(--bg-tertiary) !important; border: 1px solid var(--border) !important; }
        .swagger-ui .copy-to-clipboard button { background: none !important; }
        .swagger-ui .download-contents { background: var(--bg-tertiary) !important; color: var(--accent) !important; border: 1px solid var(--border) !important; }

        /* Scrollbar */
        .swagger-ui ::-webkit-scrollbar { width: 6px; height: 6px; }
        .swagger-ui ::-webkit-scrollbar-track { background: var(--bg-primary); }
        .swagger-ui ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

        /* Markdown code */
        .swagger-ui .markdown code { background: #0a0c10 !important; color: var(--accent) !important; padding: 2px 6px; border-radius: 3px; }

        /* NUCLEAR: kill any remaining white/light backgrounds on ANY child */
        .swagger-ui .opblock .opblock-body > div,
        .swagger-ui .opblock .opblock-body .tab-header,
        .swagger-ui .opblock .responses-table,
        .swagger-ui .opblock .responses-table tbody tr,
        .swagger-ui .opblock .response-col_description__inner,
        .swagger-ui .opblock .parameters-container,
        .swagger-ui .opblock .parameter__type,
        .swagger-ui .wrapper { background: transparent !important; }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="api-header">
        <h1>&#9729;&#65039; Cloud Control API</h1>
        <p>RESTful API for Cloud Infrastructure Monitoring & Management</p>
        <span class="version">v1.0.0</span>
        <span class="api-badge">Live spec &mdash; auto-generated from Rust API</span>
    </div>

    <!-- Links -->
    <div class="api-links">
        <strong>Quick Access:</strong>
        <a href="https://cloud.diegonmarcos.com" target="_blank">Dashboard</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/rust/health" target="_blank">Rust API Health</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/api/health" target="_blank">Flask API Health</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/rust/api-docs/openapi.json" target="_blank">Rust Spec (JSON)</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/apispec.json" target="_blank">Flask Spec (JSON)</a>
        <span class="separator">|</span>
        <a href="cloud_central_api.md" target="_blank">Central API (MD)</a>
        <a href="cloud_ondemand_api.md" target="_blank">On-Demand API (MD)</a>
    </div>

    <!-- Quick Links -->
    <div class="quick-links">
        <h3>Key Endpoints</h3>
        <ul>
            <li><strong>Rust Health:</strong> <code>GET /rust/health</code></li>
            <li><strong>Flask Health:</strong> <code>GET /api/health</code></li>
            <li><strong>VM Status:</strong> <code>GET /rust/vms/{vm_id}/status</code></li>
            <li><strong>Containers:</strong> <code>GET /rust/vms/{vm_id}/containers</code></li>
            <li><strong>Dashboard:</strong> <code>GET /api/dashboard/summary</code></li>
            <li><strong>Wake VM:</strong> <code>POST /rust/wake/trigger</code></li>
            <li><strong>VM Control:</strong> <code>POST /rust/vms/{vm_id}/start</code></li>
            <li><strong>Flex Wake:</strong> <code>POST /rust/flex/wake-all</code></li>
        </ul>
    </div>

    <!-- Swagger UI -->
    <div id="swagger-ui"></div>

    <!-- Footer -->
    <div class="api-footer">
        <p><strong>Cloud Control API</strong> &copy; 2025 Diego Nepomuceno Marcos</p>
        <p>
            <a href="https://diegonmarcos.com" target="_blank">diegonmarcos.com</a> |
            <a href="https://github.com/diegonmarcos" target="_blank">GitHub</a>
        </p>
        <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
            Built with <a href="https://swagger.io/tools/swagger-ui/" target="_blank">Swagger UI</a>
        </p>
    </div>

    <!-- Swagger UI Bundle -->
    <script src="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui-standalone-preset.js"></script>

    <script>
        // Initialize Swagger UI with both APIs
        window.ui = SwaggerUIBundle({
            urls: [
                { url: 'https://api.diegonmarcos.com/rust/api-docs/openapi.json', name: 'Rust API (Infrastructure)' },
                { url: 'https://api.diegonmarcos.com/apispec.json', name: 'Flask API (Central)' }
            ],
            "urls.primaryName": "Rust API (Infrastructure)",
            dom_id: '#swagger-ui',
            deepLinking: true,
            presets: [
                SwaggerUIBundle.presets.apis,
                SwaggerUIStandalonePreset
            ],
            plugins: [
                SwaggerUIBundle.plugins.DownloadUrl
            ],
            layout: "StandaloneLayout",
            defaultModelsExpandDepth: 1,
            defaultModelExpandDepth: 1,
            docExpansion: 'list',
            filter: true,
            syntaxHighlight: {
                activate: true,
                theme: 'tomorrow-night'
            },
            tryItOutEnabled: true,
            requestSnippetsEnabled: true,
            requestSnippets: {
                generators: {
                    curl_bash: {
                        title: "cURL (bash)",
                        syntax: "bash"
                    },
                    curl_powershell: {
                        title: "cURL (PowerShell)",
                        syntax: "powershell"
                    },
                    curl_cmd: {
                        title: "cURL (CMD)",
                        syntax: "bash"
                    }
                },
                defaultExpanded: true,
                languages: null
            }
        });
    </script>
</body>
</html>
