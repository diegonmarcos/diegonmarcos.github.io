<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1400">
    <title>Cloud Control API Documentation</title>

    <!-- Swagger UI CSS -->
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui.css">

    <style>
        :root {
            --bg-primary: #0f1117;
            --bg-secondary: #161922;
            --bg-tertiary: #1e2230;
            --bg-card: #1a1e2e;
            --border: #2a2f42;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --accent: #818cf8;
            --accent-light: #a5b4fc;
            --accent-dim: rgba(129,140,248,0.12);
            --green: #34d399;
            --blue: #60a5fa;
            --orange: #fb923c;
            --red: #f87171;
            --yellow: #fbbf24;
        }

        body {
            margin: 0; padding: 0; background: var(--bg-primary); color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        .api-header {
            background: linear-gradient(135deg, #312e81 0%, #4c1d95 100%);
            color: white; padding: 2rem; text-align: center;
            border-bottom: 1px solid rgba(129,140,248,0.2);
        }
        .api-header h1 { margin: 0 0 0.5rem 0; font-size: 2.5rem; font-weight: 700; }
        .api-header p { margin: 0; font-size: 1.1rem; opacity: 0.85; }
        .api-header .version {
            display: inline-block; background: rgba(255,255,255,0.1);
            padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.9rem; margin-top: 0.5rem;
        }
        .api-badge {
            display: inline-block; background: rgba(255,255,255,0.08);
            padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem; margin-top: 0.5rem;
        }

        .api-links {
            background: var(--bg-secondary); padding: 1rem 2rem;
            border-bottom: 1px solid var(--border);
            display: flex; gap: 1.5rem; flex-wrap: wrap; align-items: center;
        }
        .api-links strong { color: var(--text-secondary); }
        .api-links a { color: var(--accent-light); text-decoration: none; font-weight: 500; transition: color 0.2s; }
        .api-links a:hover { color: #c7d2fe; text-decoration: underline; }
        .api-links .separator { color: var(--border); }

        .quick-links {
            background: var(--bg-tertiary); padding: 1.5rem 2rem; margin: 2rem;
            border-radius: 8px; border-left: 4px solid var(--accent);
        }
        .quick-links h3 { margin: 0 0 1rem 0; color: var(--text-primary); }
        .quick-links ul {
            list-style: none; padding: 0; margin: 0;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;
        }
        .quick-links li { display: flex; align-items: center; color: var(--text-secondary); }
        .quick-links li::before { content: "\2192"; color: var(--accent); font-weight: bold; margin-right: 0.5rem; }
        .quick-links code {
            background: var(--bg-card); padding: 0.25rem 0.5rem; border-radius: 4px;
            font-family: 'Courier New', monospace; font-size: 0.9rem; color: var(--accent-light);
            border: 1px solid var(--border);
        }

        #swagger-ui { max-width: 1400px; margin: 0 auto; }

        .api-footer {
            background: var(--bg-secondary); color: var(--text-secondary); text-align: center;
            padding: 2rem; margin-top: 3rem; border-top: 1px solid var(--border);
        }
        .api-footer a { color: var(--accent-light); text-decoration: none; }
        .api-footer a:hover { text-decoration: underline; }

        /* ========= SWAGGER UI DARK OVERRIDES ========= */

        .swagger-ui { color: var(--text-primary); }
        .swagger-ui .topbar { background: var(--bg-tertiary); padding: 0.5rem 1rem; border-bottom: 1px solid var(--border); }
        .swagger-ui .topbar .topbar-wrapper .link { display: none; }
        .swagger-ui .topbar .topbar-wrapper { display: flex; align-items: center; }
        .swagger-ui .topbar .download-url-wrapper input { background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border); }
        .swagger-ui .topbar .download-url-wrapper .select-label select { background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border); }
        .swagger-ui .topbar .download-url-wrapper .select-label span { color: var(--text-secondary); }

        /* Info section */
        .swagger-ui .info { margin: 2rem 0; }
        .swagger-ui .info .title { font-size: 2rem; color: var(--accent-light); }
        .swagger-ui .info .description p,
        .swagger-ui .info li,
        .swagger-ui .info table td { color: var(--text-secondary); }
        .swagger-ui .info a { color: var(--accent-light); }

        /* Scheme container / servers */
        .swagger-ui .scheme-container { background: var(--bg-secondary); border-bottom: 1px solid var(--border); box-shadow: none; }
        .swagger-ui .scheme-container .schemes > label { color: var(--text-secondary); }
        .swagger-ui select { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }

        /* Filter */
        .swagger-ui .filter .operation-filter-input {
            background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border);
        }

        /* Tag sections */
        .swagger-ui .opblock-tag-section { border: none; }
        .swagger-ui .opblock-tag {
            font-size: 1.5rem; font-weight: 600; color: var(--text-primary);
            border-bottom: 2px solid var(--accent); padding-bottom: 0.5rem;
        }
        .swagger-ui .opblock-tag:hover { background: var(--accent-dim); }
        .swagger-ui .opblock-tag small { color: var(--text-muted); }
        .swagger-ui .opblock-tag svg { fill: var(--text-muted); }

        /* Operation blocks */
        .swagger-ui .opblock { border-color: var(--border); background: var(--bg-secondary); box-shadow: none; }
        .swagger-ui .opblock .opblock-summary { border-color: var(--border); }
        .swagger-ui .opblock .opblock-summary-description { color: var(--text-secondary); }
        .swagger-ui .opblock .opblock-summary-path,
        .swagger-ui .opblock .opblock-summary-path__deprecated { color: var(--text-primary); }

        .swagger-ui .opblock.opblock-get { border-color: rgba(96,165,250,0.4); background: rgba(96,165,250,0.06); }
        .swagger-ui .opblock.opblock-get .opblock-summary-method { background: #3b82f6; }
        .swagger-ui .opblock.opblock-get .opblock-summary { border-color: rgba(96,165,250,0.3); }

        .swagger-ui .opblock.opblock-post { border-color: rgba(52,211,153,0.4); background: rgba(52,211,153,0.06); }
        .swagger-ui .opblock.opblock-post .opblock-summary-method { background: #10b981; }
        .swagger-ui .opblock.opblock-post .opblock-summary { border-color: rgba(52,211,153,0.3); }

        .swagger-ui .opblock.opblock-put { border-color: rgba(251,191,36,0.4); background: rgba(251,191,36,0.06); }
        .swagger-ui .opblock.opblock-put .opblock-summary-method { background: #f59e0b; }
        .swagger-ui .opblock.opblock-put .opblock-summary { border-color: rgba(251,191,36,0.3); }

        .swagger-ui .opblock.opblock-delete { border-color: rgba(248,113,113,0.4); background: rgba(248,113,113,0.06); }
        .swagger-ui .opblock.opblock-delete .opblock-summary-method { background: #ef4444; }
        .swagger-ui .opblock.opblock-delete .opblock-summary { border-color: rgba(248,113,113,0.3); }

        .swagger-ui .opblock.opblock-patch { border-color: rgba(129,140,248,0.4); background: rgba(129,140,248,0.06); }
        .swagger-ui .opblock.opblock-patch .opblock-summary-method { background: #6366f1; }

        /* Operation body */
        .swagger-ui .opblock-body { background: var(--bg-secondary); }
        .swagger-ui .opblock-body pre.microlight { background: var(--bg-primary) !important; color: var(--text-primary) !important; border: 1px solid var(--border); border-radius: 4px; }
        .swagger-ui .opblock-description-wrapper,
        .swagger-ui .opblock-external-docs-wrapper { color: var(--text-secondary); }
        .swagger-ui .opblock-description-wrapper p,
        .swagger-ui .opblock-external-docs-wrapper p { color: var(--text-secondary); }

        /* Parameters */
        .swagger-ui .opblock-section-header { background: var(--bg-tertiary); border-bottom: 1px solid var(--border); box-shadow: none; }
        .swagger-ui .opblock-section-header h4 { color: var(--text-primary); }
        .swagger-ui .opblock-section-header label { color: var(--text-secondary); }
        .swagger-ui table thead tr th,
        .swagger-ui table thead tr td { color: var(--text-secondary); border-bottom: 1px solid var(--border); }
        .swagger-ui .parameter__name { color: var(--text-primary); }
        .swagger-ui .parameter__name.required::after { color: var(--red); }
        .swagger-ui .parameter__type { color: var(--text-muted); }
        .swagger-ui .parameter__in { color: var(--text-muted); }

        /* Tables */
        .swagger-ui table tbody tr td { color: var(--text-secondary); border-bottom: 1px solid var(--border); }

        /* Inputs */
        .swagger-ui input[type=text],
        .swagger-ui input[type=password],
        .swagger-ui input[type=search],
        .swagger-ui input[type=email],
        .swagger-ui input[type=file],
        .swagger-ui textarea {
            background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);
        }
        .swagger-ui textarea { background: var(--bg-primary); color: var(--text-primary); }

        /* Buttons */
        .swagger-ui .btn { border-radius: 4px; }
        .swagger-ui .btn.execute { background-color: var(--accent); border-color: var(--accent); color: white; }
        .swagger-ui .btn.execute:hover { background-color: #6366f1; border-color: #6366f1; }
        .swagger-ui .btn.cancel { border-color: var(--red); color: var(--red); }
        .swagger-ui .btn.authorize { border-color: var(--green); color: var(--green); }
        .swagger-ui .btn.authorize svg { fill: var(--green); }

        /* Try it out */
        .swagger-ui .try-out__btn { border-color: var(--accent); color: var(--accent); }
        .swagger-ui .try-out__btn:hover { background: var(--accent-dim); }

        /* Responses */
        .swagger-ui .responses-wrapper { background: var(--bg-secondary); }
        .swagger-ui .response-col_status { color: var(--text-primary); }
        .swagger-ui .response-col_description { color: var(--text-secondary); }
        .swagger-ui .response-col_links { color: var(--text-muted); }
        .swagger-ui .responses-inner { padding: 1rem; }
        .swagger-ui .responses-inner h4,
        .swagger-ui .responses-inner h5 { color: var(--text-primary); }
        .swagger-ui .responses-table .response-col_description__inner p { color: var(--text-secondary); }

        /* Live response */
        .swagger-ui .live-responses-table .response-col_status { color: var(--text-primary); }
        .swagger-ui .microlight { background: var(--bg-primary) !important; }
        .swagger-ui .highlight-code > .microlight { background: var(--bg-primary) !important; }

        /* Response codes */
        .swagger-ui .responses-table thead td.col_header { color: var(--text-muted); }
        .swagger-ui .response-control-media-type__accept-message { color: var(--green); }
        .swagger-ui .response-control-media-type--accept-controller select { background: var(--bg-tertiary); color: var(--text-primary); border-color: var(--border); }

        /* Models */
        .swagger-ui section.models { border: 1px solid var(--border); }
        .swagger-ui section.models h4 { color: var(--text-primary); }
        .swagger-ui section.models .model-container { background: var(--bg-secondary); border-bottom: 1px solid var(--border); }
        .swagger-ui .model { color: var(--text-secondary); }
        .swagger-ui .model-title { color: var(--text-primary); }
        .swagger-ui .model .property { color: var(--text-secondary); }
        .swagger-ui .model .property.primitive { color: var(--accent-light); }
        .swagger-ui .prop-type { color: var(--blue); }
        .swagger-ui .prop-format { color: var(--text-muted); }

        /* Model toggle */
        .swagger-ui section.models .model-box { background: var(--bg-secondary); }
        .swagger-ui section.models.is-open h4 { border-bottom: 1px solid var(--border); }

        /* Expand/collapse arrows */
        .swagger-ui .expand-operation svg,
        .swagger-ui .expand-methods svg { fill: var(--text-muted); }

        /* Authorization */
        .swagger-ui .dialog-ux .modal-ux { background: var(--bg-secondary); border: 1px solid var(--border); }
        .swagger-ui .dialog-ux .modal-ux-header { border-bottom: 1px solid var(--border); }
        .swagger-ui .dialog-ux .modal-ux-header h3 { color: var(--text-primary); }
        .swagger-ui .dialog-ux .modal-ux-content p { color: var(--text-secondary); }
        .swagger-ui .dialog-ux .modal-ux-content h4 { color: var(--text-primary); }
        .swagger-ui .dialog-ux .modal-ux-content label { color: var(--text-secondary); }
        .swagger-ui .dialog-ux .backdrop-ux { background: rgba(0,0,0,0.7); }

        /* Loading */
        .swagger-ui .loading-container { padding: 2rem; }
        .swagger-ui .loading-container .loading::after { color: var(--text-muted); }

        /* Tabs */
        .swagger-ui .tab li { color: var(--text-muted); }
        .swagger-ui .tab li.active { color: var(--text-primary); }
        .swagger-ui .tab li:first-of-type::after { background: var(--border); }

        /* Copy to clipboard */
        .swagger-ui .copy-to-clipboard { background: var(--bg-tertiary); border: 1px solid var(--border); }
        .swagger-ui .copy-to-clipboard button { background: none; }

        /* Download buttons */
        .swagger-ui .download-contents { background: var(--bg-tertiary); color: var(--accent-light); border: 1px solid var(--border); }

        /* Scrollbar */
        .swagger-ui ::-webkit-scrollbar { width: 6px; height: 6px; }
        .swagger-ui ::-webkit-scrollbar-track { background: var(--bg-primary); }
        .swagger-ui ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        .swagger-ui ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

        /* Misc text that defaults to dark on light */
        .swagger-ui p, .swagger-ui span { color: inherit; }
        .swagger-ui .renderedMarkdown p { color: var(--text-secondary); }
        .swagger-ui .markdown p, .swagger-ui .markdown pre { color: var(--text-secondary); }
        .swagger-ui .markdown code { background: var(--bg-primary); color: var(--accent-light); padding: 2px 6px; border-radius: 3px; }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="api-header">
        <h1>&#9729;&#65039; Cloud Control API</h1>
        <p>RESTful API for Cloud Infrastructure Monitoring & Management</p>
        <span class="version">v1.0.0</span>
        <span class="api-badge">Live spec &mdash; auto-generated from Rust API</span>
    </div>

    <!-- Links -->
    <div class="api-links">
        <strong>Quick Access:</strong>
        <a href="https://cloud.diegonmarcos.com" target="_blank">Dashboard</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/rust/health" target="_blank">Rust API Health</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/api/health" target="_blank">Flask API Health</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/rust/api-docs/openapi.json" target="_blank">Rust Spec (JSON)</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/apispec.json" target="_blank">Flask Spec (JSON)</a>
        <span class="separator">|</span>
        <a href="cloud_central_api.md" target="_blank">Central API (MD)</a>
        <a href="cloud_ondemand_api.md" target="_blank">On-Demand API (MD)</a>
    </div>

    <!-- Quick Links -->
    <div class="quick-links">
        <h3>Key Endpoints</h3>
        <ul>
            <li><strong>Rust Health:</strong> <code>GET /rust/health</code></li>
            <li><strong>Flask Health:</strong> <code>GET /api/health</code></li>
            <li><strong>VM Status:</strong> <code>GET /rust/vms/{vm_id}/status</code></li>
            <li><strong>Containers:</strong> <code>GET /rust/vms/{vm_id}/containers</code></li>
            <li><strong>Dashboard:</strong> <code>GET /api/dashboard/summary</code></li>
            <li><strong>Wake VM:</strong> <code>POST /rust/wake/trigger</code></li>
            <li><strong>VM Control:</strong> <code>POST /rust/vms/{vm_id}/start</code></li>
            <li><strong>Flex Wake:</strong> <code>POST /rust/flex/wake-all</code></li>
        </ul>
    </div>

    <!-- Swagger UI -->
    <div id="swagger-ui"></div>

    <!-- Footer -->
    <div class="api-footer">
        <p><strong>Cloud Control API</strong> &copy; 2025 Diego Nepomuceno Marcos</p>
        <p>
            <a href="https://diegonmarcos.com" target="_blank">diegonmarcos.com</a> |
            <a href="https://github.com/diegonmarcos" target="_blank">GitHub</a>
        </p>
        <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
            Built with <a href="https://swagger.io/tools/swagger-ui/" target="_blank">Swagger UI</a>
        </p>
    </div>

    <!-- Swagger UI Bundle -->
    <script src="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui-standalone-preset.js"></script>

    <script>
        // Initialize Swagger UI with both APIs
        window.ui = SwaggerUIBundle({
            urls: [
                { url: 'https://api.diegonmarcos.com/rust/api-docs/openapi.json', name: 'Rust API (Infrastructure)' },
                { url: 'https://api.diegonmarcos.com/apispec.json', name: 'Flask API (Central)' }
            ],
            "urls.primaryName": "Rust API (Infrastructure)",
            dom_id: '#swagger-ui',
            deepLinking: true,
            presets: [
                SwaggerUIBundle.presets.apis,
                SwaggerUIStandalonePreset
            ],
            plugins: [
                SwaggerUIBundle.plugins.DownloadUrl
            ],
            layout: "StandaloneLayout",
            defaultModelsExpandDepth: 1,
            defaultModelExpandDepth: 1,
            docExpansion: 'list',
            filter: true,
            syntaxHighlight: {
                activate: true,
                theme: 'tomorrow-night'
            },
            tryItOutEnabled: true,
            requestSnippetsEnabled: true,
            requestSnippets: {
                generators: {
                    curl_bash: {
                        title: "cURL (bash)",
                        syntax: "bash"
                    },
                    curl_powershell: {
                        title: "cURL (PowerShell)",
                        syntax: "powershell"
                    },
                    curl_cmd: {
                        title: "cURL (CMD)",
                        syntax: "bash"
                    }
                },
                defaultExpanded: true,
                languages: null
            }
        });
    </script>
</body>
</html>
