
"use strict";(()=>{function u(){document.querySelectorAll(".card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.zIndex="10"}),e.addEventListener("mouseleave",()=>{e.style.zIndex="1",e.style.transform="translateY(0) scale(1) rotateX(0) rotateY(0)"}),e.addEventListener("mousemove",n=>{let o=e.getBoundingClientRect(),s=n.clientX-o.left,i=n.clientY-o.top,m=o.width/2,C=o.height/2,H=(i-C)/10,M=(m-s)/10;e.style.transform=`
                translateY(-12px)
                scale(1.01)
                perspective(1000px)
                rotateX(${H}deg)
                rotateY(${M}deg)
            `})})}function p(){document.querySelectorAll(".card-status").forEach(e=>{setInterval(()=>{Math.random()>.95&&(e.style.animation="pulse 0.5s ease-in-out",setTimeout(()=>{e.style.animation=""},500))},2e3)})}function c(t){let e=document.createElement("div");e.className="notification",e.textContent=t,document.body.appendChild(e),setTimeout(()=>{e.classList.add("closing"),setTimeout(()=>e.remove(),300)},2e3)}function v(t){let e=t.match(/ssh:\/\/(.+)@(.+)/);if(!e)return null;let n=e[1],o=e[2],s=`ssh -i ~/.ssh/matomo_key ${n}@${o}`;return{username:n,host:o,command:s}}function h(t){let e=document.createElement("div");e.className="ssh-modal-overlay",e.innerHTML=`
        <div class="ssh-modal">
            <h3>SSH Connection to: ${t.host}</h3>
            <div class="ssh-command">
                <code>${t.command}</code>
                <button class="copy-btn" data-action="copy">Copy</button>
            </div>
            <p class="ssh-instruction">Choose how to connect:</p>
            <div class="ssh-options">
                <button class="ssh-option-btn" data-action="terminal">
                    Open in Terminal
                </button>
                <button class="ssh-option-btn" data-action="vscode">
                    Open in VS Code
                </button>
            </div>
            <button class="close-modal-btn" data-action="close">Close</button>
        </div>
    `,e.addEventListener("click",n=>{let s=n.target.dataset.action;n.target===e||s==="close"?l():s==="copy"?f(t.command):s==="terminal"?$(t.command):s==="vscode"&&I(t)}),document.body.appendChild(e)}function l(){let t=document.querySelector(".ssh-modal-overlay");t&&t.remove()}function f(t){navigator.clipboard.writeText(t).then(()=>{c("SSH command copied to clipboard!")})}function $(t){let e=/Linux/.test(navigator.userAgent),n=/Mac/.test(navigator.userAgent);e?window.location.href=`gnome-terminal://execute/${encodeURIComponent(t)}`:n?window.location.href=`terminal://execute/${encodeURIComponent(t)}`:(f(t),c("Command copied! Paste it in your terminal.")),l()}function I(t){let{username:e,host:n}=t;window.open(`vscode://vscode-remote/ssh-remote+${e}@${n}/home/${e}`,"_blank"),l()}var k={analytics:"https://analytics.diegonmarcos.com",sync:"https://sync.diegonmarcos.com",n8n:"https://n8n.diegonmarcos.com","vps-oracle":"https://cloud.oracle.com/","vps-gcloud":"https://console.cloud.google.com/","vm-webserver1":"ssh://ubuntu@130.110.251.193","vm-servicesserver1":"ssh://ubuntu@129.151.228.66","vm-arch1":"ssh://user@pending",mail:"#pending",terminal:"#pending",dashboard:"#pending"};function d(t){let e=k[t];e&&(console.log(`Navigating to ${t}: ${e}`),e.startsWith("ssh://")?N(e):e==="#pending"?c("This service is under development."):e.startsWith("http")?window.open(e,"_blank"):window.location.href=e)}function N(t){let e=v(t);if(e){if(e.host==="pending"||e.host.includes("pending")){c("This VM is not yet configured. IP address pending.");return}h(e)}}var r=["cards","tree","architecture","ai-architecture"];function g(){let t=window.location.hash.slice(1);return r.includes(t)?t:"cards"}function a(t,e=!0){let n=document.querySelectorAll(".view-btn"),o={cards:document.getElementById("cards-view"),tree:document.getElementById("tree-view"),architecture:document.getElementById("architecture-view"),"ai-architecture":document.getElementById("ai-architecture-view")};n.forEach(s=>{s.dataset.view===t?s.classList.add("active"):s.classList.remove("active")}),Object.keys(o).forEach(s=>{let i=o[s];i&&(s===t?i.classList.add("active"):i.classList.remove("active"))}),e&&window.history.pushState({view:t},"",`#${t}`)}function E(){let t=document.querySelectorAll(".view-btn"),e=g();a(e,!1),window.history.replaceState({view:e},"",`#${e}`),t.forEach(n=>{n.addEventListener("click",()=>{let o=n.dataset.view;o&&r.includes(o)&&a(o)})}),window.addEventListener("popstate",n=>{var o;(o=n.state)!=null&&o.view&&r.includes(n.state.view)?a(n.state.view,!1):a(g(),!1)})}function y(){document.querySelectorAll(".tree-node[data-expanded]").forEach(e=>{let n=e.querySelector(".node-header"),o=e.querySelector(".expand-icon"),s=e.nextElementSibling;n&&(s!=null&&s.classList.contains("tree-children"))&&n.addEventListener("click",i=>{i.stopPropagation(),e.dataset.expanded==="true"?(e.dataset.expanded="false",o==null||o.classList.remove("expanded"),s.classList.remove("expanded")):(e.dataset.expanded="true",o==null||o.classList.add("expanded"),s.classList.add("expanded"))})})}function w(){document.querySelectorAll(".tree-node.service-node.clickable").forEach(e=>{e.addEventListener("click",()=>{let n=e.dataset.service;if(n){let o=new CustomEvent("service-click",{detail:{service:n}});document.dispatchEvent(o)}})})}function V(){document.querySelectorAll(".tree-node[data-expanded]").forEach(e=>{var o;e.dataset.expanded="true",(o=e.querySelector(".expand-icon"))==null||o.classList.add("expanded");let n=e.nextElementSibling;n!=null&&n.classList.contains("tree-children")&&n.classList.add("expanded")})}function A(){document.querySelectorAll(".tree-node[data-expanded]").forEach(e=>{var o;e.dataset.expanded="false",(o=e.querySelector(".expand-icon"))==null||o.classList.remove("expanded");let n=e.nextElementSibling;n!=null&&n.classList.contains("tree-children")&&n.classList.remove("expanded")})}function S(){let t=document.getElementById("expand-all"),e=document.getElementById("collapse-all");t==null||t.addEventListener("click",V),e==null||e.addEventListener("click",A)}var x="cloud-dashboard-theme",q="minimalistic";function b(){let t=localStorage.getItem(x);return t==="minimalistic"||t==="blurred"?t:q}function L(t){document.documentElement.setAttribute("data-theme",t),localStorage.setItem(x,t),O(t)}function B(){let e=b()==="minimalistic"?"blurred":"minimalistic";L(e)}function O(t){let e=document.querySelector(".theme-label");e&&(e.textContent=t==="minimalistic"?"Blurred":"Minimalistic")}function T(){let t=b();L(t);let e=document.getElementById("theme-toggle");e&&e.addEventListener("click",B)}document.addEventListener("DOMContentLoaded",()=>{T(),u(),p(),document.querySelectorAll(".card").forEach(e=>{e.addEventListener("click",()=>{let n=e.dataset.service;n&&d(n)})}),E(),y(),w(),S(),document.addEventListener("service-click",e=>{let n=e.detail.service;n&&d(n)})});})();
