"use strict";(()=>{var j=["public/videos/background.mp4","public/videos/background2.mp4","public/videos/background3.mp4","public/videos/background4.mp4","public/images/background_static.jpg","public/images/professional.png","public/images/personal.png","public/images/venture1.png","public/images/venture2.png","public/images/tools.png"],Re="https://diegonmarcos.github.io/linktree_mindmap/",ae="linktree_assets_cache_v1";var ie="public/images/background_static.jpg",C,oe,re,le,ce,K,I,de,pe;function ue(){return window.location.protocol==="file:"}async function Ve(){if(ue())return 0;let e=performance.now();try{await fetch(ie+"?t="+Date.now(),{method:"HEAD",cache:"no-store"});let t=performance.now();return Math.round(t-e)}catch{return 0}}async function ze(){if(ue())return 0;let e=performance.now();try{let n=await(await fetch(ie+"?t="+Date.now(),{cache:"no-store"})).blob(),a=(performance.now()-e)/1e3,c=n.size*8/a/(1024*1024);return Math.round(c*100)/100}catch{return 0}}async function Fe(){b("Running network diagnostics..."),b("Measuring latency...");let e=await Ve();ce.textContent=`${e}ms`,b("Testing download speed...");let t=await ze();le.textContent=`${t} Mbps`,localStorage.setItem("last_download_speed",`${t} Mbps`);let n=Math.round(t/8*100)/100;return de.textContent=`${n} MB/s`,{downloadSpeed:t,latency:e,transferRate:n}}function Ge(){try{let e=localStorage.getItem(ae);if(e){let t=JSON.parse(e),n=Date.now()-t.timestamp,s=24*60*60*1e3;if(n<s)return I.textContent="Cached",I.style.color="#10b981",!0}}catch(e){console.warn("Cache check failed:",e)}return I.textContent="Not Cached",I.style.color="#f59e0b",!1}function qe(e){return new Promise((t,n)=>{let s=e.split(".").pop()?.toLowerCase();if(s==="mp4"||s==="webm"){let a=document.createElement("video");a.preload="auto",a.onloadeddata=()=>t(),a.onerror=()=>n(new Error(`Failed to load video: ${e}`)),a.src=e}else{let a=new Image;a.onload=()=>t(),a.onerror=()=>n(new Error(`Failed to load image: ${e}`)),a.src=e}})}function je(){return new Promise(e=>{let t=document.createElement("iframe");t.style.position="absolute",t.style.width="0",t.style.height="0",t.style.border="none",t.style.visibility="hidden";let n=setTimeout(()=>{document.body.removeChild(t),e()},1e4);t.onload=()=>{clearTimeout(n),setTimeout(()=>{document.body.removeChild(t),e()},1e3)},t.onerror=()=>{clearTimeout(n),document.body.removeChild(t),e()},document.body.appendChild(t),t.src=Re})}async function Ke(e){let t=j.length+1,n=0;if(K.textContent=`${n} / ${t}`,e){b("Loading from cache...");for(let i=0;i<t;i++)await new Promise(c=>setTimeout(c,50)),n++,R({loaded:n,total:t,percentage:Math.round(n/t*100)});return}b("Downloading assets...");let s=j.map(async i=>{try{await qe(i),n++,R({loaded:n,total:t,percentage:Math.round(n/t*100)}),b(`Loaded: ${i.split("/").pop()}`)}catch(c){console.warn(`Asset load failed: ${i}`,c),n++,R({loaded:n,total:t,percentage:Math.round(n/t*100)})}}),a=je().then(()=>{n++,R({loaded:n,total:t,percentage:Math.round(n/t*100)}),b("Loaded: mindmap")});await Promise.all([...s,a]);try{localStorage.setItem(ae,JSON.stringify({timestamp:Date.now(),assets:j}))}catch(i){console.warn("Failed to set cache:",i)}}function R(e){oe.style.width=`${e.percentage}%`,re.textContent=`${e.percentage}%`,K.textContent=`${e.loaded} / ${e.total}`}function b(e){pe.textContent=e}function se(){b("Complete! Entering experience..."),setTimeout(()=>{C.style.opacity="0",setTimeout(()=>{C.classList.remove("active"),C.style.display="none"},500)},500)}async function me(){if(C=document.getElementById("loading-screen"),oe=document.getElementById("progress-bar"),re=document.getElementById("progress-text"),le=document.getElementById("download-speed"),ce=document.getElementById("latency"),K=document.getElementById("assets-loaded"),I=document.getElementById("cache-status"),de=document.getElementById("transfer-rate"),pe=document.getElementById("loading-details"),!C){console.warn("Loading screen not found");return}C.classList.add("active");try{let e=Ge();await Fe(),await Ke(e),se()}catch(e){console.error("Loading failed:",e),se()}}var ge=["public/videos/background.mp4","public/videos/background2.mp4","public/videos/background3.mp4","public/videos/background4.mp4","public/images/background_static.jpg","public/images/professional.png","public/images/personal.png","public/images/venture1.png","public/images/venture2.png","public/images/tools.png"];function W(){return window.location.protocol==="file:"}async function We(){if(W())return"localhost (file://)";try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return"Unable to fetch"}}async function Je(){if(W())return{avg:0,jitter:0};let e=[],t="public/images/background_static.jpg";for(let i=0;i<5;i++){let c=performance.now();try{await fetch(t+"?t="+Date.now()+"&ping="+i,{method:"HEAD",cache:"no-store"}),e.push(performance.now()-c)}catch{e.push(0)}}let n=e.reduce((i,c)=>i+c,0)/e.length,s=e.reduce((i,c)=>i+Math.pow(c-n,2),0)/e.length,a=Math.sqrt(s);return{avg:Math.round(n),jitter:Math.round(a)}}async function Xe(){let e=await Je(),t=await We(),n=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return{downloadSpeed:localStorage.getItem("last_download_speed")||"Unknown",uploadSpeed:"N/A",latency:`${e.avg}ms`,jitter:`${e.jitter}ms`,connectionType:n?.type||"Unknown",effectiveType:n?.effectiveType||"Unknown",downlink:n?.downlink?`${n.downlink} Mbps`:"Unknown",rtt:n?.rtt?`${n.rtt}ms`:"Unknown",clientIP:t,serverIP:window.location.hostname,protocol:window.location.protocol.replace(":","")}}function Ye(){try{let e=JSON.parse(localStorage.getItem("linktree_assets_cache_v1")||"{}"),t=e.timestamp||0,n=Date.now()-t,s=24*60*60*1e3,a=new Date(t+s);return{status:n<s&&t>0?"Valid":"Expired",cacheAge:`${Math.round(n/1e3/60)} minutes`,cachedFiles:e.assets?.length||0,totalCachedSize:"Calculating...",lastUpdate:t>0?new Date(t).toLocaleString():"Never",validUntil:t>0?a.toLocaleString():"N/A"}}catch{return{status:"Unknown",cacheAge:"N/A",cachedFiles:0,totalCachedSize:"N/A",lastUpdate:"N/A",validUntil:"N/A"}}}function Ze(){let e=navigator;return{browser:Qe(),browserVersion:et(),os:tt(),platform:e.platform||"Unknown",language:e.language||"Unknown",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||"Unknown",screenResolution:`${screen.width}x${screen.height}`,viewportSize:`${window.innerWidth}x${window.innerHeight}`,deviceMemory:e.deviceMemory?`${e.deviceMemory} GB`:"Unknown",hardwareConcurrency:e.hardwareConcurrency?`${e.hardwareConcurrency} cores`:"Unknown",cookiesEnabled:e.cookieEnabled?"Yes":"No",doNotTrack:e.doNotTrack==="1"?"Yes":"No"}}function Qe(){let e=navigator.userAgent;return e.indexOf("Firefox")>-1?"Firefox":e.indexOf("Edg")>-1?"Edge":e.indexOf("Chrome")>-1?"Chrome":e.indexOf("Safari")>-1?"Safari":e.indexOf("Opera")>-1||e.indexOf("OPR")>-1?"Opera":"Unknown"}function et(){let t=navigator.userAgent.match(/(Firefox|Chrome|Safari|Edge|Opera|OPR)\/([0-9.]+)/);return t?t[2]:"Unknown"}function tt(){let e=navigator.userAgent;return e.indexOf("Win")>-1?"Windows":e.indexOf("Mac")>-1?"macOS":e.indexOf("X11")>-1?"UNIX":e.indexOf("Linux")>-1?"Linux":e.indexOf("Android")>-1?"Android":e.indexOf("iOS")>-1?"iOS":"Unknown"}async function nt(){let e=[];if(W()){let t=performance.getEntriesByType("resource");for(let n of ge){let s=t.find(i=>i.name.includes(n)),a=n.split(".").pop()?.toUpperCase()||"Unknown";s?e.push({url:n.split("/").pop()||n,type:a,size:s.transferSize?U(s.transferSize):"Local",cached:s.transferSize===0,loadTime:`${Math.round(s.duration)}ms`}):e.push({url:n.split("/").pop()||n,type:a,size:"Local",cached:!1,loadTime:"Pending"})}return e}for(let t of ge){let n=performance.now();try{let s=await fetch(t,{method:"HEAD"}),a=performance.now()-n,i=s.headers.get("content-length"),c=t.split(".").pop()?.toUpperCase()||"Unknown";e.push({url:t.split("/").pop()||t,type:c,size:i?U(parseInt(i)):"Unknown",cached:s.headers.get("x-cache")==="HIT",loadTime:`${Math.round(a)}ms`})}catch{e.push({url:t.split("/").pop()||t,type:"Error",size:"N/A",cached:!1,loadTime:"Failed"})}}return e}function st(){let e=performance.getEntriesByType("navigation")[0],t=performance.memory,n=performance.getEntriesByType("paint"),s=n.find(i=>i.name==="first-paint"),a=n.find(i=>i.name==="first-contentful-paint");return{pageLoadTime:e?`${Math.round(e.loadEventEnd-e.fetchStart)}ms`:"Unknown",domContentLoaded:e?`${Math.round(e.domContentLoadedEventEnd-e.fetchStart)}ms`:"Unknown",firstPaint:s?`${Math.round(s.startTime)}ms`:"N/A",firstContentfulPaint:a?`${Math.round(a.startTime)}ms`:"N/A",transferSize:e?.transferSize?U(e.transferSize):"Unknown",resourceCount:`${performance.getEntriesByType("resource").length}`,memoryUsage:t?U(t.usedJSHeapSize):"Unknown"}}async function at(){let e="Unknown",t="Unknown",n=0;try{let d=document.createElement("canvas"),p=d.getContext("webgl")||d.getContext("experimental-webgl");if(p){let v=p.getExtension("WEBGL_debug_renderer_info");v&&(e=p.getParameter(v.UNMASKED_RENDERER_WEBGL)||"Unknown",t=p.getParameter(v.UNMASKED_VENDOR_WEBGL)||"Unknown");let f=p.getParameter(p.GPU_DISJOINT_EXT);f!==void 0&&(n=Math.min(f/1e3,100))}}catch(d){console.warn("Could not get GPU info:",d)}let s=await it(),a=0,i=performance.getEntriesByType?.("longtask")||[];if(i.length>0){let d=i.reduce((p,v)=>p+v.duration,0);a=Math.min(d/1e4*100,100)}else s<30?a=60:s<50?a=30:a=10;s>=55?n=Math.max(n,40):s<30&&a<40?n=80:n=Math.max(n,60);let c=d=>d<25?"Low":d<50?"Medium":d<75?"High":"Critical",u=d=>d<30?"Low":d<60?"Medium":d<85?"High":"Critical";return{cpuUsage:Math.round(a),gpuUsage:Math.round(n),gpuRenderer:e,gpuVendor:t,cpuStatus:c(a),gpuStatus:u(n),fps:Math.round(s),frameTiming:`${(1e3/s).toFixed(2)}ms`}}function it(){return new Promise(e=>{let t=0,n=performance.now();function s(){t++;let a=performance.now()-n;if(a<1e3)requestAnimationFrame(s);else{let i=t/a*1e3;e(i)}}requestAnimationFrame(s)})}function U(e){if(e===0)return"0 B";let t=1024,n=["B","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return`${(e/Math.pow(t,s)).toFixed(2)} ${n[s]}`}function ot(e){let t=e.assets.reduce((n,s)=>{let a=s.size.match(/([0-9.]+)\s*(B|KB|MB|GB)/);if(!a)return n;let i=parseFloat(a[1]),c=a[2],u={B:1,KB:1024,MB:1024*1024,GB:1024*1024*1024}[c]||1;return n+i*u},0);return`
    <div class="diagnostics-container">
      <!-- GPU/CPU Usage Section -->
      <div class="diag-section">
        <h3>GPU & CPU Usage</h3>
        <div class="gpu-cpu-grid">
          <div class="usage-card cpu-card">
            <div class="usage-header">CPU Usage</div>
            <div class="usage-percentage ${e.gpuCpu.cpuStatus.toLowerCase()}">${e.gpuCpu.cpuUsage}%</div>
            <div class="usage-status">Status: ${e.gpuCpu.cpuStatus}</div>
            <div class="usage-details">Cores: ${e.system.hardwareConcurrency}</div>
          </div>
          <div class="usage-card gpu-card">
            <div class="usage-header">GPU Usage</div>
            <div class="usage-percentage ${e.gpuCpu.gpuStatus.toLowerCase()}">${e.gpuCpu.gpuUsage}%</div>
            <div class="usage-status">Status: ${e.gpuCpu.gpuStatus}</div>
            <div class="usage-details">FPS: ${e.gpuCpu.fps} (${e.gpuCpu.frameTiming})</div>
          </div>
        </div>
        <div class="diag-grid">
          <div class="diag-item"><span class="diag-label">GPU Renderer:</span><span class="diag-value">${e.gpuCpu.gpuRenderer}</span></div>
          <div class="diag-item"><span class="diag-label">GPU Vendor:</span><span class="diag-value">${e.gpuCpu.gpuVendor}</span></div>
        </div>
      </div>

      <!-- Network Section -->
      <div class="diag-section">
        <h3>Network Information</h3>
        <div class="diag-grid">
          <div class="diag-item"><span class="diag-label">Download Speed:</span><span class="diag-value">${e.network.downloadSpeed}</span></div>
          <div class="diag-item"><span class="diag-label">Latency:</span><span class="diag-value">${e.network.latency}</span></div>
          <div class="diag-item"><span class="diag-label">Jitter:</span><span class="diag-value">${e.network.jitter}</span></div>
          <div class="diag-item"><span class="diag-label">Connection Type:</span><span class="diag-value">${e.network.connectionType}</span></div>
          <div class="diag-item"><span class="diag-label">Effective Type:</span><span class="diag-value">${e.network.effectiveType}</span></div>
          <div class="diag-item"><span class="diag-label">Downlink:</span><span class="diag-value">${e.network.downlink}</span></div>
          <div class="diag-item"><span class="diag-label">RTT:</span><span class="diag-value">${e.network.rtt}</span></div>
          <div class="diag-item"><span class="diag-label">Client IP:</span><span class="diag-value">${e.network.clientIP}</span></div>
          <div class="diag-item"><span class="diag-label">Server:</span><span class="diag-value">${e.network.serverIP}</span></div>
          <div class="diag-item"><span class="diag-label">Protocol:</span><span class="diag-value">${e.network.protocol}</span></div>
        </div>
      </div>

      <!-- Cache Section -->
      <div class="diag-section">
        <h3>Cache Status</h3>
        <div class="diag-grid">
          <div class="diag-item"><span class="diag-label">Status:</span><span class="diag-value ${e.cache.status==="Valid"?"status-good":"status-warn"}">${e.cache.status}</span></div>
          <div class="diag-item"><span class="diag-label">Cache Age:</span><span class="diag-value">${e.cache.cacheAge}</span></div>
          <div class="diag-item"><span class="diag-label">Cached Files:</span><span class="diag-value">${e.cache.cachedFiles}</span></div>
          <div class="diag-item"><span class="diag-label">Total Size:</span><span class="diag-value">${U(t)}</span></div>
          <div class="diag-item"><span class="diag-label">Last Update:</span><span class="diag-value">${e.cache.lastUpdate}</span></div>
          <div class="diag-item"><span class="diag-label">Valid Until:</span><span class="diag-value">${e.cache.validUntil}</span></div>
        </div>
      </div>

      <!-- System Section -->
      <div class="diag-section">
        <h3>System Information</h3>
        <div class="diag-grid">
          <div class="diag-item"><span class="diag-label">Browser:</span><span class="diag-value">${e.system.browser} ${e.system.browserVersion}</span></div>
          <div class="diag-item"><span class="diag-label">OS:</span><span class="diag-value">${e.system.os}</span></div>
          <div class="diag-item"><span class="diag-label">Platform:</span><span class="diag-value">${e.system.platform}</span></div>
          <div class="diag-item"><span class="diag-label">Language:</span><span class="diag-value">${e.system.language}</span></div>
          <div class="diag-item"><span class="diag-label">Timezone:</span><span class="diag-value">${e.system.timezone}</span></div>
          <div class="diag-item"><span class="diag-label">Screen:</span><span class="diag-value">${e.system.screenResolution}</span></div>
          <div class="diag-item"><span class="diag-label">Viewport:</span><span class="diag-value">${e.system.viewportSize}</span></div>
          <div class="diag-item"><span class="diag-label">Device Memory:</span><span class="diag-value">${e.system.deviceMemory}</span></div>
          <div class="diag-item"><span class="diag-label">CPU Cores:</span><span class="diag-value">${e.system.hardwareConcurrency}</span></div>
          <div class="diag-item"><span class="diag-label">Cookies:</span><span class="diag-value">${e.system.cookiesEnabled}</span></div>
        </div>
      </div>

      <!-- Performance Section -->
      <div class="diag-section">
        <h3>Performance Metrics</h3>
        <div class="diag-grid">
          <div class="diag-item"><span class="diag-label">Page Load Time:</span><span class="diag-value">${e.performance.pageLoadTime}</span></div>
          <div class="diag-item"><span class="diag-label">DOM Content Loaded:</span><span class="diag-value">${e.performance.domContentLoaded}</span></div>
          <div class="diag-item"><span class="diag-label">First Paint:</span><span class="diag-value">${e.performance.firstPaint}</span></div>
          <div class="diag-item"><span class="diag-label">First Contentful Paint:</span><span class="diag-value">${e.performance.firstContentfulPaint}</span></div>
          <div class="diag-item"><span class="diag-label">Transfer Size:</span><span class="diag-value">${e.performance.transferSize}</span></div>
          <div class="diag-item"><span class="diag-label">Resources Loaded:</span><span class="diag-value">${e.performance.resourceCount}</span></div>
          <div class="diag-item"><span class="diag-label">Memory Usage:</span><span class="diag-value">${e.performance.memoryUsage}</span></div>
        </div>
      </div>

      <!-- Assets Section -->
      <div class="diag-section">
        <h3>Asset Information (${e.assets.length} files)</h3>
        <div class="assets-table">
          <div class="assets-table-header">
            <span>File</span>
            <span>Type</span>
            <span>Size</span>
            <span>Load Time</span>
            <span>Cached</span>
          </div>
          ${e.assets.map(n=>`
            <div class="assets-table-row">
              <span class="asset-name">${n.url}</span>
              <span class="asset-type">${n.type}</span>
              <span class="asset-size">${n.size}</span>
              <span class="asset-loadtime">${n.loadTime}</span>
              <span class="asset-cached ${n.cached?"cached-yes":"cached-no"}">${n.cached?"\u2713":"\u2717"}</span>
            </div>
          `).join("")}
        </div>
      </div>
    </div>
  `}function fe(){let e=document.getElementById("status-toggle"),t=document.getElementById("status-modal"),n=document.getElementById("status-modal-close"),s=document.getElementById("status-modal-body");!e||!t||!n||!s||(e.addEventListener("click",async()=>{t.style.display="flex",s.innerHTML=`
      <div class="status-loading">
        <div class="status-spinner"></div>
        <p>Gathering diagnostics...</p>
      </div>
    `;let a={network:await Xe(),cache:Ye(),system:Ze(),assets:await nt(),performance:st(),gpuCpu:await at()};s.innerHTML=ot(a)}),n.addEventListener("click",()=>{t.style.display="none"}),t.addEventListener("click",a=>{a.target===t&&(t.style.display="none")}))}function l(e){return document.getElementById(e)}function m(e,t=document){return t.querySelector(e)}function A(e,t=document){return t.querySelectorAll(e)}function ve(e,t,n){e.style.setProperty(t,n)}function o(e,t){e.classList.add(t)}function r(e,t){e.classList.remove(t)}function w(e,t){return e.classList.contains(t)}function V(e){let t=e.parentElement?.closest(".collapsible-content");for(;t;){if(w(t,"open")){let n=t.style.maxHeight;t.style.maxHeight="none";let s=t.scrollHeight;t.style.maxHeight=n,t.offsetHeight,t.style.maxHeight=s+"px"}t=t.parentElement?.closest(".collapsible-content")}}function rt(){A(".collapsible-content").forEach(t=>{w(t,"open")?t.style.maxHeight=t.scrollHeight+"px":t.style.maxHeight="0px"})}function lt(e){let t=e.getAttribute("data-target");if(!t)return;let n=l(t);n&&(w(n,"open")?(r(n,"open"),r(e,"open"),n.style.maxHeight="0px",setTimeout(()=>V(n),100)):(o(n,"open"),o(e,"open"),n.style.maxHeight=n.scrollHeight+"px",setTimeout(()=>{w(n,"open")&&(n.style.maxHeight=n.scrollHeight+"px")},50),setTimeout(()=>V(n),100),setTimeout(()=>V(n),300),setTimeout(()=>V(n),500)))}function we(){rt(),A(".more-toggle").forEach(t=>{t.addEventListener("click",()=>lt(t))})}function he(){let e=l("controls-fab"),t=l("controls-list"),n=e?.parentElement;if(!e||!t||!n)return;let s=null,a="ontouchstart"in window||navigator.maxTouchPoints>0,i=()=>{r(t,"open"),r(e,"open"),s&&(clearTimeout(s),s=null)},c=(p=!0)=>{o(t,"open"),o(e,"open"),p&&!a&&(s=window.setTimeout(()=>{i()},1e3))},u=()=>{s&&(clearTimeout(s),s=null)},d=()=>{u(),w(t,"open")&&!a&&(s=window.setTimeout(()=>{i()},1e3))};a||(e.addEventListener("mouseenter",()=>{u(),w(t,"open")||c(!0)}),t.addEventListener("mouseenter",()=>{u()}),n.addEventListener("mouseleave",()=>{d()})),e.addEventListener("click",p=>{p.preventDefault(),p.stopPropagation(),w(t,"open")?i():c(!a)}),a&&e.addEventListener("touchstart",p=>{p.preventDefault(),w(t,"open")?i():c(!1)},{passive:!1})}var be=["public/videos/background.mp4","public/videos/background2.mp4","public/videos/background3.mp4","public/videos/background4.mp4"],ct="public/images/background_static.jpg",g=null,k=!0;function Ee(){return be[Math.floor(Math.random()*be.length)]}function Te(){g=l("background-video"),g&&(g.src=Ee(),g.poster=ct)}function Se(){let e=l("video-toggle");if(!e||!g)return;localStorage.getItem("videoPlaying")==="false"?(k=!1,r(e,"active"),ye()):(k=!0,o(e,"active")),e.addEventListener("click",()=>{k?(ye(),r(e,"active")):(dt(),o(e,"active")),localStorage.setItem("videoPlaying",String(k))})}function ye(){g&&(g.pause(),g.removeAttribute("src"),g.load(),k=!1)}function dt(){g&&(g.src=Ee(),g.play().catch(()=>{}),k=!0)}var P="professional",y,E,T,L,B,D,O,N,J=!1,pt=300,Le={effect:"creative",grabCursor:!0,centeredSlides:!1,slidesPerView:1,spaceBetween:0,loop:!0,creativeEffect:{prev:{shadow:!1,translate:["-120%",0,-500],rotate:[0,0,-15],opacity:0,scale:.8},next:{shadow:!1,translate:["120%",0,-500],rotate:[0,0,15],opacity:0,scale:.8}},keyboard:{enabled:!0,onlyInViewport:!0},touchRatio:1,resistanceRatio:.85,touchStartPreventDefault:!1,touchStartForcePreventDefault:!1,touchMoveStopPropagation:!1,simulateTouch:!0,allowTouchMove:!0,touchEventsTarget:"container",threshold:10,passiveListeners:!0,speed:900};function S(e){P=e,e==="professional"?(o(T,"selected"),r(L,"selected")):(o(L,"selected"),r(T,"selected"))}function h(){let e=m(".professional-swiper"),t=m(".personal-swiper");!e||!t||(P==="professional"?(B.style.opacity="1",D.style.opacity="1",B.style.pointerEvents="auto",D.style.pointerEvents="auto",y.allowTouchMove=!0,y.enable(),o(e,"swiper-enabled"),r(e,"swiper-disabled"),O.style.opacity="0.3",N.style.opacity="0.3",O.style.pointerEvents="none",N.style.pointerEvents="none",E.allowTouchMove=!1,E.disable(),o(t,"swiper-disabled"),r(t,"swiper-enabled")):(O.style.opacity="1",N.style.opacity="1",O.style.pointerEvents="auto",N.style.pointerEvents="auto",E.allowTouchMove=!0,E.enable(),o(t,"swiper-enabled"),r(t,"swiper-disabled"),B.style.opacity="0.3",D.style.opacity="0.3",B.style.pointerEvents="none",D.style.pointerEvents="none",y.allowTouchMove=!1,y.disable(),o(e,"swiper-disabled"),r(e,"swiper-enabled")))}function ke(e,t){Math.abs(e.deltaX)>Math.abs(e.deltaY)&&(J||(J=!0,e.deltaX>30?t.slidePrev():e.deltaX<-30&&t.slideNext(),setTimeout(()=>{J=!1},pt),e.preventDefault()))}function Me(e){ke(e,y)}function Ce(e){ke(e,E)}function X(){T.removeEventListener("wheel",Me),L.removeEventListener("wheel",Ce),P==="professional"?T.addEventListener("wheel",Me,{passive:!1}):L.addEventListener("wheel",Ce,{passive:!1})}function ut(){let e=!1;[T,L].forEach((t,n)=>{t.addEventListener("touchstart",s=>{s.touches.length===2&&(e=!0)},{passive:!0}),t.addEventListener("touchmove",s=>{e&&s.touches.length},{passive:!0}),t.addEventListener("touchend",()=>{e&&(S(n===0?"professional":"personal"),h(),e=!1)},{passive:!0})})}function mt(){document.addEventListener("keydown",e=>{e.key==="ArrowLeft"?P==="professional"?y.slidePrev():E.slidePrev():e.key==="ArrowRight"?P==="professional"?y.slideNext():E.slideNext():e.key==="ArrowDown"?(S("personal"),h()):e.key==="ArrowUp"&&(S("professional"),h())})}function gt(){T.addEventListener("click",e=>{e.target.closest("a, button")||(S("professional"),h(),X())}),L.addEventListener("click",e=>{e.target.closest("a, button")||(S("personal"),h(),X())})}function Pe(){if(typeof Swiper>"u"){console.warn("Swiper not loaded - carousel disabled");return}let e=m(".professional-section .carousel-row"),t=m(".personal-section .carousel-row");if(!e||!t)return;T=e,L=t;let n=m(".professional-prev"),s=m(".professional-next"),a=m(".personal-prev"),i=m(".personal-next");!n||!s||!a||!i||(B=n,D=s,O=a,N=i,y=new Swiper(".professional-swiper",{...Le,navigation:{nextEl:".professional-next",prevEl:".professional-prev"},pagination:{el:".professional-pagination",clickable:!0}}),E=new Swiper(".personal-swiper",{...Le,navigation:{nextEl:".personal-next",prevEl:".personal-prev"},pagination:{el:".personal-pagination",clickable:!0}}),o(T,"selected"),h(),ut(),mt(),gt(),X())}function Y(){return P}var z=null,F=null;function xe(e,t){let n=!1;return function(...s){n||(e.apply(this,s),n=!0,setTimeout(()=>{n=!1},t))}}function He(e){let t=e.getBoundingClientRect();return t.top+t.height/2}function Z(){if(!z||!F)return;let e=window.innerHeight/2,t=He(z),n=He(F),s=Math.abs(e-t),a=Math.abs(e-n);s<a?Y()!=="professional"&&(S("professional"),h()):Y()!=="personal"&&(S("personal"),h())}function $e(){if(z=m(".professional-section .carousel-row"),F=m(".personal-section .carousel-row"),!z||!F)return;let e=xe(Z,100);window.addEventListener("scroll",e,{passive:!0}),requestAnimationFrame(()=>{requestAnimationFrame(Z)}),window.addEventListener("resize",xe(Z,200),{passive:!0})}var x=!1;function Ie(){A(".link").forEach(t=>{let n=t.getAttribute("data-preview");n&&ve(t,"--thumbnail-url",`url(${n})`)})}function ft(e){x=!x,localStorage.setItem("galleryEnabled",String(x)),x?(Ie(),o(document.body,"gallery-mode"),o(e,"active")):(r(document.body,"gallery-mode"),r(e,"active"))}function Ue(){let e=l("gallery-toggle");e&&(x=localStorage.getItem("galleryEnabled")==="true",x&&(Ie(),o(document.body,"gallery-mode"),o(e,"active")),e.addEventListener("click",()=>ft(e)))}var H=!1;function G(){document.body.classList.add("lite-mode"),H=!0;let e=l("video-toggle");e&&e.classList.contains("active")&&e.click()}function vt(){document.body.classList.remove("lite-mode"),H=!1;let e=l("video-toggle");e&&!e.classList.contains("active")&&e.click()}function wt(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function Ae(){let e=l("lite-toggle");if(wt()){G(),e&&o(e,"active");return}if(!e)return;localStorage.getItem("liteMode")==="true"&&(H=!0,o(e,"active"),G()),e.addEventListener("click",()=>{H?(vt(),r(e,"active")):(G(),o(e,"active")),localStorage.setItem("liteMode",String(H))}),window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",n=>{n.matches&&!H&&(G(),o(e,"active"))})}function Be(){let e=l("mindmap-btn"),t=l("btn-mindmap"),n=l("mindmap-overlay"),s=l("mindmap-overlay-close"),a=l("mindmap-iframe"),i=l("background-video");if(!e||!n||!s||!a)return;let c=e.href,u=null,d=!1,p=()=>{d||(a.src=c,d=!0,console.log("Loading mindmap iframe for first time:",c)),i&&(i.pause(),console.log("Paused background video (GPU optimization)")),o(n,"active"),o(e,"hidden")},v=()=>{r(n,"active"),r(e,"hidden"),i&&i.play().catch(f=>{console.warn("Could not resume background video:",f)})};e.addEventListener("mouseenter",()=>{u=window.setTimeout(()=>{p()},500)}),e.addEventListener("mouseleave",()=>{u&&(clearTimeout(u),u=null)}),e.addEventListener("click",f=>{f.preventDefault(),p()}),t&&t.addEventListener("click",()=>{p()}),s.addEventListener("click",()=>{v()}),n.addEventListener("click",f=>{f.target===n&&v()}),document.addEventListener("keydown",f=>{f.key==="Escape"&&n.classList.contains("active")&&v()})}var De="https://api.diegonmarcos.com",Oe="oci-p-flex_1",ht="https://cloud.oracle.com/compute/instances",$=!1,Q="unknown",Ne=!1;function q(e){let t=l("vm-status-indicator");if(!t)return;r(t,"status-online"),r(t,"status-offline"),r(t,"status-loading"),r(t,"status-unknown"),o(t,`status-${e}`);let n={online:"VM Online",offline:"VM Offline",loading:"Checking...",unknown:"Status Unknown"};t.title=n[e]}function te(e){let t=l("vm-start-btn"),n=l("vm-stop-btn"),s=l("vm-reboot-btn");if(!(!t||!n||!s)){if(e==="loading"){t.disabled=!0,n.disabled=!0,s.disabled=!0,o(t,"btn-loading"),o(n,"btn-loading"),o(s,"btn-loading");return}r(t,"btn-loading"),r(n,"btn-loading"),r(s,"btn-loading"),e==="running"?(t.disabled=!0,n.disabled=!1,s.disabled=!1,o(t,"btn-inactive"),r(n,"btn-inactive"),r(s,"btn-inactive")):(t.disabled=!1,n.disabled=!0,s.disabled=!0,r(t,"btn-inactive"),o(n,"btn-inactive"),o(s,"btn-inactive"))}}async function bt(){try{let e=new AbortController,t=setTimeout(()=>e.abort(),5e3),n=await fetch(`${De}/vms/${Oe}/status`,{method:"GET",signal:e.signal});if(clearTimeout(t),n.ok){let s=await n.json();return{apiOk:!0,vmOnline:s.pingable===!0||s.sshable===!0}}return{apiOk:!1}}catch{return{apiOk:!1}}}async function M(){q("loading");let e=await bt();Ne=e.apiOk,e.apiOk&&e.vmOnline!==void 0?(Q=e.vmOnline?"online":"offline",q(Q),te(e.vmOnline?"running":"stopped")):(Q="unknown",q("unknown"),te("stopped"))}async function ee(e){if(!Ne)return _("Opening OCI Console...",!1),window.open(ht,"_blank"),!1;let t=localStorage.getItem("api_token");if(!t){let n=prompt("Enter API token for VM control:");if(!n)return _("Token required",!0),!1;t=n,localStorage.setItem("api_token",t)}try{$=!0,te("loading"),q("loading");let n=await fetch(`${De}/vms/${Oe}/${e}`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(n.status===401||n.status===403)return localStorage.removeItem("api_token"),_("Invalid token",!0),$=!1,await M(),!1;if(!n.ok)throw new Error(`HTTP ${n.status}`);if((await n.json()).success)return _({start:"VM starting...",stop:"VM stopping...",reboot:"VM rebooting..."}[e]||"Done"),setTimeout(()=>M(),1e4),setTimeout(()=>M(),3e4),setTimeout(()=>M(),6e4),!0;throw new Error("Action failed")}catch(n){return console.error(`VM ${e} failed:`,n),_("Action failed",!0),!1}finally{$=!1,await M()}}function _(e,t=!1){let n=document.createElement("div");n.className=`vm-toast ${t?"vm-toast-error":"vm-toast-success"}`,n.textContent=e,document.body.appendChild(n),requestAnimationFrame(()=>{o(n,"vm-toast-visible")}),setTimeout(()=>{r(n,"vm-toast-visible"),setTimeout(()=>n.remove(),300)},3e3)}function _e(){let e=l("vm-start-btn"),t=l("vm-stop-btn"),n=l("vm-reboot-btn");!e||!t||!n||(e.addEventListener("click",async s=>{s.preventDefault(),!$&&!e.disabled&&await ee("start")}),t.addEventListener("click",async s=>{s.preventDefault(),!$&&!t.disabled&&confirm("Stop the on-demand VPS? Services will become unavailable.")&&await ee("stop")}),n.addEventListener("click",async s=>{s.preventDefault(),!$&&!n.disabled&&confirm("Reboot the on-demand VPS? This will take ~2 minutes.")&&await ee("reboot")}),M(),setInterval(M,3e4))}function yt(){we(),he(),fe(),Be(),Te(),Se(),Pe(),$e(),Ue(),Ae(),_e(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=document.querySelector(".controls-fab-container"),t=document.getElementById("mindmap-btn");e&&(e.style.visibility="visible"),t&&(t.style.visibility="visible")})})}function ne(){requestAnimationFrame(()=>{requestAnimationFrame(yt)})}document.addEventListener("DOMContentLoaded",async()=>{if(await me(),typeof Swiper<"u")ne();else{let e=setTimeout(ne,5e3);window.addEventListener("swiperReady",()=>{clearTimeout(e),ne()})}});})();
