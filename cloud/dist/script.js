"use strict";(()=>{function r(){document.querySelectorAll(".card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.zIndex="10"}),e.addEventListener("mouseleave",()=>{e.style.zIndex="1",e.style.transform="translateY(0) scale(1) rotateX(0) rotateY(0)"}),e.addEventListener("mousemove",n=>{let o=e.getBoundingClientRect(),s=n.clientX-o.left,c=n.clientY-o.top,l=o.width/2,y=o.height/2,S=(c-y)/10,x=(l-s)/10;e.style.transform=`
                translateY(-12px)
                scale(1.02)
                perspective(1000px)
                rotateX(${S}deg)
                rotateY(${x}deg)
            `})})}function m(){document.querySelectorAll(".card-status").forEach(e=>{setInterval(()=>{Math.random()>.95&&(e.style.animation="pulse 0.5s ease-in-out",setTimeout(()=>{e.style.animation=""},500))},2e3)})}function i(t){let e=document.createElement("div");e.className="notification",e.textContent=t,document.body.appendChild(e),setTimeout(()=>{e.classList.add("closing"),setTimeout(()=>e.remove(),300)},2e3)}function u(t){let e=t.match(/ssh:\/\/(.+)@(.+)/);if(!e)return null;let n=e[1],o=e[2],s=`ssh -i ~/.ssh/matomo_key ${n}@${o}`;return{username:n,host:o,command:s}}function p(t){let e=document.createElement("div");e.className="ssh-modal-overlay",e.innerHTML=`
        <div class="ssh-modal">
            <h3>SSH Connection to ${t.host}</h3>
            <div class="ssh-command">
                <code>${t.command}</code>
                <button class="copy-btn" data-action="copy">Copy</button>
            </div>
            <p class="ssh-instruction">Choose how to connect:</p>
            <div class="ssh-options">
                <button class="ssh-option-btn" data-action="terminal">
                    Open in Terminal
                </button>
                <button class="ssh-option-btn" data-action="vscode">
                    Open in VS Code
                </button>
            </div>
            <button class="close-modal-btn" data-action="close">Close</button>
        </div>
    `,e.addEventListener("click",n=>{let s=n.target.dataset.action;n.target===e||s==="close"?a():s==="copy"?v(t.command):s==="terminal"?L(t.command):s==="vscode"&&b(t)}),document.body.appendChild(e)}function a(){let t=document.querySelector(".ssh-modal-overlay");t&&t.remove()}function v(t){navigator.clipboard.writeText(t).then(()=>{i("SSH command copied to clipboard!")})}function L(t){let e=/Linux/.test(navigator.userAgent),n=/Mac/.test(navigator.userAgent);e?window.location.href=`gnome-terminal://execute/${encodeURIComponent(t)}`:n?window.location.href=`terminal://execute/${encodeURIComponent(t)}`:(v(t),i("Command copied! Paste it in your terminal.")),a()}function b(t){let{username:e,host:n}=t;window.open(`vscode://vscode-remote/ssh-remote+${e}@${n}/home/${e}`,"_blank"),a()}var C={analytics:"https://analytics.diegonmarcos.com",sync:"https://sync.diegonmarcos.com",n8n:"https://n8n.diegonmarcos.com","vps-oracle":"https://cloud.oracle.com/","vps-gcloud":"https://console.cloud.google.com/","vm-webserver1":"ssh://ubuntu@130.110.251.193","vm-servicesserver1":"ssh://ubuntu@129.151.228.66","vm-arch1":"ssh://user@pending",mail:"#pending",terminal:"#pending",dashboard:"#pending"};function d(t){let e=C[t];e&&(console.log(`Navigating to ${t}: ${e}`),e.startsWith("ssh://")?w(e):e==="#pending"?i("This service is under development."):e.startsWith("http")?window.open(e,"_blank"):window.location.href=e)}function w(t){let e=u(t);if(e){if(e.host==="pending"||e.host.includes("pending")){i("This VM is not yet configured. IP address pending.");return}p(e)}}function h(){let t=document.querySelectorAll(".view-btn"),e={cards:document.getElementById("cards-view"),tree:document.getElementById("tree-view"),architecture:document.getElementById("architecture-view")};t.forEach(n=>{n.addEventListener("click",()=>{let o=n.dataset.view;o&&(t.forEach(s=>s.classList.remove("active")),n.classList.add("active"),Object.keys(e).forEach(s=>{let c=e[s];c&&(s===o?c.classList.add("active"):c.classList.remove("active"))}))})})}function f(){document.querySelectorAll(".tree-node[data-expanded]").forEach(e=>{let n=e.querySelector(".node-header"),o=e.querySelector(".expand-icon"),s=e.nextElementSibling;n&&(s!=null&&s.classList.contains("tree-children"))&&n.addEventListener("click",c=>{c.stopPropagation(),e.dataset.expanded==="true"?(e.dataset.expanded="false",o==null||o.classList.remove("expanded"),s.classList.remove("expanded")):(e.dataset.expanded="true",o==null||o.classList.add("expanded"),s.classList.add("expanded"))})})}function g(){document.querySelectorAll(".tree-node.service-node.clickable").forEach(e=>{e.addEventListener("click",()=>{let n=e.dataset.service;if(n){let o=new CustomEvent("service-click",{detail:{service:n}});document.dispatchEvent(o)}})})}function T(){document.querySelectorAll(".tree-node[data-expanded]").forEach(e=>{var o;e.dataset.expanded="true",(o=e.querySelector(".expand-icon"))==null||o.classList.add("expanded");let n=e.nextElementSibling;n!=null&&n.classList.contains("tree-children")&&n.classList.add("expanded")})}function H(){document.querySelectorAll(".tree-node[data-expanded]").forEach(e=>{var o;e.dataset.expanded="false",(o=e.querySelector(".expand-icon"))==null||o.classList.remove("expanded");let n=e.nextElementSibling;n!=null&&n.classList.contains("tree-children")&&n.classList.remove("expanded")})}function E(){let t=document.getElementById("expand-all"),e=document.getElementById("collapse-all");t==null||t.addEventListener("click",T),e==null||e.addEventListener("click",H)}document.addEventListener("DOMContentLoaded",()=>{r(),m(),document.querySelectorAll(".card").forEach(e=>{e.addEventListener("click",()=>{let n=e.dataset.service;n&&d(n)})}),h(),f(),g(),E(),document.addEventListener("service-click",e=>{let n=e.detail.service;n&&d(n)})});})();
