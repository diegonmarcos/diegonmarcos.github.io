import{a as xn,f as Un}from"../chunks/DUnnsJax.js";import{h as j,n as Bn,J as Ce,a as rt,j as dr,f as Te,A as b,k as mr,H as wr,l as Qt,o as Yn,e as Nn,a3 as Ie,av as _r,af as Kt,c as Sr,b as Rt,s as Er,aG as yr,aN as Mr,at as Wt,aO as Pr,a1 as ne,aP as $r,aQ as Rr,z as Ar,aR as pn,r as ke,p as Le,aS as St,aT as xr,as as Nr,d as Cr,ap as At,aU as Tr,aV as Ir,aW as kr,aX as Lr,X as be,F as br,Z as it,_ as ze,B as hn,g as nn,i as V,aL as Cn,Y as zr,$ as tn,aY as Fr,aZ as Dr}from"../chunks/BeyDceIe.js";import{d as Fe,e as te,s as Jn}from"../chunks/jjs3inW3.js";import{b as Br,s as De,a as un,i as ee}from"../chunks/B1540Zmh.js";import"../chunks/CI9tqkQd.js";import{d as Be,w as wt,o as Yr}from"../chunks/D1mpTHC2.js";function qr(n,t){return t}function Gr(n,t,r){for(var e=[],i=t.length,u,c=t.length,l=0;l<i;l++){let a=t[l];Le(a,()=>{if(u){if(u.pending.delete(a),u.done.add(a),u.pending.size===0){var f=n.outrogroups;xt(Wt(u.done)),f.delete(u),f.size===0&&(n.outrogroups=null)}}else c-=1},!1)}if(c===0){var v=e.length===0&&r!==null;if(v){var s=r,o=s.parentNode;Nr(o),o.append(s),n.items.clear()}xt(t,!v)}else u={pending:new Set(t),done:new Set},(n.outrogroups??=new Set).add(u)}function xt(n,t=!0){for(var r=0;r<n.length;r++)Cr(n[r],t)}var re;function Or(n,t,r,e,i,u=null){var c=n,l=new Map;{var v=n;c=j?Bn(Ce(v)):v.appendChild(rt())}j&&dr();var s=null,o=yr(()=>{var m=r();return Mr(m)?m:m==null?[]:Wt(m)}),a,f=!0;function h(){_.fallback=s,jr(_,a,c,t,e),s!==null&&(a.length===0?(s.f&pn)===0?ke(s):(s.f^=pn,Tn(s,null,c)):Le(s,()=>{s=null}))}var p=Te(()=>{a=b(o);var m=a.length;let w=!1;if(j){var E=mr(c)===wr;E!==(m===0)&&(c=Qt(),Bn(c),Yn(!1),w=!0)}for(var d=new Set,y=Sr,$=Er(),R=0;R<m;R+=1){j&&Nn.nodeType===Ie&&Nn.data===_r&&(c=Nn,w=!0,Yn(!1));var x=a[R],A=e(x,R),M=f?null:l.get(A);M?(M.v&&Kt(M.v,x),M.i&&Kt(M.i,R),$&&y.skipped_effects.delete(M.e)):(M=Hr(l,f?c:re??=rt(),x,A,R,i,t,r),f||(M.e.f|=pn),l.set(A,M)),d.add(A)}if(m===0&&u&&!s&&(f?s=Rt(()=>u(c)):(s=Rt(()=>u(re??=rt())),s.f|=pn)),j&&m>0&&Bn(Qt()),!f)if($){for(const[P,S]of l)d.has(P)||y.skipped_effects.add(S.e);y.oncommit(h),y.ondiscard(()=>{})}else h();w&&Yn(!0),b(o)}),_={effect:p,items:l,outrogroups:null,fallback:s};f=!1,j&&(c=Nn)}function Rn(n){for(;n!==null&&(n.f&xr)===0;)n=n.next;return n}function jr(n,t,r,e,i){var u=t.length,c=n.items,l=Rn(n.effect.first),v,s=null,o=[],a=[],f,h,p,_;for(_=0;_<u;_+=1){if(f=t[_],h=i(f,_),p=c.get(h).e,n.outrogroups!==null)for(const A of n.outrogroups)A.pending.delete(p),A.done.delete(p);if((p.f&pn)!==0)if(p.f^=pn,p===l)Tn(p,null,r);else{var m=s?s.next:l;p===n.effect.last&&(n.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),sn(n,s,p),sn(n,p,m),Tn(p,m,r),s=p,o=[],a=[],l=Rn(s.next);continue}if((p.f&St)!==0&&ke(p),p!==l){if(v!==void 0&&v.has(p)){if(o.length<a.length){var w=a[0],E;s=w.prev;var d=o[0],y=o[o.length-1];for(E=0;E<o.length;E+=1)Tn(o[E],w,r);for(E=0;E<a.length;E+=1)v.delete(a[E]);sn(n,d.prev,y.next),sn(n,s,d),sn(n,y,w),l=w,s=y,_-=1,o=[],a=[]}else v.delete(p),Tn(p,l,r),sn(n,p.prev,p.next),sn(n,p,s===null?n.effect.first:s.next),sn(n,s,p),s=p;continue}for(o=[],a=[];l!==null&&l!==p;)(v??=new Set).add(l),a.push(l),l=Rn(l.next);if(l===null)continue}(p.f&pn)===0&&o.push(p),s=p,l=Rn(p.next)}if(n.outrogroups!==null){for(const A of n.outrogroups)A.pending.size===0&&(xt(Wt(A.done)),n.outrogroups?.delete(A));n.outrogroups.size===0&&(n.outrogroups=null)}if(l!==null||v!==void 0){var $=[];if(v!==void 0)for(p of v)(p.f&St)===0&&$.push(p);for(;l!==null;)(l.f&St)===0&&l!==n.fallback&&$.push(l),l=Rn(l.next);var R=$.length;if(R>0){var x=u===0?r:null;Gr(n,$,x)}}}function Hr(n,t,r,e,i,u,c,l){var v=(c&$r)!==0?(c&Rr)===0?Ar(r,!1,!1):ne(r):null,s=(c&Pr)!==0?ne(i):null;return{v,i:s,e:Rt(()=>(u(t,v??r,s??i,l),()=>{n.delete(e)}))}}function Tn(n,t,r){if(n.nodes)for(var e=n.nodes.start,i=n.nodes.end,u=t&&(t.f&pn)===0?t.nodes.start:r;e!==null;){var c=At(e);if(u.before(e),e===i)return;e=c}}function sn(n,t,r){t===null?n.effect.first=r:t.next=r,r===null?n.effect.last=t:r.prev=t}function Xr(n,t){let r=null,e=j;var i;if(j){r=Nn;for(var u=Ce(document.head);u!==null&&(u.nodeType!==Ie||u.data!==n);)u=At(u);if(u===null)Yn(!1);else{var c=At(u);u.remove(),Bn(c)}}j||(i=document.head.appendChild(rt()));try{Te(()=>t(i),Tr)}finally{e&&(Yn(!0),Bn(r))}}const ie=[...` 	
\r\f \v\uFEFF`];function Zr(n,t,r){var e=n==null?"":""+n;if(r){for(var i in r)if(r[i])e=e?e+" "+i:i;else if(e.length)for(var u=i.length,c=0;(c=e.indexOf(i,c))>=0;){var l=c+u;(c===0||ie.includes(e[c-1]))&&(l===e.length||ie.includes(e[l]))?e=(c===0?"":e.substring(0,c))+e.substring(l+1):c=l}}return e===""?null:e}function Wr(n,t){return n==null?null:String(n)}function Et(n,t,r,e,i,u){var c=n.__className;if(j||c!==r||c===void 0){var l=Zr(r,e,u);(!j||l!==n.getAttribute("class"))&&(l==null?n.removeAttribute("class"):n.className=l),n.__className=r}else if(u&&i!==u)for(var v in u){var s=!!u[v];(i==null||s!==!!i[v])&&n.classList.toggle(v,s)}return u}function Ur(n,t,r,e){var i=n.__style;if(j||i!==t){var u=Wr(t);(!j||u!==n.getAttribute("style"))&&(u==null?n.removeAttribute("style"):n.style.cssText=u),n.__style=t}return e}const Vr=Symbol("is custom element"),Jr=Symbol("is html");function Qr(n,t,r,e){var i=Kr(n);j&&(i[t]=n.getAttribute(t)),i[t]!==(i[t]=r)&&(r==null?n.removeAttribute(t):typeof r!="string"&&ni(n).includes(t)?n[t]=r:n.setAttribute(t,r))}function Kr(n){return n.__attributes??={[Vr]:n.nodeName.includes("-"),[Jr]:n.namespaceURI===Ir}}var oe=new Map;function ni(n){var t=n.getAttribute("is")||n.nodeName,r=oe.get(t);if(r)return r;oe.set(t,r=[]);for(var e,i=n,u=Element.prototype;u!==i;){e=Lr(i);for(var c in e)e[c].set&&r.push(c);i=kr(i)}return r}class vn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let e=0;for(let i=0;i<this._n&&i<32;i++){const u=r[i],c=t+u,l=Math.abs(t)<Math.abs(u)?t-(c-u):u-(c-t);l&&(r[e++]=l),t=c}return r[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let r=this._n,e,i,u,c=0;if(r>0){for(c=t[--r];r>0&&(e=c,i=t[--r],c=e+i,u=i-(c-e),!u););r>0&&(u<0&&t[r-1]<0||u>0&&t[r-1]>0)&&(i=u*2,e=c+i,i==e-c&&(c=e))}return c}}function*ti(n){for(const t of n)yield*t}function Ye(n){return Array.from(ti(n))}function wn(n,t,r){n=+n,t=+t,r=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+r;for(var e=-1,i=Math.max(0,Math.ceil((t-n)/r))|0,u=new Array(i);++e<i;)u[e]=n+e*r;return u}var T=1e-6,qe=1e-12,I=Math.PI,H=I/2,ae=I/4,W=I*2,Z=180/I,G=I/180,F=Math.abs,Ge=Math.atan,yn=Math.atan2,B=Math.cos,Qn=Math.ceil,ei=Math.exp,ri=Math.log,D=Math.sin,ii=Math.sign||function(n){return n>0?1:n<0?-1:0},fn=Math.sqrt,oi=Math.tan;function ai(n){return n>1?0:n<-1?I:Math.acos(n)}function cn(n){return n>1?H:n<-1?-H:Math.asin(n)}function Q(){}function at(n,t){n&&le.hasOwnProperty(n.type)&&le[n.type](n,t)}var ue={Feature:function(n,t){at(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,e=-1,i=r.length;++e<i;)at(r[e].geometry,t)}},le={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)n=r[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){Nt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)Nt(r[e],t,0)},Polygon:function(n,t){ce(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)ce(r[e],t)},GeometryCollection:function(n,t){for(var r=n.geometries,e=-1,i=r.length;++e<i;)at(r[e],t)}};function Nt(n,t,r){var e=-1,i=n.length-r,u;for(t.lineStart();++e<i;)u=n[e],t.point(u[0],u[1],u[2]);t.lineEnd()}function ce(n,t){var r=-1,e=n.length;for(t.polygonStart();++r<e;)Nt(n[r],t,1);t.polygonEnd()}function mn(n,t){n&&ue.hasOwnProperty(n.type)?ue[n.type](n,t):at(n,t)}function Ct(n){return[yn(n[1],n[0]),cn(n[2])]}function Mn(n){var t=n[0],r=n[1],e=B(r);return[e*B(t),e*D(t),D(r)]}function Kn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function ut(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function yt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function nt(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Tt(n){var t=fn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function It(n,t){function r(e,i){return e=n(e,i),t(e[0],e[1])}return n.invert&&t.invert&&(r.invert=function(e,i){return e=t.invert(e,i),e&&n.invert(e[0],e[1])}),r}function kt(n,t){return F(n)>I&&(n-=Math.round(n/W)*W),[n,t]}kt.invert=kt;function Oe(n,t,r){return(n%=W)?t||r?It(se(n),pe(t,r)):se(n):t||r?pe(t,r):kt}function fe(n){return function(t,r){return t+=n,F(t)>I&&(t-=Math.round(t/W)*W),[t,r]}}function se(n){var t=fe(n);return t.invert=fe(-n),t}function pe(n,t){var r=B(n),e=D(n),i=B(t),u=D(t);function c(l,v){var s=B(v),o=B(l)*s,a=D(l)*s,f=D(v),h=f*r+o*e;return[yn(a*i-h*u,o*r-f*e),cn(h*i+a*u)]}return c.invert=function(l,v){var s=B(v),o=B(l)*s,a=D(l)*s,f=D(v),h=f*i-a*u;return[yn(a*i+f*u,o*r+h*e),cn(h*r-o*e)]},c}function ui(n){n=Oe(n[0]*G,n[1]*G,n.length>2?n[2]*G:0);function t(r){return r=n(r[0]*G,r[1]*G),r[0]*=Z,r[1]*=Z,r}return t.invert=function(r){return r=n.invert(r[0]*G,r[1]*G),r[0]*=Z,r[1]*=Z,r},t}function li(n,t,r,e,i,u){if(r){var c=B(t),l=D(t),v=e*r;i==null?(i=t+e*W,u=t-v/2):(i=he(c,i),u=he(c,u),(e>0?i<u:i>u)&&(i+=e*W));for(var s,o=i;e>0?o>u:o<u;o-=v)s=Ct([c,-l*B(o),-l*D(o)]),n.point(s[0],s[1])}}function he(n,t){t=Mn(t),t[0]-=n,Tt(t);var r=ai(-t[1]);return((-t[2]<0?-r:r)+W-T)%W}function je(){var n=[],t;return{point:function(r,e,i){t.push([r,e,i])},lineStart:function(){n.push(t=[])},lineEnd:Q,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var r=n;return n=[],t=null,r}}}function ot(n,t){return F(n[0]-t[0])<T&&F(n[1]-t[1])<T}function tt(n,t,r,e){this.x=n,this.z=t,this.o=r,this.e=e,this.v=!1,this.n=this.p=null}function He(n,t,r,e,i){var u=[],c=[],l,v;if(n.forEach(function(p){if(!((_=p.length-1)<=0)){var _,m=p[0],w=p[_],E;if(ot(m,w)){if(!m[2]&&!w[2]){for(i.lineStart(),l=0;l<_;++l)i.point((m=p[l])[0],m[1]);i.lineEnd();return}w[0]+=2*T}u.push(E=new tt(m,p,null,!0)),c.push(E.o=new tt(m,null,E,!1)),u.push(E=new tt(w,p,null,!1)),c.push(E.o=new tt(w,null,E,!0))}}),!!u.length){for(c.sort(t),ve(u),ve(c),l=0,v=c.length;l<v;++l)c[l].e=r=!r;for(var s=u[0],o,a;;){for(var f=s,h=!0;f.v;)if((f=f.n)===s)return;o=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(l=0,v=o.length;l<v;++l)i.point((a=o[l])[0],a[1]);else e(f.x,f.n.x,1,i);f=f.n}else{if(h)for(o=f.p.z,l=o.length-1;l>=0;--l)i.point((a=o[l])[0],a[1]);else e(f.x,f.p.x,-1,i);f=f.p}f=f.o,o=f.z,h=!h}while(!f.v);i.lineEnd()}}}function ve(n){if(t=n.length){for(var t,r=0,e=n[0],i;++r<t;)e.n=i=n[r],i.p=e,e=i;e.n=i=n[0],i.p=e}}function Mt(n){return F(n[0])<=I?n[0]:ii(n[0])*((F(n[0])+I)%W-I)}function ci(n,t){var r=Mt(t),e=t[1],i=D(e),u=[D(r),-B(r),0],c=0,l=0,v=new vn;i===1?e=H+T:i===-1&&(e=-H-T);for(var s=0,o=n.length;s<o;++s)if(f=(a=n[s]).length)for(var a,f,h=a[f-1],p=Mt(h),_=h[1]/2+ae,m=D(_),w=B(_),E=0;E<f;++E,p=y,m=R,w=x,h=d){var d=a[E],y=Mt(d),$=d[1]/2+ae,R=D($),x=B($),A=y-p,M=A>=0?1:-1,P=M*A,S=P>I,z=m*R;if(v.add(yn(z*M*D(P),w*x+z*B(P))),c+=S?A+M*W:A,S^p>=r^y>=r){var k=ut(Mn(h),Mn(d));Tt(k);var C=ut(u,k);Tt(C);var g=(S^A>=0?-1:1)*cn(C[2]);(e>g||e===g&&(k[0]||k[1]))&&(l+=S^A>=0?1:-1)}}return(c<-T||c<T&&v<-qe)^l&1}function Xe(n,t,r,e){return function(i){var u=t(i),c=je(),l=t(c),v=!1,s,o,a,f={point:h,lineStart:_,lineEnd:m,polygonStart:function(){f.point=w,f.lineStart=E,f.lineEnd=d,o=[],s=[]},polygonEnd:function(){f.point=h,f.lineStart=_,f.lineEnd=m,o=Ye(o);var y=ci(s,e);o.length?(v||(i.polygonStart(),v=!0),He(o,si,y,r,i)):y&&(v||(i.polygonStart(),v=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),v&&(i.polygonEnd(),v=!1),o=s=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(y,$){n(y,$)&&i.point(y,$)}function p(y,$){u.point(y,$)}function _(){f.point=p,u.lineStart()}function m(){f.point=h,u.lineEnd()}function w(y,$){a.push([y,$]),l.point(y,$)}function E(){l.lineStart(),a=[]}function d(){w(a[0][0],a[0][1]),l.lineEnd();var y=l.clean(),$=c.result(),R,x=$.length,A,M,P;if(a.pop(),s.push(a),a=null,!!x){if(y&1){if(M=$[0],(A=M.length-1)>0){for(v||(i.polygonStart(),v=!0),i.lineStart(),R=0;R<A;++R)i.point((P=M[R])[0],P[1]);i.lineEnd()}return}x>1&&y&2&&$.push($.pop().concat($.shift())),o.push($.filter(fi))}}return f}}function fi(n){return n.length>1}function si(n,t){return((n=n.x)[0]<0?n[1]-H-T:H-n[1])-((t=t.x)[0]<0?t[1]-H-T:H-t[1])}const ge=Xe(function(){return!0},pi,vi,[-I,-H]);function pi(n){var t=NaN,r=NaN,e=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(u,c){var l=u>0?I:-I,v=F(u-t);F(v-I)<T?(n.point(t,r=(r+c)/2>0?H:-H),n.point(e,r),n.lineEnd(),n.lineStart(),n.point(l,r),n.point(u,r),i=0):e!==l&&v>=I&&(F(t-e)<T&&(t-=e*T),F(u-l)<T&&(u-=l*T),r=hi(t,r,u,c),n.point(e,r),n.lineEnd(),n.lineStart(),n.point(l,r),i=0),n.point(t=u,r=c),e=l},lineEnd:function(){n.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function hi(n,t,r,e){var i,u,c=D(n-r);return F(c)>T?Ge((D(t)*(u=B(e))*D(r)-D(e)*(i=B(t))*D(n))/(i*u*c)):(t+e)/2}function vi(n,t,r,e){var i;if(n==null)i=r*H,e.point(-I,i),e.point(0,i),e.point(I,i),e.point(I,0),e.point(I,-i),e.point(0,-i),e.point(-I,-i),e.point(-I,0),e.point(-I,i);else if(F(n[0]-t[0])>T){var u=n[0]<t[0]?I:-I;i=r*u/2,e.point(-u,i),e.point(0,i),e.point(u,i)}else e.point(t[0],t[1])}function gi(n){var t=B(n),r=2*G,e=t>0,i=F(t)>T;function u(o,a,f,h){li(h,n,r,f,o,a)}function c(o,a){return B(o)*B(a)>t}function l(o){var a,f,h,p,_;return{lineStart:function(){p=h=!1,_=1},point:function(m,w){var E=[m,w],d,y=c(m,w),$=e?y?0:s(m,w):y?s(m+(m<0?I:-I),w):0;if(!a&&(p=h=y)&&o.lineStart(),y!==h&&(d=v(a,E),(!d||ot(a,d)||ot(E,d))&&(E[2]=1)),y!==h)_=0,y?(o.lineStart(),d=v(E,a),o.point(d[0],d[1])):(d=v(a,E),o.point(d[0],d[1],2),o.lineEnd()),a=d;else if(i&&a&&e^y){var R;!($&f)&&(R=v(E,a,!0))&&(_=0,e?(o.lineStart(),o.point(R[0][0],R[0][1]),o.point(R[1][0],R[1][1]),o.lineEnd()):(o.point(R[1][0],R[1][1]),o.lineEnd(),o.lineStart(),o.point(R[0][0],R[0][1],3)))}y&&(!a||!ot(a,E))&&o.point(E[0],E[1]),a=E,h=y,f=$},lineEnd:function(){h&&o.lineEnd(),a=null},clean:function(){return _|(p&&h)<<1}}}function v(o,a,f){var h=Mn(o),p=Mn(a),_=[1,0,0],m=ut(h,p),w=Kn(m,m),E=m[0],d=w-E*E;if(!d)return!f&&o;var y=t*w/d,$=-t*E/d,R=ut(_,m),x=nt(_,y),A=nt(m,$);yt(x,A);var M=R,P=Kn(x,M),S=Kn(M,M),z=P*P-S*(Kn(x,x)-1);if(!(z<0)){var k=fn(z),C=nt(M,(-P-k)/S);if(yt(C,x),C=Ct(C),!f)return C;var g=o[0],N=a[0],Y=o[1],L=a[1],q;N<g&&(q=g,g=N,N=q);var U=N-g,O=F(U-I)<T,K=O||U<T;if(!O&&L<Y&&(q=Y,Y=L,L=q),K?O?Y+L>0^C[1]<(F(C[0]-g)<T?Y:L):Y<=C[1]&&C[1]<=L:U>I^(g<=C[0]&&C[0]<=N)){var X=nt(M,(-P+k)/S);return yt(X,x),[C,Ct(X)]}}}function s(o,a){var f=e?n:I-n,h=0;return o<-f?h|=1:o>f&&(h|=2),a<-f?h|=4:a>f&&(h|=8),h}return Xe(c,l,u,e?[0,-n]:[-I,n-I])}function di(n,t,r,e,i,u){var c=n[0],l=n[1],v=t[0],s=t[1],o=0,a=1,f=v-c,h=s-l,p;if(p=r-c,!(!f&&p>0)){if(p/=f,f<0){if(p<o)return;p<a&&(a=p)}else if(f>0){if(p>a)return;p>o&&(o=p)}if(p=i-c,!(!f&&p<0)){if(p/=f,f<0){if(p>a)return;p>o&&(o=p)}else if(f>0){if(p<o)return;p<a&&(a=p)}if(p=e-l,!(!h&&p>0)){if(p/=h,h<0){if(p<o)return;p<a&&(a=p)}else if(h>0){if(p>a)return;p>o&&(o=p)}if(p=u-l,!(!h&&p<0)){if(p/=h,h<0){if(p>a)return;p>o&&(o=p)}else if(h>0){if(p<o)return;p<a&&(a=p)}return o>0&&(n[0]=c+o*f,n[1]=l+o*h),a<1&&(t[0]=c+a*f,t[1]=l+a*h),!0}}}}}var In=1e9,et=-In;function mi(n,t,r,e){function i(s,o){return n<=s&&s<=r&&t<=o&&o<=e}function u(s,o,a,f){var h=0,p=0;if(s==null||(h=c(s,a))!==(p=c(o,a))||v(s,o)<0^a>0)do f.point(h===0||h===3?n:r,h>1?e:t);while((h=(h+a+4)%4)!==p);else f.point(o[0],o[1])}function c(s,o){return F(s[0]-n)<T?o>0?0:3:F(s[0]-r)<T?o>0?2:1:F(s[1]-t)<T?o>0?1:0:o>0?3:2}function l(s,o){return v(s.x,o.x)}function v(s,o){var a=c(s,1),f=c(o,1);return a!==f?a-f:a===0?o[1]-s[1]:a===1?s[0]-o[0]:a===2?s[1]-o[1]:o[0]-s[0]}return function(s){var o=s,a=je(),f,h,p,_,m,w,E,d,y,$,R,x={point:A,lineStart:z,lineEnd:k,polygonStart:P,polygonEnd:S};function A(g,N){i(g,N)&&o.point(g,N)}function M(){for(var g=0,N=0,Y=h.length;N<Y;++N)for(var L=h[N],q=1,U=L.length,O=L[0],K,X,on=O[0],an=O[1];q<U;++q)K=on,X=an,O=L[q],on=O[0],an=O[1],X<=e?an>e&&(on-K)*(e-X)>(an-X)*(n-K)&&++g:an<=e&&(on-K)*(e-X)<(an-X)*(n-K)&&--g;return g}function P(){o=a,f=[],h=[],R=!0}function S(){var g=M(),N=R&&g,Y=(f=Ye(f)).length;(N||Y)&&(s.polygonStart(),N&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),Y&&He(f,l,g,u,s),s.polygonEnd()),o=s,f=h=p=null}function z(){x.point=C,h&&h.push(p=[]),$=!0,y=!1,E=d=NaN}function k(){f&&(C(_,m),w&&y&&a.rejoin(),f.push(a.result())),x.point=A,y&&o.lineEnd()}function C(g,N){var Y=i(g,N);if(h&&p.push([g,N]),$)_=g,m=N,w=Y,$=!1,Y&&(o.lineStart(),o.point(g,N));else if(Y&&y)o.point(g,N);else{var L=[E=Math.max(et,Math.min(In,E)),d=Math.max(et,Math.min(In,d))],q=[g=Math.max(et,Math.min(In,g)),N=Math.max(et,Math.min(In,N))];di(L,q,n,t,r,e)?(y||(o.lineStart(),o.point(L[0],L[1])),o.point(q[0],q[1]),Y||o.lineEnd(),R=!1):Y&&(o.lineStart(),o.point(g,N),R=!1)}E=g,d=N,y=Y}return x}}function de(n,t,r){var e=wn(n,t-T,r).concat(t);return function(i){return e.map(function(u){return[i,u]})}}function me(n,t,r){var e=wn(n,t-T,r).concat(t);return function(i){return e.map(function(u){return[u,i]})}}function wi(){var n,t,r,e,i,u,c,l,v=10,s=v,o=90,a=360,f,h,p,_,m=2.5;function w(){return{type:"MultiLineString",coordinates:E()}}function E(){return wn(Qn(e/o)*o,r,o).map(p).concat(wn(Qn(l/a)*a,c,a).map(_)).concat(wn(Qn(t/v)*v,n,v).filter(function(d){return F(d%o)>T}).map(f)).concat(wn(Qn(u/s)*s,i,s).filter(function(d){return F(d%a)>T}).map(h))}return w.lines=function(){return E().map(function(d){return{type:"LineString",coordinates:d}})},w.outline=function(){return{type:"Polygon",coordinates:[p(e).concat(_(c).slice(1),p(r).reverse().slice(1),_(l).reverse().slice(1))]}},w.extent=function(d){return arguments.length?w.extentMajor(d).extentMinor(d):w.extentMinor()},w.extentMajor=function(d){return arguments.length?(e=+d[0][0],r=+d[1][0],l=+d[0][1],c=+d[1][1],e>r&&(d=e,e=r,r=d),l>c&&(d=l,l=c,c=d),w.precision(m)):[[e,l],[r,c]]},w.extentMinor=function(d){return arguments.length?(t=+d[0][0],n=+d[1][0],u=+d[0][1],i=+d[1][1],t>n&&(d=t,t=n,n=d),u>i&&(d=u,u=i,i=d),w.precision(m)):[[t,u],[n,i]]},w.step=function(d){return arguments.length?w.stepMajor(d).stepMinor(d):w.stepMinor()},w.stepMajor=function(d){return arguments.length?(o=+d[0],a=+d[1],w):[o,a]},w.stepMinor=function(d){return arguments.length?(v=+d[0],s=+d[1],w):[v,s]},w.precision=function(d){return arguments.length?(m=+d,f=de(u,i,90),h=me(t,n,m),p=de(l,c,90),_=me(e,r,m),w):m},w.extentMajor([[-180,-90+T],[180,90-T]]).extentMinor([[-180,-80-T],[180,80+T]])}function _i(){return wi()()}const Lt=n=>n;var Pt=new vn,bt=new vn,Ze,We,zt,Ft,ln={point:Q,lineStart:Q,lineEnd:Q,polygonStart:function(){ln.lineStart=Si,ln.lineEnd=yi},polygonEnd:function(){ln.lineStart=ln.lineEnd=ln.point=Q,Pt.add(F(bt)),bt=new vn},result:function(){var n=Pt/2;return Pt=new vn,n}};function Si(){ln.point=Ei}function Ei(n,t){ln.point=Ue,Ze=zt=n,We=Ft=t}function Ue(n,t){bt.add(Ft*n-zt*t),zt=n,Ft=t}function yi(){Ue(Ze,We)}var Pn=1/0,lt=Pn,Xn=-Pn,ct=Xn,ft={point:Mi,lineStart:Q,lineEnd:Q,polygonStart:Q,polygonEnd:Q,result:function(){var n=[[Pn,lt],[Xn,ct]];return Xn=ct=-(lt=Pn=1/0),n}};function Mi(n,t){n<Pn&&(Pn=n),n>Xn&&(Xn=n),t<lt&&(lt=t),t>ct&&(ct=t)}var Dt=0,Bt=0,kn=0,st=0,pt=0,_n=0,Yt=0,qt=0,Ln=0,Ve,Je,en,rn,J={point:gn,lineStart:we,lineEnd:_e,polygonStart:function(){J.lineStart=Ri,J.lineEnd=Ai},polygonEnd:function(){J.point=gn,J.lineStart=we,J.lineEnd=_e},result:function(){var n=Ln?[Yt/Ln,qt/Ln]:_n?[st/_n,pt/_n]:kn?[Dt/kn,Bt/kn]:[NaN,NaN];return Dt=Bt=kn=st=pt=_n=Yt=qt=Ln=0,n}};function gn(n,t){Dt+=n,Bt+=t,++kn}function we(){J.point=Pi}function Pi(n,t){J.point=$i,gn(en=n,rn=t)}function $i(n,t){var r=n-en,e=t-rn,i=fn(r*r+e*e);st+=i*(en+n)/2,pt+=i*(rn+t)/2,_n+=i,gn(en=n,rn=t)}function _e(){J.point=gn}function Ri(){J.point=xi}function Ai(){Qe(Ve,Je)}function xi(n,t){J.point=Qe,gn(Ve=en=n,Je=rn=t)}function Qe(n,t){var r=n-en,e=t-rn,i=fn(r*r+e*e);st+=i*(en+n)/2,pt+=i*(rn+t)/2,_n+=i,i=rn*n-en*t,Yt+=i*(en+n),qt+=i*(rn+t),Ln+=i*3,gn(en=n,rn=t)}function Ke(n){this._context=n}Ke.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,W);break}}},result:Q};var Gt=new vn,$t,nr,tr,bn,zn,Zn={point:Q,lineStart:function(){Zn.point=Ni},lineEnd:function(){$t&&er(nr,tr),Zn.point=Q},polygonStart:function(){$t=!0},polygonEnd:function(){$t=null},result:function(){var n=+Gt;return Gt=new vn,n}};function Ni(n,t){Zn.point=er,nr=bn=n,tr=zn=t}function er(n,t){bn-=n,zn-=t,Gt.add(fn(bn*bn+zn*zn)),bn=n,zn=t}let Se,ht,Ee,ye;class Me{constructor(t){this._append=t==null?rr:Ci(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==Ee||this._append!==ht){const e=this._radius,i=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,Ee=e,ht=this._append,ye=this._,this._=i}this._+=ye;break}}}result(){const t=this._;return this._="",t.length?t:null}}function rr(n){let t=1;this._+=n[0];for(const r=n.length;t<r;++t)this._+=arguments[t]+n[t]}function Ci(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return rr;if(t!==Se){const r=10**t;Se=t,ht=function(i){let u=1;this._+=i[0];for(const c=i.length;u<c;++u)this._+=Math.round(arguments[u]*r)/r+i[u]}}return ht}function Ti(n,t){let r=3,e=4.5,i,u;function c(l){return l&&(typeof e=="function"&&u.pointRadius(+e.apply(this,arguments)),mn(l,i(u))),u.result()}return c.area=function(l){return mn(l,i(ln)),ln.result()},c.measure=function(l){return mn(l,i(Zn)),Zn.result()},c.bounds=function(l){return mn(l,i(ft)),ft.result()},c.centroid=function(l){return mn(l,i(J)),J.result()},c.projection=function(l){return arguments.length?(i=l==null?(n=null,Lt):(n=l).stream,c):n},c.context=function(l){return arguments.length?(u=l==null?(t=null,new Me(r)):new Ke(t=l),typeof e!="function"&&u.pointRadius(e),c):t},c.pointRadius=function(l){return arguments.length?(e=typeof l=="function"?l:(u.pointRadius(+l),+l),c):e},c.digits=function(l){if(!arguments.length)return r;if(l==null)r=null;else{const v=Math.floor(l);if(!(v>=0))throw new RangeError(`invalid digits: ${l}`);r=v}return t===null&&(u=new Me(r)),c},c.projection(n).digits(r).context(t)}function Ut(n){return function(t){var r=new Ot;for(var e in n)r[e]=n[e];return r.stream=t,r}}function Ot(){}Ot.prototype={constructor:Ot,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Vt(n,t,r){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),mn(r,n.stream(ft)),t(ft.result()),e!=null&&n.clipExtent(e),n}function ir(n,t,r){return Vt(n,function(e){var i=t[1][0]-t[0][0],u=t[1][1]-t[0][1],c=Math.min(i/(e[1][0]-e[0][0]),u/(e[1][1]-e[0][1])),l=+t[0][0]+(i-c*(e[1][0]+e[0][0]))/2,v=+t[0][1]+(u-c*(e[1][1]+e[0][1]))/2;n.scale(150*c).translate([l,v])},r)}function Ii(n,t,r){return ir(n,[[0,0],t],r)}function ki(n,t,r){return Vt(n,function(e){var i=+t,u=i/(e[1][0]-e[0][0]),c=(i-u*(e[1][0]+e[0][0]))/2,l=-u*e[0][1];n.scale(150*u).translate([c,l])},r)}function Li(n,t,r){return Vt(n,function(e){var i=+t,u=i/(e[1][1]-e[0][1]),c=-u*e[0][0],l=(i-u*(e[1][1]+e[0][1]))/2;n.scale(150*u).translate([c,l])},r)}var Pe=16,bi=B(30*G);function $e(n,t){return+t?Fi(n,t):zi(n)}function zi(n){return Ut({point:function(t,r){t=n(t,r),this.stream.point(t[0],t[1])}})}function Fi(n,t){function r(e,i,u,c,l,v,s,o,a,f,h,p,_,m){var w=s-e,E=o-i,d=w*w+E*E;if(d>4*t&&_--){var y=c+f,$=l+h,R=v+p,x=fn(y*y+$*$+R*R),A=cn(R/=x),M=F(F(R)-1)<T||F(u-a)<T?(u+a)/2:yn($,y),P=n(M,A),S=P[0],z=P[1],k=S-e,C=z-i,g=E*k-w*C;(g*g/d>t||F((w*k+E*C)/d-.5)>.3||c*f+l*h+v*p<bi)&&(r(e,i,u,c,l,v,S,z,M,y/=x,$/=x,R,_,m),m.point(S,z),r(S,z,M,y,$,R,s,o,a,f,h,p,_,m))}}return function(e){var i,u,c,l,v,s,o,a,f,h,p,_,m={point:w,lineStart:E,lineEnd:y,polygonStart:function(){e.polygonStart(),m.lineStart=$},polygonEnd:function(){e.polygonEnd(),m.lineStart=E}};function w(A,M){A=n(A,M),e.point(A[0],A[1])}function E(){a=NaN,m.point=d,e.lineStart()}function d(A,M){var P=Mn([A,M]),S=n(A,M);r(a,f,o,h,p,_,a=S[0],f=S[1],o=A,h=P[0],p=P[1],_=P[2],Pe,e),e.point(a,f)}function y(){m.point=w,e.lineEnd()}function $(){E(),m.point=R,m.lineEnd=x}function R(A,M){d(i=A,M),u=a,c=f,l=h,v=p,s=_,m.point=d}function x(){r(a,f,o,h,p,_,u,c,i,l,v,s,Pe,e),m.lineEnd=y,y()}return m}}var Di=Ut({point:function(n,t){this.stream.point(n*G,t*G)}});function Bi(n){return Ut({point:function(t,r){var e=n(t,r);return this.stream.point(e[0],e[1])}})}function Yi(n,t,r,e,i){function u(c,l){return c*=e,l*=i,[t+n*c,r-n*l]}return u.invert=function(c,l){return[(c-t)/n*e,(r-l)/n*i]},u}function Re(n,t,r,e,i,u){if(!u)return Yi(n,t,r,e,i);var c=B(u),l=D(u),v=c*n,s=l*n,o=c/n,a=l/n,f=(l*r-c*t)/n,h=(l*t+c*r)/n;function p(_,m){return _*=e,m*=i,[v*_-s*m+t,r-s*_-v*m]}return p.invert=function(_,m){return[e*(o*_-a*m+f),i*(h-a*_-o*m)]},p}function Vn(n){return qi(function(){return n})()}function qi(n){var t,r=150,e=480,i=250,u=0,c=0,l=0,v=0,s=0,o,a=0,f=1,h=1,p=null,_=ge,m=null,w,E,d,y=Lt,$=.5,R,x,A,M,P;function S(g){return A(g[0]*G,g[1]*G)}function z(g){return g=A.invert(g[0],g[1]),g&&[g[0]*Z,g[1]*Z]}S.stream=function(g){return M&&P===g?M:M=Di(Bi(o)(_(R(y(P=g)))))},S.preclip=function(g){return arguments.length?(_=g,p=void 0,C()):_},S.postclip=function(g){return arguments.length?(y=g,m=w=E=d=null,C()):y},S.clipAngle=function(g){return arguments.length?(_=+g?gi(p=g*G):(p=null,ge),C()):p*Z},S.clipExtent=function(g){return arguments.length?(y=g==null?(m=w=E=d=null,Lt):mi(m=+g[0][0],w=+g[0][1],E=+g[1][0],d=+g[1][1]),C()):m==null?null:[[m,w],[E,d]]},S.scale=function(g){return arguments.length?(r=+g,k()):r},S.translate=function(g){return arguments.length?(e=+g[0],i=+g[1],k()):[e,i]},S.center=function(g){return arguments.length?(u=g[0]%360*G,c=g[1]%360*G,k()):[u*Z,c*Z]},S.rotate=function(g){return arguments.length?(l=g[0]%360*G,v=g[1]%360*G,s=g.length>2?g[2]%360*G:0,k()):[l*Z,v*Z,s*Z]},S.angle=function(g){return arguments.length?(a=g%360*G,k()):a*Z},S.reflectX=function(g){return arguments.length?(f=g?-1:1,k()):f<0},S.reflectY=function(g){return arguments.length?(h=g?-1:1,k()):h<0},S.precision=function(g){return arguments.length?(R=$e(x,$=g*g),C()):fn($)},S.fitExtent=function(g,N){return ir(S,g,N)},S.fitSize=function(g,N){return Ii(S,g,N)},S.fitWidth=function(g,N){return ki(S,g,N)},S.fitHeight=function(g,N){return Li(S,g,N)};function k(){var g=Re(r,0,0,f,h,a).apply(null,t(u,c)),N=Re(r,e-g[0],i-g[1],f,h,a);return o=Oe(l,v,s),x=It(t,N),A=It(o,x),R=$e(x,$),C()}function C(){return M=P=null,S}return function(){return t=n.apply(this,arguments),S.invert=t.invert&&z,k()}}function Gi(n){return function(t,r){var e=fn(t*t+r*r),i=n(e),u=D(i),c=B(i);return[yn(t*u,e*c),cn(e&&r*u/e)]}}function Jt(n,t){return[n,ri(oi((H+t)/2))]}Jt.invert=function(n,t){return[n,2*Ge(ei(t))-H]};function Oi(){return ji(Jt).scale(961/W)}function ji(n){var t=Vn(n),r=t.center,e=t.scale,i=t.translate,u=t.clipExtent,c=null,l,v,s;t.scale=function(a){return arguments.length?(e(a),o()):e()},t.translate=function(a){return arguments.length?(i(a),o()):i()},t.center=function(a){return arguments.length?(r(a),o()):r()},t.clipExtent=function(a){return arguments.length?(a==null?c=l=v=s=null:(c=+a[0][0],l=+a[0][1],v=+a[1][0],s=+a[1][1]),o()):c==null?null:[[c,l],[v,s]]};function o(){var a=I*e(),f=t(ui(t.rotate()).invert([0,0]));return u(c==null?[[f[0]-a,f[1]-a],[f[0]+a,f[1]+a]]:n===Jt?[[Math.max(f[0]-a,c),l],[Math.min(f[0]+a,v),s]]:[[c,Math.max(f[1]-a,l)],[v,Math.min(f[1]+a,s)]])}return o()}function jt(n,t){return[n,t]}jt.invert=jt;function Hi(){return Vn(jt).scale(152.63)}var qn=1.340264,Gn=-.081106,On=893e-6,jn=.003796,vt=fn(3)/2,Xi=12;function or(n,t){var r=cn(vt*D(t)),e=r*r,i=e*e*e;return[n*B(r)/(vt*(qn+3*Gn*e+i*(7*On+9*jn*e))),r*(qn+Gn*e+i*(On+jn*e))]}or.invert=function(n,t){for(var r=t,e=r*r,i=e*e*e,u=0,c,l,v;u<Xi&&(l=r*(qn+Gn*e+i*(On+jn*e))-t,v=qn+3*Gn*e+i*(7*On+9*jn*e),r-=c=l/v,e=r*r,i=e*e*e,!(F(c)<qe));++u);return[vt*n*(qn+3*Gn*e+i*(7*On+9*jn*e))/B(r),cn(D(r)/vt)]};function Zi(){return Vn(or).scale(177.158)}function ar(n,t){var r=t*t,e=r*r;return[n*(.8707-.131979*r+e*(-.013791+e*(.003971*r-.001529*e))),t*(1.007226+r*(.015085+e*(-.044475+.028874*r-.005916*e)))]}ar.invert=function(n,t){var r=t,e=25,i;do{var u=r*r,c=u*u;r-=i=(r*(1.007226+u*(.015085+c*(-.044475+.028874*u-.005916*c)))-t)/(1.007226+u*(.015085*3+c*(-.044475*7+.028874*9*u-.005916*11*c)))}while(F(i)>T&&--e>0);return[n/(.8707+(u=r*r)*(-.131979+u*(-.013791+u*u*u*(.003971-.001529*u)))),r]};function Wi(){return Vn(ar).scale(175.295)}function ur(n,t){return[B(t)*D(n),D(t)]}ur.invert=Gi(cn);function Ui(){return Vn(ur).scale(249.5).clipAngle(90+T)}var $n=0,Fn=0,An=0,lr=1e3,gt,Dn,dt=0,dn=0,_t=0,Wn=typeof performance=="object"&&performance.now?performance:Date,cr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function fr(){return dn||(cr(Vi),dn=Wn.now()+_t)}function Vi(){dn=0}function Ht(){this._call=this._time=this._next=null}Ht.prototype=sr.prototype={constructor:Ht,restart:function(n,t,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?fr():+r)+(t==null?0:+t),!this._next&&Dn!==this&&(Dn?Dn._next=this:gt=this,Dn=this),this._call=n,this._time=r,Xt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xt())}};function sr(n,t,r){var e=new Ht;return e.restart(n,t,r),e}function Ji(){fr(),++$n;for(var n=gt,t;n;)(t=dn-n._time)>=0&&n._call.call(void 0,t),n=n._next;--$n}function Ae(){dn=(dt=Wn.now())+_t,$n=Fn=0;try{Ji()}finally{$n=0,Ki(),dn=0}}function Qi(){var n=Wn.now(),t=n-dt;t>lr&&(_t-=t,dt=n)}function Ki(){for(var n,t=gt,r,e=1/0;t;)t._call?(e>t._time&&(e=t._time),n=t,t=t._next):(r=t._next,t._next=null,t=n?n._next=r:gt=r);Dn=n,Xt(e)}function Xt(n){if(!$n){Fn&&(Fn=clearTimeout(Fn));var t=n-dn;t>24?(n<1/0&&(Fn=setTimeout(Ae,n-Wn.now()-_t)),An&&(An=clearInterval(An))):(An||(dt=Wn.now(),An=setInterval(Qi,lr)),$n=1,cr(Ae))}}function no(n){return n}function to(n){if(n==null)return no;var t,r,e=n.scale[0],i=n.scale[1],u=n.translate[0],c=n.translate[1];return function(l,v){v||(t=r=0);var s=2,o=l.length,a=new Array(o);for(a[0]=(t+=l[0])*e+u,a[1]=(r+=l[1])*i+c;s<o;)a[s]=l[s],++s;return a}}function eo(n,t){for(var r,e=n.length,i=e-t;i<--e;)r=n[i],n[i++]=n[e],n[e]=r}function xe(n,t){return typeof t=="string"&&(t=n.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return Ne(n,r)})}:Ne(n,t)}function Ne(n,t){var r=t.id,e=t.bbox,i=t.properties==null?{}:t.properties,u=pr(n,t);return r==null&&e==null?{type:"Feature",properties:i,geometry:u}:e==null?{type:"Feature",id:r,properties:i,geometry:u}:{type:"Feature",id:r,bbox:e,properties:i,geometry:u}}function pr(n,t){var r=to(n.transform),e=n.arcs;function i(o,a){a.length&&a.pop();for(var f=e[o<0?~o:o],h=0,p=f.length;h<p;++h)a.push(r(f[h],h));o<0&&eo(a,p)}function u(o){return r(o)}function c(o){for(var a=[],f=0,h=o.length;f<h;++f)i(o[f],a);return a.length<2&&a.push(a[0]),a}function l(o){for(var a=c(o);a.length<4;)a.push(a[0]);return a}function v(o){return o.map(l)}function s(o){var a=o.type,f;switch(a){case"GeometryCollection":return{type:a,geometries:o.geometries.map(s)};case"Point":f=u(o.coordinates);break;case"MultiPoint":f=o.coordinates.map(u);break;case"LineString":f=c(o.arcs);break;case"MultiLineString":f=o.arcs.map(c);break;case"Polygon":f=v(o.arcs);break;case"MultiPolygon":f=o.arcs.map(v);break;default:return null}return{type:a,coordinates:f}}return s(t)}function ro(n,t){var r={},e={},i={},u=[],c=-1;t.forEach(function(s,o){var a=n.arcs[s<0?~s:s],f;a.length<3&&!a[1][0]&&!a[1][1]&&(f=t[++c],t[c]=s,t[o]=f)}),t.forEach(function(s){var o=l(s),a=o[0],f=o[1],h,p;if(h=i[a])if(delete i[h.end],h.push(s),h.end=f,p=e[f]){delete e[p.start];var _=p===h?h:h.concat(p);e[_.start=h.start]=i[_.end=p.end]=_}else e[h.start]=i[h.end]=h;else if(h=e[f])if(delete e[h.start],h.unshift(s),h.start=a,p=i[a]){delete i[p.end];var m=p===h?h:p.concat(h);e[m.start=p.start]=i[m.end=h.end]=m}else e[h.start]=i[h.end]=h;else h=[s],e[h.start=a]=i[h.end=f]=h});function l(s){var o=n.arcs[s<0?~s:s],a=o[0],f;return n.transform?(f=[0,0],o.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=o[o.length-1],s<0?[f,a]:[a,f]}function v(s,o){for(var a in s){var f=s[a];delete o[f.start],delete f.start,delete f.end,f.forEach(function(h){r[h<0?~h:h]=1}),u.push(f)}}return v(i,e),v(e,i),t.forEach(function(s){r[s<0?~s:s]||u.push([s])}),u}function io(n){return pr(n,oo.apply(this,arguments))}function oo(n,t,r){var e,i,u;if(arguments.length>1)e=ao(n,t,r);else for(i=0,e=new Array(u=n.arcs.length);i<u;++i)e[i]=i;return{type:"MultiLineString",arcs:ro(n,e)}}function ao(n,t,r){var e=[],i=[],u;function c(a){var f=a<0?~a:a;(i[f]||(i[f]=[])).push({i:a,g:u})}function l(a){a.forEach(c)}function v(a){a.forEach(l)}function s(a){a.forEach(v)}function o(a){switch(u=a,a.type){case"GeometryCollection":a.geometries.forEach(o);break;case"LineString":l(a.arcs);break;case"MultiLineString":case"Polygon":v(a.arcs);break;case"MultiPolygon":s(a.arcs);break}}return o(t),i.forEach(r==null?function(a){e.push(a[0].i)}:function(a){r(a[0].g,a[a.length-1].g)&&e.push(a[0].i)}),e}const Zt=[{id:"orthographic",name:"Globe",description:"3D spherical view",preserves:"True shape (no distortion)",factory:()=>Ui()},{id:"mercator",name:"Mercator",description:"Standard web map",preserves:"Angles & shapes",factory:()=>Oi()},{id:"equalEarth",name:"Equal Earth",description:"Modern equal-area",preserves:"Area (sizes)",factory:()=>Zi()},{id:"naturalEarth1",name:"Natural Earth",description:"Balanced compromise",preserves:"Nothing perfectly",factory:()=>Wi()},{id:"equirectangular",name:"Plate Carrée",description:"Simple lat/lon grid",preserves:"Distances on meridians",factory:()=>Hi()}],mt=wt("orthographic"),Hn=wt([0,-20,0]),Sn=wt(1),En=wt(!0),hr=Be(mt,n=>Zt.find(t=>t.id===n)||Zt[0]),vr=Be(mt,n=>n==="orthographic");var uo=Un('<div class="canvas-container"><canvas></canvas></div>');function lo(n,t){be(t,!0);const r=()=>un(En,"$autoRotate",l),e=()=>un(vr,"$isGlobe",l),i=()=>un(hr,"$currentProjectionConfig",l),u=()=>un(Sn,"$scale",l),c=()=>un(Hn,"$rotation",l),[l,v]=De();let s,o,a=Cn(0),f=Cn(0),h=Cn(null),p=Cn(!1),_=[0,0],m=[0,0,0];const w={water:"#1a3a5c",land:"#2d5a3d",graticule:"rgba(255, 255, 255, 0.12)",border:"rgba(255, 255, 255, 0.25)",atmosphere:"rgba(100, 150, 255, 0.15)"};Yr(async()=>{const S=await(await fetch("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json")).json();hn(h,{land:xe(S,S.objects.land),countries:xe(S,S.objects.countries),borders:io(S,S.objects.countries,(C,g)=>C!==g)},!0),o=s.getContext("2d"),E();const z=sr(C=>{r()&&e()&&!b(p)&&Hn.update(g=>[(g[0]+.1)%360,g[1],g[2]])}),k=new ResizeObserver(()=>E());return k.observe(s.parentElement),()=>{z.stop(),k.disconnect()}});function E(){const P=s.parentElement.getBoundingClientRect();hn(a,P.width,!0),hn(f,P.height,!0),s.width=b(a)*window.devicePixelRatio,s.height=b(f)*window.devicePixelRatio,o.scale(window.devicePixelRatio,window.devicePixelRatio)}function d(){const S=i().factory(),z=Math.min(b(a),b(f))/2.2;return S.translate([b(a)/2,b(f)/2]).scale(z*u()),e()&&(S.rotate(c()),S.clipAngle(90)),S}br(()=>{if(!o||!b(h))return;const P=d(),S=Ti(P,o),z=_i();if(o.clearRect(0,0,b(a),b(f)),e()&&P([0,0])){const C=o.createRadialGradient(b(a)/2,b(f)/2,P.scale()*.9,b(a)/2,b(f)/2,P.scale()*1.1);C.addColorStop(0,"transparent"),C.addColorStop(.5,w.atmosphere),C.addColorStop(1,"transparent"),o.beginPath(),o.arc(b(a)/2,b(f)/2,P.scale()*1.1,0,Math.PI*2),o.fillStyle=C,o.fill()}o.beginPath(),e()?o.arc(b(a)/2,b(f)/2,P.scale(),0,Math.PI*2):S({type:"Sphere"}),o.fillStyle=w.water,o.fill(),o.beginPath(),S(z),o.strokeStyle=w.graticule,o.lineWidth=.5,o.stroke(),o.beginPath(),S(b(h).land),o.fillStyle=w.land,o.fill(),o.beginPath(),S(b(h).borders),o.strokeStyle=w.border,o.lineWidth=.5,o.stroke(),e()&&(o.beginPath(),o.arc(b(a)/2,b(f)/2,P.scale(),0,Math.PI*2),o.strokeStyle="rgba(255, 255, 255, 0.2)",o.lineWidth=1,o.stroke())});function y(P){e()&&(hn(p,!0),_=[P.clientX,P.clientY],m=[...c()],En.set(!1))}function $(P){if(!b(p)||!e())return;const S=P.clientX-_[0],z=P.clientY-_[1],k=.3;Hn.set([m[0]+S*k,Math.max(-90,Math.min(90,m[1]-z*k)),m[2]])}function R(){hn(p,!1)}function x(P){P.preventDefault();const S=P.deltaY>0?.9:1.1;Sn.update(z=>Math.max(.5,Math.min(5,z*S)))}var A=uo(),M=nn(A);M.__mousedown=y,M.__mousemove=$,M.__mouseup=R,Br(M,P=>s=P,()=>s),V(A),it(()=>Ur(M,`cursor: ${e()?b(p)?"grabbing":"grab":"default"}`)),te("mouseleave",M,R),te("wheel",M,x),xn(n,A),ze(),v()}Fe(["mousedown","mousemove","mouseup"]);var co=Un('<div class="control-group"><button><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path></svg></button></div>'),fo=Un("<li><button> </button></li>"),so=Un('<div class="projection-selector"><div class="projection-label">Projection</div> <ul class="projection-list"></ul></div>'),po=Un('<!> <a href="/mymaps" class="nav-link"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 19l-7-7 7-7"></path></svg> <span>MyMaps</span></a> <div class="controls"><div class="control-group"><button class="control-btn" title="Zoom in"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button> <button class="control-btn" title="Zoom out"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"></line></svg></button> <button class="control-btn" title="Reset view"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path></svg></button></div> <!> <div class="control-group"><button title="Change projection"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><path d="M2 12h20"></path><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg></button></div> <!></div> <div class="info-panel"><h2 class="info-title"> </h2> <p class="info-subtitle"> <br/> <strong>Preserves:</strong> </p></div>',1);function So(n,t){be(t,!0);const r=()=>un(vr,"$isGlobe",c),e=()=>un(hr,"$currentProjectionConfig",c),i=()=>un(En,"$autoRotate",c),u=()=>un(mt,"$currentProjectionType",c),[c,l]=De();let v=Cn(!1);function s(L){mt.set(L),hn(v,!1),Sn.set(1),L==="orthographic"&&(Hn.set([0,-20,0]),En.set(!0))}function o(){En.update(L=>!L)}function a(){Sn.update(L=>Math.min(5,L*1.2))}function f(){Sn.update(L=>Math.max(.5,L/1.2))}function h(){Sn.set(1),Hn.set([0,-20,0]),r()&&En.set(!0)}var p=po();Xr("1uha8ag",L=>{Fr(()=>{Dr.title=`Maps - ${e().name??""} View`})});var _=zr(p);lo(_,{});var m=tn(_,4),w=nn(m),E=nn(w);E.__click=a;var d=tn(E,2);d.__click=f;var y=tn(d,2);y.__click=h,V(w);var $=tn(w,2);{var R=L=>{var q=co(),U=nn(q);let O;U.__click=o,V(q),it(()=>{O=Et(U,1,"control-btn",null,O,{active:i()}),Qr(U,"title",i()?"Stop rotation":"Auto-rotate")}),xn(L,q)};ee($,L=>{r()&&L(R)})}var x=tn($,2),A=nn(x);let M;A.__click=()=>hn(v,!b(v)),V(x);var P=tn(x,2);{var S=L=>{var q=so(),U=tn(nn(q),2);Or(U,21,()=>Zt,qr,(O,K)=>{var X=fo(),on=nn(X);let an;on.__click=()=>s(b(K).id);var gr=nn(on,!0);V(on),V(X),it(()=>{an=Et(on,1,"projection-item",null,an,{active:u()===b(K).id}),Jn(gr,b(K).name)}),xn(O,X)}),V(U),V(q),xn(L,q)};ee(P,L=>{b(v)&&L(S)})}V(m);var z=tn(m,2),k=nn(z),C=nn(k,!0);V(k);var g=tn(k,2),N=nn(g,!0),Y=tn(N,4);V(g),V(z),it(()=>{M=Et(A,1,"control-btn",null,M,{active:b(v)}),Jn(C,e().name),Jn(N,e().description),Jn(Y,` ${e().preserves??""}`)}),xn(n,p),ze(),l()}Fe(["click"]);export{So as component};
