import{c as F,b as te,aD as W,h as m,a as H,f as oe,I as fe,E as B,K as le,L as ue,M as Y,s as D,d as L,C as ce,aB as de,an as J,i as ge,aE as S,l as P,n as ve,G as pe,aF as he,az as z,aG as _e,aH as Ee,O as me,ab as U,aI as Se,j as Z,p as j,aJ as G,q as ee,aK as Ae,aL as Ce,ay as be,k as ke,g as Ne,aM as we,aN as Te,aO as ye,aP as Ie,aQ as Oe}from"./asKwNPUx.js";import{d as re,w as Me,g as Re}from"./BZCT7ppd.js";function Je(e,r){return r}function Le(e,r,s){for(var n=[],i=r.length,t,f=r.length,l=0;l<i;l++){let _=r[l];j(_,()=>{if(t){if(t.pending.delete(_),t.done.add(_),t.pending.size===0){var g=e.outrogroups;q(z(t.done)),g.delete(t),g.size===0&&(e.outrogroups=null)}}else f-=1},!1)}if(f===0){var u=n.length===0&&s!==null;if(u){var d=s,o=d.parentNode;be(o),o.append(d),e.items.clear()}q(r,!u)}else t={pending:new Set(r),done:new Set},(e.outrogroups??=new Set).add(t)}function q(e,r=!0){for(var s=0;s<e.length;s++)ke(e[s],r)}var V;function Ue(e,r,s,n,i,t=null){var f=e,l=new Map,u=(r&W)!==0;if(u){var d=e;f=m?H(oe(d)):d.appendChild(F())}m&&fe();var o=null,_=pe(()=>{var c=s();return he(c)?c:c==null?[]:z(c)}),g,p=!0;function C(){a.fallback=o,Fe(a,g,f,r,n),o!==null&&(g.length===0?(o.f&S)===0?Z(o):(o.f^=S,R(o,null,f)):j(o,()=>{o=null}))}var w=te(()=>{g=B(_);var c=g.length;let T=!1;if(m){var y=le(f)===ue;y!==(c===0)&&(f=Y(),H(f),D(!1),T=!0)}for(var E=new Set,b=ge,I=ve(),h=0;h<c;h+=1){m&&L.nodeType===ce&&L.data===de&&(f=L,T=!0,D(!1));var k=g[h],O=n(k,h),v=p?null:l.get(O);v?(v.v&&J(v.v,k),v.i&&J(v.i,h),I&&b.skipped_effects.delete(v.e)):(v=He(l,p?f:V??=F(),k,O,h,i,r,s),p||(v.e.f|=S),l.set(O,v)),E.add(O)}if(c===0&&t&&!o&&(p?o=P(()=>t(f)):(o=P(()=>t(V??=F())),o.f|=S)),m&&c>0&&H(Y()),!p)if(I){for(const[ie,ae]of l)E.has(ie)||b.skipped_effects.add(ae.e);b.oncommit(C),b.ondiscard(()=>{})}else C();T&&D(!0),B(_)}),a={effect:w,items:l,outrogroups:null,fallback:o};p=!1,m&&(f=L)}function M(e){for(;e!==null&&(e.f&Ae)===0;)e=e.next;return e}function Fe(e,r,s,n,i){var t=(n&Ce)!==0,f=r.length,l=e.items,u=M(e.effect.first),d,o=null,_,g=[],p=[],C,w,a,c;if(t)for(c=0;c<f;c+=1)C=r[c],w=i(C,c),a=l.get(w).e,(a.f&S)===0&&(a.nodes?.a?.measure(),(_??=new Set).add(a));for(c=0;c<f;c+=1){if(C=r[c],w=i(C,c),a=l.get(w).e,e.outrogroups!==null)for(const v of e.outrogroups)v.pending.delete(a),v.done.delete(a);if((a.f&S)!==0)if(a.f^=S,a===u)R(a,null,s);else{var T=o?o.next:u;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),A(e,o,a),A(e,a,T),R(a,T,s),o=a,g=[],p=[],u=M(o.next);continue}if((a.f&G)!==0&&(Z(a),t&&(a.nodes?.a?.unfix(),(_??=new Set).delete(a))),a!==u){if(d!==void 0&&d.has(a)){if(g.length<p.length){var y=p[0],E;o=y.prev;var b=g[0],I=g[g.length-1];for(E=0;E<g.length;E+=1)R(g[E],y,s);for(E=0;E<p.length;E+=1)d.delete(p[E]);A(e,b.prev,I.next),A(e,o,b),A(e,I,y),u=y,o=I,c-=1,g=[],p=[]}else d.delete(a),R(a,u,s),A(e,a.prev,a.next),A(e,a,o===null?e.effect.first:o.next),A(e,o,a),o=a;continue}for(g=[],p=[];u!==null&&u!==a;)(d??=new Set).add(u),p.push(u),u=M(u.next);if(u===null)continue}(a.f&S)===0&&g.push(a),o=a,u=M(a.next)}if(e.outrogroups!==null){for(const v of e.outrogroups)v.pending.size===0&&(q(z(v.done)),e.outrogroups?.delete(v));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||d!==void 0){var h=[];if(d!==void 0)for(a of d)(a.f&G)===0&&h.push(a);for(;u!==null;)(u.f&G)===0&&u!==e.fallback&&h.push(u),u=M(u.next);var k=h.length;if(k>0){var O=(n&W)!==0&&f===0?s:null;if(t){for(c=0;c<k;c+=1)h[c].nodes?.a?.measure();for(c=0;c<k;c+=1)h[c].nodes?.a?.fix()}Le(e,h,O)}}t&&ee(()=>{if(_!==void 0)for(a of _)a.nodes?.a?.apply()})}function He(e,r,s,n,i,t,f,l){var u=(f&_e)!==0?(f&Ee)===0?me(s,!1,!1):U(s):null,d=(f&Se)!==0?U(i):null;return{v:u,i:d,e:P(()=>(t(r,u??s,d??i,l),()=>{e.delete(n)}))}}function R(e,r,s){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,t=r&&(r.f&S)===0?r.nodes.start:s;n!==null;){var f=Ne(n);if(t.before(n),n===i)return;n=f}}function A(e,r,s){r===null?e.effect.first=s:r.next=s,s===null?e.effect.last=r:s.prev=r}const Q=[...` 	
\r\fÂ \v\uFEFF`];function De(e,r,s){var n=e==null?"":""+e;if(r&&(n=n?n+" "+r:r),s){for(var i in s)if(s[i])n=n?n+" "+i:i;else if(n.length)for(var t=i.length,f=0;(f=n.indexOf(i,f))>=0;){var l=f+t;(f===0||Q.includes(n[f-1]))&&(l===n.length||Q.includes(n[l]))?n=(f===0?"":n.substring(0,f))+n.substring(l+1):f=l}}return n===""?null:n}function Ve(e,r){return e==null?null:String(e)}function Qe(e,r,s,n,i,t){var f=e.__className;if(m||f!==s||f===void 0){var l=De(s,n,t);(!m||l!==e.getAttribute("class"))&&(l==null?e.removeAttribute("class"):e.className=l),e.__className=s}else if(t&&i!==t)for(var u in t){var d=!!t[u];(i==null||d!==!!i[u])&&e.classList.toggle(u,d)}return t}const Ge=Symbol("is custom element"),xe=Symbol("is html");function Xe(e){if(m){var r=!1,s=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var n=e.value;X(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var i=e.checked;X(e,"checked",null),e.checked=i}}};e.__on_r=s,ee(s),ye()}}function $e(e,r){var s=K(e);s.value===(s.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function We(e,r){var s=K(e);s.checked!==(s.checked=r??void 0)&&(e.checked=r)}function X(e,r,s,n){var i=K(e);m&&(i[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||i[r]!==(i[r]=s)&&(r==="loading"&&(e[Ie]=s),s==null?e.removeAttribute(r):typeof s!="string"&&Pe(e).includes(r)?e[r]=s:e.setAttribute(r,s))}function K(e){return e.__attributes??={[Ge]:e.nodeName.includes("-"),[xe]:e.namespaceURI===we}}var $=new Map;function Pe(e){var r=e.getAttribute("is")||e.nodeName,s=$.get(r);if(s)return s;$.set(r,s=[]);for(var n,i=e,t=Element.prototype;t!==i;){n=Oe(i);for(var f in n)n[f].set&&s.push(f);i=Te(i)}return s}function qe(e){const r=!!e.places.keys.google,s=!!e.places.keys.foursquare;e.places.keys.yelp;const n=!!e.routing.keys.google,i=!!e.tiles.keys.mapbox,t=!!e.tiles.keys.maptiler;return{search:{autocomplete:!0,categories:s||r,photos:s||r},places:{details:!0,photos:s||r,reviews:r,hours:s||r},routing:{walking:!0,cycling:!0,driving:!0,transit:n,alternatives:!0},tiles:{vector:!0,satellite:i||t,terrain:i,traffic:r}}}const se="mymaps-api-config",N={tiles:{primary:"carto",keys:{}},geocoding:{providers:["nominatim","photon"],keys:{}},places:{providers:["overpass"],keys:{}},routing:{providers:["osrm","valhalla"],keys:{}}};function ze(){try{const e=localStorage.getItem(se);if(e){const r=JSON.parse(e);return{tiles:{...N.tiles,...r.tiles},geocoding:{...N.geocoding,...r.geocoding},places:{...N.places,...r.places},routing:{...N.routing,...r.routing}}}}catch(e){console.warn("Failed to load config from localStorage:",e)}return N}function x(e){try{localStorage.setItem(se,JSON.stringify(e))}catch(r){console.warn("Failed to save config to localStorage:",r)}}function Ke(){const{subscribe:e,set:r,update:s}=Me(ze());return{subscribe:e,setApiKey(n,i,t){s(f=>{const l={...f},d={...l[n].keys};if(t?d[i]=t:delete d[i],n==="tiles")l.tiles={...l.tiles,keys:d};else if(n==="geocoding"){const o=[...l.geocoding.providers];t&&!o.includes(i)&&o.unshift(i),l.geocoding={...l.geocoding,keys:d,providers:o}}else if(n==="places"){const o=[...l.places.providers];t&&!o.includes(i)&&o.unshift(i),l.places={...l.places,keys:d,providers:o}}else if(n==="routing"){const o=[...l.routing.providers];t&&!o.includes(i)&&o.unshift(i),l.routing={...l.routing,keys:d,providers:o}}return x(l),l})},setTileProvider(n){s(i=>{const t={...i,tiles:{...i.tiles,primary:n}};return x(t),t})},reset(){r(N),x(N)},get(){return Re({subscribe:e})}}}const ne=Ke(),Ze=re(ne,e=>qe(e)),je=re(ne,e=>{const{tiles:r,geocoding:s,places:n,routing:i}=e;return Object.keys(r.keys).length>0||Object.keys(s.keys).length>0||Object.keys(n.keys).length>0||Object.keys(i.keys).length>0});export{ne as a,Qe as b,Ze as c,$e as d,Ue as e,We as f,je as h,Je as i,Xe as r,X as s,Ve as t};
