{"version":3,"sources":["../../../../../mymaps/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../mymaps/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../mymaps/src/components/MapViewer.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","'use client';\r\n\r\nimport { useEffect, useRef } from 'react';\r\nimport { MapData, SPHERE_COLORS } from '@/data/types';\r\n\r\ninterface MapViewerProps {\r\n  mapData: MapData;\r\n}\r\n\r\ndeclare global {\r\n  interface Window {\r\n    Highcharts: any;\r\n  }\r\n}\r\n\r\nexport default function MapViewer({ mapData }: MapViewerProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const scriptLoadedRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (scriptLoadedRef.current) return;\r\n\r\n    const loadScript = (src: string): Promise<void> => {\r\n      return new Promise((resolve, reject) => {\r\n        const script = document.createElement('script');\r\n        script.src = src;\r\n        script.onload = () => resolve();\r\n        script.onerror = reject;\r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    const initMap = async () => {\r\n      try {\r\n        // Load Highcharts if not already loaded\r\n        if (!window.Highcharts) {\r\n          await loadScript('https://code.highcharts.com/maps/highmaps.js');\r\n          await loadScript('https://code.highcharts.com/maps/modules/exporting.js');\r\n        }\r\n\r\n        // Load the specific map\r\n        const mapUrl = `https://code.highcharts.com/mapdata/${mapData.config.mapPath}.js`;\r\n        await loadScript(mapUrl);\r\n\r\n        scriptLoadedRef.current = true;\r\n\r\n        // Get map key\r\n        const mapKey = Object.keys(window.Highcharts.maps)[0];\r\n        if (!mapKey || !containerRef.current) return;\r\n\r\n        // Prepare data\r\n        const chartData = mapData.countries.map(c => ({\r\n          code: c.code,\r\n          name: c.name,\r\n          role: c.role,\r\n          color: c.color || SPHERE_COLORS[c.sphere],\r\n        }));\r\n\r\n        // Render map\r\n        window.Highcharts.mapChart(containerRef.current, {\r\n          chart: {\r\n            map: window.Highcharts.maps[mapKey],\r\n            backgroundColor: '#121212',\r\n          },\r\n          title: { text: '' },\r\n          mapNavigation: {\r\n            enabled: true,\r\n            buttonOptions: {\r\n              verticalAlign: 'bottom',\r\n              theme: {\r\n                fill: '#333',\r\n                stroke: '#444',\r\n                style: { color: '#fff' },\r\n              },\r\n            },\r\n          },\r\n          legend: { enabled: false },\r\n          credits: { enabled: false },\r\n          tooltip: {\r\n            backgroundColor: 'rgba(0,0,0,0.9)',\r\n            borderColor: '#666',\r\n            style: { color: '#fff' },\r\n            formatter: function(this: any) {\r\n              if (this.point.role) {\r\n                return `<b>${this.point.name}</b><br><span style=\"color:${this.point.color}\">${this.point.role}</span>`;\r\n              }\r\n              return `<b>${this.point.name}</b><br>Neutral`;\r\n            },\r\n          },\r\n          series: [{\r\n            data: chartData,\r\n            joinBy: [mapData.config.joinBy, 'code'],\r\n            name: 'Strategic',\r\n            nullColor: '#2C2C2C',\r\n            borderColor: '#444',\r\n            borderWidth: 0.5,\r\n            states: {\r\n              hover: { color: '#fff', borderColor: '#fff' },\r\n            },\r\n          }],\r\n        });\r\n      } catch (error) {\r\n        console.error('Error loading map:', error);\r\n      }\r\n    };\r\n\r\n    initMap();\r\n  }, [mapData]);\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      style={{\r\n        height: 'calc(100vh - 200px)',\r\n        minHeight: '400px',\r\n        margin: '20px',\r\n        border: '1px solid #333',\r\n        borderRadius: '8px',\r\n      }}\r\n    />\r\n  );\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1]}