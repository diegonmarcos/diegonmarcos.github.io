import{c as F,b as te,aD as W,h as m,a as H,f as oe,I as fe,E as B,K as le,L as ue,M as Y,s as D,d as L,C as ce,aB as de,an as J,i as ge,aE as S,l as P,aF as ve,n as pe,G as he,aG as _e,az as x,aH as Ee,aI as me,O as Se,ab as U,aJ as Ae,j as Z,p as j,aK as G,q as ee,aL as be,aM as ke,ay as Ce,k as Ne,g as we,aN as ye,aO as Te,aP as Ie,aQ as Oe,aR as Me}from"./BSqcXsmM.js";import{d as re,w as Re,g as Le}from"./B69dQJDB.js";function Ue(e,r){return r}function Fe(e,r,s){for(var n=[],i=r.length,t,f=r.length,l=0;l<i;l++){let E=r[l];j(E,()=>{if(t){if(t.pending.delete(E),t.done.add(E),t.pending.size===0){var g=e.outrogroups;q(x(t.done)),g.delete(t),g.size===0&&(e.outrogroups=null)}}else f-=1},!1)}if(f===0){var u=n.length===0&&s!==null;if(u){var d=s,o=d.parentNode;Ce(o),o.append(d),e.items.clear()}q(r,!u)}else t={pending:new Set(r),done:new Set},(e.outrogroups??=new Set).add(t)}function q(e,r=!0){for(var s=0;s<e.length;s++)Ne(e[s],r)}var V;function Ve(e,r,s,n,i,t=null){var f=e,l=new Map,u=(r&W)!==0;if(u){var d=e;f=m?H(oe(d)):d.appendChild(F())}m&&fe();var o=null,E=he(()=>{var c=s();return _e(c)?c:c==null?[]:x(c)}),g,p=!0;function b(){a.fallback=o,He(a,g,f,r,n),o!==null&&(g.length===0?(o.f&S)===0?Z(o):(o.f^=S,R(o,null,f)):j(o,()=>{o=null}))}var w=te(()=>{g=B(E);var c=g.length;let y=!1;if(m){var T=le(f)===ue;T!==(c===0)&&(f=Y(),H(f),D(!1),y=!0)}for(var _=new Set,k=ge,I=pe(),h=0;h<c;h+=1){m&&L.nodeType===ce&&L.data===de&&(f=L,y=!0,D(!1));var C=g[h],O=n(C,h),v=p?null:l.get(O);v?(v.v&&J(v.v,C),v.i&&J(v.i,h),I&&k.unskip_effect(v.e)):(v=De(l,p?f:V??=F(),C,O,h,i,r,s),p||(v.e.f|=S),l.set(O,v)),_.add(O)}if(c===0&&t&&!o&&(p?o=P(()=>t(f)):(o=P(()=>t(V??=F())),o.f|=S)),c>_.size&&ve(),m&&c>0&&H(Y()),!p)if(I){for(const[ie,ae]of l)_.has(ie)||k.skip_effect(ae.e);k.oncommit(b),k.ondiscard(()=>{})}else b();y&&D(!0),B(E)}),a={effect:w,items:l,outrogroups:null,fallback:o};p=!1,m&&(f=L)}function M(e){for(;e!==null&&(e.f&be)===0;)e=e.next;return e}function He(e,r,s,n,i){var t=(n&ke)!==0,f=r.length,l=e.items,u=M(e.effect.first),d,o=null,E,g=[],p=[],b,w,a,c;if(t)for(c=0;c<f;c+=1)b=r[c],w=i(b,c),a=l.get(w).e,(a.f&S)===0&&(a.nodes?.a?.measure(),(E??=new Set).add(a));for(c=0;c<f;c+=1){if(b=r[c],w=i(b,c),a=l.get(w).e,e.outrogroups!==null)for(const v of e.outrogroups)v.pending.delete(a),v.done.delete(a);if((a.f&S)!==0)if(a.f^=S,a===u)R(a,null,s);else{var y=o?o.next:u;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),A(e,o,a),A(e,a,y),R(a,y,s),o=a,g=[],p=[],u=M(o.next);continue}if((a.f&G)!==0&&(Z(a),t&&(a.nodes?.a?.unfix(),(E??=new Set).delete(a))),a!==u){if(d!==void 0&&d.has(a)){if(g.length<p.length){var T=p[0],_;o=T.prev;var k=g[0],I=g[g.length-1];for(_=0;_<g.length;_+=1)R(g[_],T,s);for(_=0;_<p.length;_+=1)d.delete(p[_]);A(e,k.prev,I.next),A(e,o,k),A(e,I,T),u=T,o=I,c-=1,g=[],p=[]}else d.delete(a),R(a,u,s),A(e,a.prev,a.next),A(e,a,o===null?e.effect.first:o.next),A(e,o,a),o=a;continue}for(g=[],p=[];u!==null&&u!==a;)(d??=new Set).add(u),p.push(u),u=M(u.next);if(u===null)continue}(a.f&S)===0&&g.push(a),o=a,u=M(a.next)}if(e.outrogroups!==null){for(const v of e.outrogroups)v.pending.size===0&&(q(x(v.done)),e.outrogroups?.delete(v));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||d!==void 0){var h=[];if(d!==void 0)for(a of d)(a.f&G)===0&&h.push(a);for(;u!==null;)(u.f&G)===0&&u!==e.fallback&&h.push(u),u=M(u.next);var C=h.length;if(C>0){var O=(n&W)!==0&&f===0?s:null;if(t){for(c=0;c<C;c+=1)h[c].nodes?.a?.measure();for(c=0;c<C;c+=1)h[c].nodes?.a?.fix()}Fe(e,h,O)}}t&&ee(()=>{if(E!==void 0)for(a of E)a.nodes?.a?.apply()})}function De(e,r,s,n,i,t,f,l){var u=(f&Ee)!==0?(f&me)===0?Se(s,!1,!1):U(s):null,d=(f&Ae)!==0?U(i):null;return{v:u,i:d,e:P(()=>(t(r,u??s,d??i,l),()=>{e.delete(n)}))}}function R(e,r,s){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,t=r&&(r.f&S)===0?r.nodes.start:s;n!==null;){var f=we(n);if(t.before(n),n===i)return;n=f}}function A(e,r,s){r===null?e.effect.first=s:r.next=s,s===null?e.effect.last=r:s.prev=r}const Q=[...` 	
\r\fÂ \v\uFEFF`];function Ge(e,r,s){var n=e==null?"":""+e;if(r&&(n=n?n+" "+r:r),s){for(var i in s)if(s[i])n=n?n+" "+i:i;else if(n.length)for(var t=i.length,f=0;(f=n.indexOf(i,f))>=0;){var l=f+t;(f===0||Q.includes(n[f-1]))&&(l===n.length||Q.includes(n[l]))?n=(f===0?"":n.substring(0,f))+n.substring(l+1):f=l}}return n===""?null:n}function Qe(e,r){return e==null?null:String(e)}function Xe(e,r,s,n,i,t){var f=e.__className;if(m||f!==s||f===void 0){var l=Ge(s,n,t);(!m||l!==e.getAttribute("class"))&&(l==null?e.removeAttribute("class"):r?e.className=l:e.setAttribute("class",l)),e.__className=s}else if(t&&i!==t)for(var u in t){var d=!!t[u];(i==null||d!==!!i[u])&&e.classList.toggle(u,d)}return t}const ze=Symbol("is custom element"),Pe=Symbol("is html");function $e(e){if(m){var r=!1,s=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var n=e.value;X(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var i=e.checked;X(e,"checked",null),e.checked=i}}};e.__on_r=s,ee(s),Oe()}}function We(e,r){var s=K(e);s.value===(s.value=r??void 0)||e.value===r&&(r!==0||e.nodeName!=="PROGRESS")||(e.value=r??"")}function Ze(e,r){var s=K(e);s.checked!==(s.checked=r??void 0)&&(e.checked=r)}function X(e,r,s,n){var i=K(e);m&&(i[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||i[r]!==(i[r]=s)&&(r==="loading"&&(e[ye]=s),s==null?e.removeAttribute(r):typeof s!="string"&&qe(e).includes(r)?e[r]=s:e.setAttribute(r,s))}function K(e){return e.__attributes??={[ze]:e.nodeName.includes("-"),[Pe]:e.namespaceURI===Te}}var $=new Map;function qe(e){var r=e.getAttribute("is")||e.nodeName,s=$.get(r);if(s)return s;$.set(r,s=[]);for(var n,i=e,t=Element.prototype;t!==i;){n=Me(i);for(var f in n)n[f].set&&s.push(f);i=Ie(i)}return s}function xe(e){const r=!!e.places.keys.google,s=!!e.places.keys.foursquare;e.places.keys.yelp;const n=!!e.routing.keys.google,i=!!e.tiles.keys.mapbox,t=!!e.tiles.keys.maptiler;return{search:{autocomplete:!0,categories:s||r,photos:s||r},places:{details:!0,photos:s||r,reviews:r,hours:s||r},routing:{walking:!0,cycling:!0,driving:!0,transit:n,alternatives:!0},tiles:{vector:!0,satellite:i||t,terrain:i,traffic:r}}}const se="mymaps-api-config",N={tiles:{primary:"carto",keys:{}},geocoding:{providers:["nominatim","photon"],keys:{}},places:{providers:["overpass"],keys:{}},routing:{providers:["osrm","valhalla"],keys:{}}};function Ke(){try{const e=localStorage.getItem(se);if(e){const r=JSON.parse(e);return{tiles:{...N.tiles,...r.tiles},geocoding:{...N.geocoding,...r.geocoding},places:{...N.places,...r.places},routing:{...N.routing,...r.routing}}}}catch(e){console.warn("Failed to load config from localStorage:",e)}return N}function z(e){try{localStorage.setItem(se,JSON.stringify(e))}catch(r){console.warn("Failed to save config to localStorage:",r)}}function Be(){const{subscribe:e,set:r,update:s}=Re(Ke());return{subscribe:e,setApiKey(n,i,t){s(f=>{const l={...f},d={...l[n].keys};if(t?d[i]=t:delete d[i],n==="tiles")l.tiles={...l.tiles,keys:d};else if(n==="geocoding"){const o=[...l.geocoding.providers];t&&!o.includes(i)&&o.unshift(i),l.geocoding={...l.geocoding,keys:d,providers:o}}else if(n==="places"){const o=[...l.places.providers];t&&!o.includes(i)&&o.unshift(i),l.places={...l.places,keys:d,providers:o}}else if(n==="routing"){const o=[...l.routing.providers];t&&!o.includes(i)&&o.unshift(i),l.routing={...l.routing,keys:d,providers:o}}return z(l),l})},setTileProvider(n){s(i=>{const t={...i,tiles:{...i.tiles,primary:n}};return z(t),t})},reset(){r(N),z(N)},get(){return Le({subscribe:e})}}}const ne=Be(),je=re(ne,e=>xe(e)),er=re(ne,e=>{const{tiles:r,geocoding:s,places:n,routing:i}=e;return Object.keys(r.keys).length>0||Object.keys(s.keys).length>0||Object.keys(n.keys).length>0||Object.keys(i.keys).length>0});export{ne as a,Xe as b,je as c,We as d,Ve as e,Ze as f,er as h,Ue as i,$e as r,X as s,Qe as t};
