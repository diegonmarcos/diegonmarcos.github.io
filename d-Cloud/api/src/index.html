<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1400">
    <title>Cloud Control API Documentation</title>

    <!-- Swagger UI CSS -->
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui.css">

    <style>
        :root {
            --bg-primary: #0f1117;
            --bg-secondary: #161922;
            --bg-tertiary: #1e2230;
            --bg-card: #1a1e2e;
            --border: #2a2f42;
            --text-primary: #c8cdd8;
            --text-secondary: #7e8694;
            --text-muted: #525a68;
            --accent: #6b72a8;
            --accent-light: #8b92bf;
            --accent-dim: rgba(107,114,168,0.1);
            --green: #5a8a7a;
            --blue: #5a7a9e;
            --orange: #8a7a5a;
            --red: #9e5a5a;
            --yellow: #8a8060;
        }

        body {
            margin: 0; padding: 0; background: var(--bg-primary); color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        .api-header {
            background: linear-gradient(135deg, #12141f 0%, #1a1530 50%, #12141f 100%);
            color: var(--text-primary); padding: 2rem; text-align: center;
            border-bottom: 1px solid var(--border);
        }
        .api-header h1 { margin: 0 0 0.5rem 0; font-size: 2.5rem; font-weight: 700; }
        .api-header p { margin: 0; font-size: 1.1rem; opacity: 0.85; }
        .api-header .version {
            display: inline-block; background: rgba(255,255,255,0.1);
            padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.9rem; margin-top: 0.5rem;
        }
        .api-badge {
            display: inline-block; background: rgba(255,255,255,0.08);
            padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem; margin-top: 0.5rem;
        }

        .api-links {
            background: var(--bg-secondary); padding: 1rem 2rem;
            border-bottom: 1px solid var(--border);
            display: flex; gap: 1.5rem; flex-wrap: wrap; align-items: center;
        }
        .api-links strong { color: var(--text-secondary); }
        .api-links a { color: var(--accent-light); text-decoration: none; font-weight: 500; transition: color 0.2s; }
        .api-links a:hover { color: #c7d2fe; text-decoration: underline; }
        .api-links .separator { color: var(--border); }

        .quick-links {
            background: linear-gradient(135deg, #1a1e2e 0%, #1e2236 50%, #161922 100%); padding: 1.5rem 2rem; margin: 2rem;
            border-radius: 8px; border-left: 4px solid var(--accent);
        }
        .quick-links h3 { margin: 0 0 1rem 0; color: var(--text-primary); }
        .quick-links ul {
            list-style: none; padding: 0; margin: 0;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;
        }
        .quick-links li { display: flex; align-items: center; color: var(--text-secondary); }
        .quick-links li::before { content: "\2192"; color: var(--accent); font-weight: bold; margin-right: 0.5rem; }
        .quick-links code {
            background: var(--bg-card); padding: 0.25rem 0.5rem; border-radius: 4px;
            font-family: 'Courier New', monospace; font-size: 0.9rem; color: var(--accent-light);
            border: 1px solid var(--border);
        }

        #swagger-ui { max-width: 1400px; margin: 0 auto; }

        .api-footer {
            background: linear-gradient(180deg, #161922 0%, #12141f 100%); color: var(--text-secondary); text-align: center;
            padding: 2rem; margin-top: 3rem; border-top: 1px solid var(--border);
        }
        .api-footer a { color: var(--accent-light); text-decoration: none; }
        .api-footer a:hover { text-decoration: underline; }

        /* ========= SWAGGER UI DARK — WILDCARD OVERRIDE ========= */

        /* WILDCARD: force ALL swagger elements dark */
        .swagger-ui * { color: #7e8694 !important; border-color: #2a2f42 !important; fill: #525a68 !important; }
        .swagger-ui *::before, .swagger-ui *::after { color: #7e8694 !important; }
        .swagger-ui { background: var(--bg-primary) !important; }

        /* Force transparent/dark backgrounds on everything */
        .swagger-ui *:not(.opblock-summary-method):not(.btn):not(.topbar) { background-color: transparent !important; }
        .swagger-ui .wrapper { background: linear-gradient(180deg, #1e2230 0%, #161922 100%) !important; }
        .swagger-ui .scheme-container { background: linear-gradient(180deg, #1a1e2e 0%, #161922 100%) !important; }
        .swagger-ui .opblock-section-header { background: linear-gradient(135deg, #1e2230 0%, #232840 100%) !important; }
        .swagger-ui .opblock { background: linear-gradient(135deg, #161922 0%, #1a1e2e 50%, #161922 100%) !important; }

        /* Topbar (API selector) */
        .swagger-ui .topbar { background-color: var(--bg-tertiary) !important; padding: 0.5rem 1rem; }
        .swagger-ui .topbar .topbar-wrapper .link { display: none; }
        .swagger-ui .topbar input, .swagger-ui .topbar select { background-color: var(--bg-primary) !important; color: var(--text-primary) !important; }
        .swagger-ui .topbar .download-url-button { background-color: var(--bg-tertiary) !important; }

        /* Selects everywhere */
        .swagger-ui select { background-color: var(--bg-tertiary) !important; color: var(--text-primary) !important; }

        /* Inputs */
        .swagger-ui input, .swagger-ui textarea { background-color: #0a0c10 !important; color: var(--text-primary) !important; }

        /* Code blocks / response body */
        .swagger-ui pre, .swagger-ui code { background: linear-gradient(135deg, #0a0c10 0%, #0e1018 50%, #0a0c10 100%) !important; }
        .swagger-ui .opblock-body { background: linear-gradient(180deg, #0f1117 0%, #131620 100%) !important; }

        /* Primary text — slightly brighter */
        .swagger-ui .opblock-tag,
        .swagger-ui .opblock .opblock-summary-path,
        .swagger-ui .opblock .opblock-summary-path span,
        .swagger-ui .opblock-section-header h4,
        .swagger-ui .parameter__name,
        .swagger-ui .info .title,
        .swagger-ui h1, .swagger-ui h2, .swagger-ui h3, .swagger-ui h4,
        .swagger-ui .model-title,
        .swagger-ui .opblock-summary-method { color: var(--text-primary) !important; }

        /* Links */
        .swagger-ui a { color: var(--accent-light) !important; }

        /* Method badges — only these get background color */
        .swagger-ui .opblock.opblock-get .opblock-summary-method { background-color: #2d4a5e !important; }
        .swagger-ui .opblock.opblock-post .opblock-summary-method { background-color: #2d4e44 !important; }
        .swagger-ui .opblock.opblock-put .opblock-summary-method { background-color: #4e4430 !important; }
        .swagger-ui .opblock.opblock-delete .opblock-summary-method { background-color: #5e2d2d !important; }
        .swagger-ui .opblock.opblock-patch .opblock-summary-method { background-color: #3a3d5e !important; }
        .swagger-ui .opblock.opblock-options .opblock-summary-method,
        .swagger-ui .opblock.opblock-head .opblock-summary-method { background-color: #3a4a4a !important; }

        /* Buttons */
        .swagger-ui .btn.execute { background-color: #3a3d5e !important; color: var(--text-primary) !important; }
        .swagger-ui .btn.execute:hover { background-color: #464a6e !important; }
        .swagger-ui .btn.cancel { background-color: transparent !important; }
        .swagger-ui .btn.authorize { background-color: transparent !important; }
        .swagger-ui .try-out__btn { background-color: transparent !important; }
        .swagger-ui .try-out__btn:hover { background-color: rgba(107,114,168,0.1) !important; }

        /* Dialog */
        .swagger-ui .dialog-ux .modal-ux { background-color: var(--bg-secondary) !important; }
        .swagger-ui .dialog-ux .backdrop-ux { background: rgba(0,0,0,0.8) !important; }

        /* Filter input */
        .swagger-ui .filter .operation-filter-input { background-color: var(--bg-tertiary) !important; }

        /* Request snippets — FORCE dark on everything */
        .swagger-ui [class*="snippets"],
        .swagger-ui [class*="snippets"] *,
        .swagger-ui [class*="curl"],
        .swagger-ui [class*="curl"] *,
        .swagger-ui .request-snippets,
        .swagger-ui .request-snippets *,
        .swagger-ui .curl-command,
        .swagger-ui .curl-command *,
        .swagger-ui .snippet-wrapper,
        .swagger-ui .snippet-wrapper * { background-color: #0a0c10 !important; color: #7e8694 !important; border-color: #2a2f42 !important; }
        .swagger-ui .request-snippets .tab-header,
        .swagger-ui .request-snippets .tab-header * { background: linear-gradient(180deg, #1e2230 0%, #1a1e2e 100%) !important; }
        .swagger-ui .request-snippets .tab-header .tab-item.active,
        .swagger-ui .request-snippets .tab-header button.active { background-color: #0a0c10 !important; color: #c8cdd8 !important; }
        .swagger-ui .copy-to-clipboard,
        .swagger-ui .copy-to-clipboard * { background-color: #1e2230 !important; }

        /* Live response area */
        .swagger-ui .live-responses-table,
        .swagger-ui .live-responses-table *,
        .swagger-ui .server-response-table,
        .swagger-ui .server-response-table *,
        .swagger-ui .response,
        .swagger-ui .response *,
        .swagger-ui .responses-table,
        .swagger-ui .responses-table * { background-color: transparent !important; color: #7e8694 !important; }

        /* Scrollbar */
        .swagger-ui ::-webkit-scrollbar { width: 6px; height: 6px; }
        .swagger-ui ::-webkit-scrollbar-track { background: var(--bg-primary) !important; }
        .swagger-ui ::-webkit-scrollbar-thumb { background: var(--border) !important; border-radius: 3px; }

    </style>
</head>
<body>
    <!-- Header -->
    <div class="api-header">
        <h1>&#9729;&#65039; Cloud Control API</h1>
        <p>RESTful API for Cloud Infrastructure Monitoring & Management</p>
        <span class="version">v1.0.0</span>
        <span class="api-badge">Live spec &mdash; auto-generated from Rust API</span>
    </div>

    <!-- Links -->
    <div class="api-links">
        <strong>Quick Access:</strong>
        <a href="https://cloud.diegonmarcos.com" target="_blank">Dashboard</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/c3-api/health/status" target="_blank">C3 Health</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/c3-api/topology" target="_blank">Topology</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/c3-api/dash" target="_blank">C3 Dashboard</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/c3-api/docs/json" target="_blank">C3 Spec (JSON)</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/rust-api/docs/openapi.json" target="_blank">Rust Spec (JSON)</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/flask/apispec.json" target="_blank">Flask Spec (JSON)</a>
        <span class="separator">|</span>
        <a href="https://api.diegonmarcos.com/crawlee/" target="_blank">Crawlee Dashboard</a>
        <span class="separator">|</span>
        <a href="cloud_central_api.md" target="_blank">Central API (MD)</a>
        <a href="cloud_ondemand_api.md" target="_blank">On-Demand API (MD)</a>
    </div>

    <!-- Quick Links -->
    <div class="quick-links">
        <h3>Key Endpoints</h3>
        <ul>
            <li><strong>Heartbeat:</strong> <code>GET /api/health/alive</code></li>
            <li><strong>Full Status:</strong> <code>GET /api/health/status</code></li>
            <li><strong>Drift:</strong> <code>GET /api/health/drift</code></li>
            <li><strong>Deployed:</strong> <code>GET /api/health/deployed/{vm_id}</code></li>
            <li><strong>VM Control:</strong> <code>POST /api/vms/{vm_id}/start|stop|reset</code></li>
            <li><strong>Containers:</strong> <code>POST /api/vms/{vm_id}/containers/{name}/start|stop</code></li>
            <li><strong>Profiling:</strong> <code>GET /api/profiling/container/{name}</code></li>
            <li><strong>Services:</strong> <code>GET /api/services</code></li>
            <li><strong>C3 Dashboard:</strong> <a href="https://api.diegonmarcos.com/c3-api/dash" target="_blank" rel="noopener">api.diegonmarcos.com/c3-api/dash</a></li>
        </ul>
    </div>

    <!-- Swagger UI -->
    <div id="swagger-ui"></div>

    <!-- Footer -->
    <div class="api-footer">
        <p><strong>Cloud Control API</strong> &copy; 2025 Diego Nepomuceno Marcos</p>
        <p>
            <a href="https://diegonmarcos.com" target="_blank">diegonmarcos.com</a> |
            <a href="https://github.com/diegonmarcos" target="_blank">GitHub</a>
        </p>
        <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
            Built with <a href="https://swagger.io/tools/swagger-ui/" target="_blank">Swagger UI</a>
        </p>
    </div>

    <!-- Swagger UI Bundle -->
    <script src="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui-standalone-preset.js"></script>

    <script>
        // Initialize Swagger UI with both APIs
        window.ui = SwaggerUIBundle({
            urls: [
                { url: 'https://api.diegonmarcos.com/c3-api/docs/json', name: 'C3 API (Primary)' },
                { url: 'https://api.diegonmarcos.com/rust-api/docs/openapi.json', name: 'Rust API (Legacy)' },
                { url: 'https://api.diegonmarcos.com/flask/apispec.json', name: 'Flask API (Central)' }
            ],
            "urls.primaryName": "C3 API (Primary)",
            dom_id: '#swagger-ui',
            deepLinking: true,
            presets: [
                SwaggerUIBundle.presets.apis,
                SwaggerUIStandalonePreset
            ],
            plugins: [
                SwaggerUIBundle.plugins.DownloadUrl
            ],
            layout: "StandaloneLayout",
            defaultModelsExpandDepth: 1,
            defaultModelExpandDepth: 1,
            docExpansion: 'list',
            filter: true,
            syntaxHighlight: {
                activate: true,
                theme: 'tomorrow-night'
            },
            tryItOutEnabled: true,
            requestSnippetsEnabled: true,
            requestSnippets: {
                generators: {
                    curl_bash: {
                        title: "cURL (bash)",
                        syntax: "bash"
                    },
                    curl_powershell: {
                        title: "cURL (PowerShell)",
                        syntax: "powershell"
                    },
                    curl_cmd: {
                        title: "cURL (CMD)",
                        syntax: "bash"
                    }
                },
                defaultExpanded: true,
                languages: null
            }
        });
    </script>
</body>
</html>
